{"version":3,"sources":["assets/logos/app-logo-transparent.png","assets/sponsorPage/coupon.png","assets/sponsorPage/become-sponsor.png","assets/logos/splash-logo.png","node_modules/moment/locale sync /^/.*$","assets/logos/owl-black-text.png","assets/logos/owl-white-text.png","src/app/appDataSlice.ts","src/app/SecureStorage.ts","src/features/calendar/calendarSlice.ts","src/constants/discover.ts","src/functions.ts","src/features/api/apiSlice.ts","src/features/api/usersApi.ts","src/features/api/classPagesApi.ts","src/features/classPages/classPagesSlice.ts","src/features/discover/discoverSlice.ts","src/app/storage.ts","src/app/store.ts","src/app/hooks.ts","src/components/WebSplashScreen.tsx","src/constants/admin.ts","src/features/adminPanel/adminPanel.tsx","src/components/Header.tsx","src/features/adminPanel/index.tsx","src/features/authentication/ForgotPassword/EnterCodePage.tsx","src/features/authentication/ForgotPassword/EnterEmailPage.tsx","src/features/authentication/ForgotPassword/index.tsx","src/features/authentication/Login.tsx","src/features/authentication/Signup/SignupForm.tsx","src/features/authentication/Signup/VerifyEmail.tsx","src/components/BackButton.tsx","src/features/authentication/Signup/index.tsx","src/features/authentication/index.tsx","src/components/ModalContainer.tsx","src/features/classPages/SelectTerm.tsx","src/features/notifications/constants.tsx","src/components/Message.tsx","src/components/SearchBar.tsx","src/constants/classPages.ts","src/features/classPages/AddedClasses.tsx","src/features/classPages/ClassListItemItem.tsx","src/features/classPages/ClassListItem.tsx","src/features/classPages/FilterClasses.tsx","src/constants/map.ts","src/components/UserNameSelectionDropDown.tsx","src/features/classPages/SingleClassPage/exportModalClass.tsx","src/features/classPages/SingleClassPage/InfoPage.tsx","src/features/classPages/SingleClassPage/PostReview.tsx","src/features/classPages/SingleClassPage/index.tsx","src/features/classPages/StarredClasses.tsx","src/features/classPages/ClassesList.tsx","src/features/combinedCalender/classList/index.tsx","src/features/calendar/CalendarFunctions.ts","src/features/calendar/ScheduledItem.tsx","src/features/calendar/customEvent.tsx","src/features/calendar/CalendarRender.tsx","src/features/calendar/CalendarPage.tsx","src/components/WrapItems.tsx","src/features/calendar/CreateCustomEvent.tsx","src/features/calendar/exportModal.tsx","src/features/calendar/index.tsx","src/features/chats/singleChatPage/SingleChatRoom.tsx","src/features/chats/CreateChatRoom.tsx","src/features/chats/ChatRooms.tsx","src/features/notifications/notificationSinglePage.tsx","src/features/notifications/Notifications.tsx","src/features/settings/EditUser.tsx","src/features/settings/SettingsPage.tsx","src/features/settings/index.tsx","src/components/Menu.tsx","src/features/api/sponsorsApi.ts","src/features/sponsors/SponsorsList.tsx","src/constants/electiveGenerator.ts","src/features/classPages/ElectiveGenerator/index.tsx","src/features/classPages/index.tsx","src/features/combinedCalender/index.tsx","src/features/discover/CreatePost/CreateImagePost.tsx","src/features/discover/CreatePost/CreateEventPost.tsx","src/features/api/discoverApi.ts","src/features/discover/CreatePost/CreatePost.tsx","src/features/discover/BottomBar.tsx","src/components/withPreventDoubleClick.tsx","src/components/DoubleTap.tsx","src/components/DoubleTapHeart.tsx","src/features/discover/ImageComponent.tsx","src/features/discover/EventBody.tsx","src/features/discover/Cards/EventCard.tsx","src/features/discover/Cards/ImageCard.tsx","src/features/discover/Cards/SponsorCard.tsx","src/features/discover/Cards/TextCard.tsx","src/features/discover/PostsList.tsx","src/features/discover/SearchPage.tsx","src/components/DisabledOptionModal.tsx","src/components/FullPageSpinner.tsx","src/features/discover/SinglePost/Comment.tsx","src/features/discover/SinglePost/SinglePostBody.tsx","src/features/discover/SinglePost/SinglePostPage.tsx","src/features/discover/index.tsx","src/theme/custom-theme.ts","src/theme/feather-icons.tsx","src/theme/font-awesome-icons.tsx","App.tsx","index.js"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","initialState","userKey","isGuest","isMobile","darkMode","useDeviceColorScheme","isCacheReset","appDataSlice","createSlice","name","reducers","reset","cacheReset","state","userKeyUpdated","action","payload","setIsGuest","deviceDarkModeSet","useDeviceColorSchemeSet","deleteAllAppData","mobileSiteSet","extraReducers","selectDarkMode","appData","secure","selectUserKey","selectIsGuest","actions","defaultReplacer","key","replaceCharacter","replace","isThreeDay","calendarSlice","isThreeDaySet","tagIndices","adminTagIndices","postOptions","EMOJI_LIST","getImageUrl","imageId","IMAGE_BUCKET_URL","stringToEmoji","str","dec","i","length","charCodeAt","showToast","message","backgroundColor","Toast","show","duration","durations","LONG","opacity","position","shadow","FormatTimeRange","start","end","startDate","Date","endDate","getHours","getMinutes","weekDayNumberToName","0","1","2","3","4","5","6","FormatDate","date","newDate","weekDay","getDay","month","getMonth","day","getDate","exportToICal","events","dayMapping","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","icsEvents","event","schedule","courseSchedule","days","daysOfTheWeek","join","summary","courseName","courseCode","description","professorName","seatsFilled","courseStatus","location","classLocation","startDateTime","startTime","endDateTime","endTime","vevent","_id","toISOString","split","push","getMasterCourseCodeFromCourseCode","courseCodeParts","slice","getTimeAsNumberOfMinutes","time","timeParts","parseInt","apiSlice","createApi","reducerPath","baseQuery","fetchBaseQuery","baseUrl","tagTypes","endpoints","builder","getCurrentVersion","query","useLazyGetCurrentVersionQuery","usersApiSlice","injectEndpoints","overrideExisting","getUserInfo","providesTags","url","headers","transformErrorResponse","response","status","error","transformResponse","classes","starredClasses","rest","addedClasses","orderedClasses","forEach","courseTerm","schoolParts","school","masterCourseCode","login","mutation","userName","password","params","trackLogin","method","responseHandler","text","deleteAccount","editUser","invalidatesTags","body","fields","getCollegeList","getChatRooms","json","createChatRoom","recipients","nameOfChatRoom","JSON","stringify","userList","addOrRemoveUserFromChatRoom","chatRoomId","signupUser","verifySignup","resetPassword","email","addExpoPushToken","expoPushToken","useAddOrRemoveUserFromChatRoomMutation","useCreateChatRoomMutation","useGetChatRoomsMutation","useTrackLoginMutation","useGetUserInfoQuery","useLazyGetUserInfoQuery","useLoginMutation","useDeleteAccountMutation","useEditUserMutation","useGetCollegeListQuery","useSignupUserMutation","useVerifySignupMutation","useResetPasswordMutation","useAddExpoPushTokenMutation","classPagesApi","getAllClasses","pageNumber","collegeName","getRatingFromReviews","reviews","totalAverage","counter","review","rating","toFixed","getDifficultyFromReviews","difficulty","fromEntries","entries","value","sort","getCurrentSection","currentTerm","getAllSections","addClass","classesToAdd","onQueryStarted","dispatch","queryFulfilled","patchResult","util","updateQueryData","draft","undo","addMultipleClasses","courseCodePairs","courseCodePair","removeClass","classesToRemove","filter","classCode","addStarredClass","starredClassesToAdd","some","course","removeStarredClass","starredClassesToRemove","isAllowedToReview","sendReview","swapCoursePriority","firstPosition","secondPosition","termToUpdate","temp","useGetCurrentSectionQuery","useGetAllClassesQuery","useAddClassMutation","useAddMultipleClassesMutation","useRemoveClassMutation","useIsAllowedToReviewQuery","useSendReviewMutation","useLazyGetAllClassesQuery","useLazyGetAllSectionsQuery","useRemoveStarredClassMutation","useAddStarredClassMutation","useSwapCoursePriorityMutation","filteredClasses","renderedClasses","currentSection","availableSections","selectedClass","searchTerm","page","isHMC","filters","filterConflicts","colleges","HM","CM","PO","PZ","SC","hasSelectedElectiveGen","suggestedClasses","orderedAddedClasses","classPagesSlice","currentSectionUpdated","availableSectionsListUpdated","endOfListReached","resetClasses","caseReducers","searchResultsFiltered","suggestedClassesUpdated","suggestedClassesDimissed","electiveGeneratorSelected","classSelected","selectedClassCleared","filtersSaved","isHMCUpdated","filtersReset","newResultsArray","collegeAbr","substring","newResultsObject","times","timeWindow","doesClassConflict","searchTermUpdated","matchDepartmentName","searchCourseCode","findSearchTermShortcuts","searchTerms","filterBySearchTerm","addMatcher","matchFulfilled","getOrderedClassesFromApiRes","userData","searchPhrase","match","p1","p2","p3","p4","p5","padStart","coursePhrase","trim","includes","toUpperCase","addedClass","addedTimes","addedTime","addedSchedule","addedTimeStart","addedTimeEnd","scheduleTimeStart","scheduleTimeEnd","selectClassesList","classPages","submittedSearchTerm","tag","recentSearches","discoverSlice","searchTermSubmitted","unshift","searchTermChanged","recentSearchTermSelected","tagSelected","recentSearchTermRemoved","term","selectSearchTerm","discover","selectSubmittedSearchTerm","selectTag","selectRecentSearches","SecureStorage","options","replacer","getItem","SecureStore","setItem","removeItem","createSecureStorage","securePersistConfig","storage","Platform","OS","AsyncStorage","cpPersistConfig","ExpoFileSystemStorage","whitelist","discoverPersistConfig","rootReducer","combineReducers","persistReducer","classPagesReducer","appDataReducer","discoverReducer","calendar","calendarReducer","store","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","immutableCheck","concat","useAppDispatch","useDispatch","useAppSelector","useSelector","WebSplashScreen","View","style","flex","justifyContent","alignItems","Image","source","require","width","height","base_URL","AdminHomePage","Manager","randomizationFactor","addTrailingSlash","autoConnect","createNativeStackNavigator","AdminHomeNavigation","useState","adminCommands","setAdminCommands","getAdminCommands","adminURL","res","fetch","commands","filterObject","currentAdminCommandsStatus","a","b","textA","label","textB","finalCommandList","command","useEffect","refreshing","setRefreshing","onRefresh","useCallback","then","Navigator","initialRouteName","Screen","headerShown","component","navigation","ScrollView","refreshControl","RefreshControl","Text","TouchableOpacity","onPress","navigate","data","listingStyles","cardContainer","AdminCommand","headerTitle","route","info","setInfo","isFileUpload","setIsFileUpload","setBody","users","setUsers","fileUploads","setFileUploads","sponsors","setSponsors","setStatus","allFieldsFilled","setAllFieldsFilled","buttonPushed","setButtonPushed","checkForFieldsFilled","field","mandatory","undefined","ok","newUsers","sponsor","sponsorName","images","imageName","sendApiData","additionToUrl","aspect","paramOverride","apiType","newUrl","formdata","FormData","item","append","uri","type","redirect","text2","parse","err","renderEachDropItem","final","option","title","trueFalseTemplate","selectedIndex","setSelectedIndex","boolValues","displayValue","styles","container","level","onSelect","index","row","newBody","changeEverything","placeholder","KeyboardAvoidingView","behavior","sponsorPageStyles","display","address","fontSize","changeValue","theValue","valueToChange","renderStringArray","valuesToSend","tempFinal","paddingLeft","paddingBottom","paddingTop","TextInput","autoCapitalize","onChangeText","miniField","newFieldForBody","values","changeStringValue","stringArray","eachOne","myStyles","indentedInput","placeholderTextColor","renderMultiSelectDropDown","hasChosen","setHasChosen","containerDrop","multiSelect","finalArray","littleIndex","finalObject","at","splice","calculateSelectedValues","newSelection","Array","isArray","toggleValue","clearButtonMode","input","IndexPath","renderDropDown","inputBig","multiline","pickImage","result","ImagePicker","allowsEditing","cancelled","borderRadius","paddingVertical","flexDirection","marginVertical","marginHorizontal","FontAwesome","size","color","fileUploadTemplate","alignContent","fontWeight","renderFilterParameters","renderTheFieldsNecessary","button","graphData","timeFrame","informationToShow","isDateGraph","dataToShow","labels","getDates","datasets","getData","Dimensions","get","verticalLabelRotation","fromZero","xLabelsOffset","segments","chartConfig","decimalPlaces","labelColor","propsForDots","r","strokeWidth","stroke","oneElement","renderOneCard","flexShrink","moment","tz","subtract","format","usersToday","instance","weekStart","weekEnd","usersMonth","monthStart","monthEnd","add","cardInfo","finalText","flexWrap","renderedActions","renderButtonForCard","elevation","parameter","buttonText","alignSelf","fontStyle","showResponseData","header","marginTop","margin","borderColor","borderWidth","padding","video","marginLeft","logo","couponContainer","marginBottom","coupon","imageGallery","imageStyle","headerText","marginRight","lineHeight","letterSpacing","paddingHorizontal","borderBottomWidth","shadowColor","shadowOffset","shadowOpacity","shadowRadius","textAlign","image","imagesContainer","imageContainer","imageLabel","Header","accessoryLeft","accessoryRight","center","Constants","statusBarHeight","AdminStack","AdminPanel","EnterCodePage","category","routes","EnterEmailPage","setEmail","inputRef","useRef","isLoading","isError","netInfo","useNetInfo","current","focus","onSubmit","isConnected","unwrap","alert","ref","onSubmitEditing","Keyboard","dismiss","disabled","Stack","ForgotPassword","screenOptions","LightModeLogo","DarkModeLogo","Login","setUserName","setPassword","loginError","setLoginError","loadingUserInfo","passwordRef","React","handleLogin","NetInfo","allSections","availableTerms","guestLogin","TouchableWithoutFeedback","inputView","autoComplete","keyboardType","blurOnSubmit","secureTextEntry","forgot_button","loginBtn","maxWidth","signupBtn","StyleSheet","create","guestButton","Signup","realFirstName","setRealFirstName","realLastName","setRealLastName","major","setMajor","simplifiedSignup","setSimplifiedSignUp","humanReadableCollegeName","userCollege","setUserCollege","collegeList","signupLoading","firstNameInputRef","lastNameInputRef","passwordInputRef","majorInputRef","handleSubmitButton","validateInput","responseUnwrapped","goBack","SectionStyle","labelSection","inputStyle","underlineColorAndroid","defaultValue","returnKeyType","onFocus","newObject","college","zIndex","top","left","checked","onChange","nextChecked","buttonStyle","buttonTextStyle","paddingRight","errorTextStyle","successTextStyle","minHeight","minWidth","VerifyEmail","verificationCode","setVerificationCode","verifyCode","getUserInfoLoading","handleVerifyCodeButton","BackButton","props","HeaderBackButton","labelVisible","theme","useTheme","headerStyle","headerLeft","SignupForm","Auth","ModalContainer","children","backDropVisible","setBackDropVisible","clickBackdropToClose","modalStyle","modalProps","backdropOpacity","onBackdropPress","isVisible","appearance","right","pack","SelectTerm","userDataCache","useQueryState","skip","startIndexValue","findIndex","selectedSectionIndex","setSelectedSectionIndex","Message","SearchBar","inputProps","cancelButtonAction","cancelButtonStatus","alwaysShowCancelButton","selected","setSelected","LayoutAnimation","configureNext","onBlur","autoCorrect","NEW_REVIEW_FIELDS","AddedClasses","setAddedClassesVisible","handleRemoveClass","handleSwapAddedClasses","bottomSheetRef","useNavigation","windowHeight","useWindowDimensions","allClassesList","addedClassesList","renderItem","drag","isActive","getIndex","onLongPress","Ionicons","snapToIndex","handleClassSelected","Entypo","renderFlatList","contentContainerStyle","automaticallyAdjustsScrollIndicatorInsets","indicatorStyle","showsVerticalScrollIndicator","ListEmptyComponent","ItemSeparatorComponent","onDragEnd","from","to","keyExtractor","maxHeight","ClassListItemItem","seatsAvailable","handleAddClass","added","selectedAnim","Animated","Value","dropDownItem","isAvailable","notAvailable","activeOpacity","sequence","spring","toValue","speed","useNativeDriver","transform","scale","FontAwesome5","list__container","addedClassesContainer","borderTopRightRadius","borderBottomRightRadius","borderTopWidth","borderRightWidth","buttonContainer","dropDown","loadingMessage","loadingMessageRefresh","Item","menuOpen","setIsMenuOpen","inItem","useMemo","property","update","springDamping","UIManager","setLayoutAnimationEnabledExperimental","addClassButton","FilterClasses","setFiltersMenuVisible","initialFilters","getInitialState","setColleges","setFilterConflicts","change","onChangeIsHMC","bool","onChangeFilterCollege","locations","ClaremontColleges","Brackett","Carnegie","Edmunds","Honnold","Lincoln","Online","PAC","Pearsons","Stauffer","KSPC","TBD","removeNumbersAndSpaces","char","UserNameSelectionDropDown","setRecipient","names","setNames","setValue","modal","backdrop","user","realName","userNameContainsString","find","auser","toLowerCase","firstPar","indexOf","secondPar","findUserNameFromName","ExportModalClass","classData","showGuestModal","setShowGuestModal","showModal","setShowModal","showWebModal","setShowWebModal","renderModal","recipient","exportClass","isCourseData","visible","backdropStyle","Button","returnValue","Alert","withStyles","eva","scrollViewRef","showCourseModal","setShowCourseModal","courseModalChildren","setCourseModalChildren","professorReviewsObject","setProfessorReviewsObject","daysOfWeek","dark","light","isAllowedToReviewRes","isStarred","userHasCourse","courseToggleChildren","courseForToggle","toggleStarCourse","getReviewsFromProfessor","buildTimeString","convertTo12HourTime","hours","minutes","ampm","Number","scrollTo","y","animated","averageGradeMSGModal","getProfessorsList","list","schedulePopup","setSchedulePopup","allTheChildren","setAllTheChildren","toggleSchedulePopUp","finalDays","realTime","addition","daysObject","daysActive","stringArrays","generateTable","LinearGradient","colors","x","subtitle","creditWeightHM","creditWeight","timeSpentOutOfClass","averageGrade","courseDescription","boxed","prerequisites","corequisites","disclaimer","subHeader","section","sectionText","textDecorationLine","permCount","openMap","waypoints","provider","number","toString","zoom","isAllowed","professorList","professor","getProfessorReviewsList","courseOpen","courseClosed","details","BodyContainer","borderTopColor","documentStyle","graphImage","aspectRatio","resizeMode","grade","reviewText","reviewBox","NewReview","showConfirmationModal","setShowConfirmationModal","showErrorModal","setShowErrorModal","handleReviewSubmitted","successChildren","errorChildren","SingleClassPage","InfoPage","PostReview","StarredClasses","isWeb","starredCourses","setStarredCourses","FlatList","courseData","handleRemoveStarredClass","CurrentTermLabel","textStyle","ClassesList","setMenuOpen","addedClassesVisible","filtersMenuVisible","listRef","setListRef","swapAddedClasses","fetchUserInfo","getClasses","classListLoading","userInfoSuccess","isSuccess","fetchClasses","content","isClassAdded","handleRefresh","handleMassImport","courseCodes","matchAll","reduce","accumulator","matches","collegeParts","newCourseCode","courseInfo","inItemSize","ListHeaderComponent","Presets","easeInEaseOut","onScroll","scrollEventThrottle","maxToRenderPerBatch","initialNumToRender","onEndReachedThreshold","onEndReached","tintColor","titleColor","scrollToOffset","offset","filteredColleges","c","renderFilteredCollegesList","ClassListPage","CalendarFunctions","string","charIndex","this","getColor","minuteHeight","allClassData","masterClassInfo","meetingTime","setMenuCourseCode","disableLongPress","extraTransparency","calendarFun","universalHeight","startHour","startMinute","endHour","endMinute","stringToColour","getMinutesDiff","adjustsFontSizeToFit","numberOfLines","Math","random","renderCustomEvent","setMenuEvent","CalendarRender","overrideData","showOverlay","setShowOverlay","topBar","verticalRef","setCurrentTime","startingOffset","dimensions","rightWidth","setRightWidth","menuCourseCode","menuCustomEvent","setMenuCustomEvent","leftWidth","_panResponder","getPanResponder","isDividerClicked","setIsDividerClicked","threeDayWidth","fiveDayWidth","overrideClassesToRender","setOverrideClassesToRender","today","stringOverrideData","getOverrideCourseData","setInterval","renderCustomEvents","elem","disableInteractions","finalRender","customEvents","eventIsThisDay","showThisWeek","PanResponder","onMoveShouldSetResponderCapture","onMoveShouldSetPanResponderCapture","onPanResponderGrant","gestureState","onPanResponderMove","newRight","moveX","onPanResponderRelease","dayString","dayOfWeek","adjustDays","getMs","seconds","dateOfEvent","currentDate","currentDayOfWeek","startOfWeek","valueOf","getSeconds","endOfWeek","renderDashes","borderBottomColor","renderClasses","toReversed","getFullClassData","data2","renderClassesForOverride","courseTime","renderDeleteModal","onRemove","onCancel","animationOut","masterRender","horizontal","snapToInterval","showsHorizontalScrollIndicator","contentOffset","bounces","decelerationRate","nativeEvent","onMomentumScrollBegin","panHandlers","removeCustomEvent","catch","bottom","CalendarPage","LogBox","ignoreAllLogs","WrapItems","childStyle","LayoutProps","Children","child","CreateCustomEvent","showDots","setShowDots","dateToUse","selectedDate","setSelectedDate","isOneDay","setIsOneDay","allValuesPopulated","setAllValuesPopulated","daysArray","setDaysArray","setStartTime","setEndTime","eventTitle","setEventTitle","showTimePickerAndroid","setShowTimePickerAndroid","timePickerOptions","setTime","formatAMPM","Title","mode","testID","addCustomEvent","toTimeString","setTimeout","exportSchedule","convert","isSchedule","Calendar","leftComponent","rightComponent","trackBar","activeBackgroundColor","inActiveBackgroundColor","thumbButton","activeColor","inActiveColor","animationDuration","flatMap","animation","gestureDirection","SingleChatRoom","imagePickerStatus","requestImagePickerPermission","cameraStatus","requestCameraPermission","setFilter","showSearch","setShowSearch","contentImage","photoSelected","setPhotoSelected","addOrRemoveUser","isCustomRoom","keyboardShown","setKeyboardShown","retryNumber","setRetryNumber","failedConnection","setFailedConnection","hardDisableSend","setHardDisableSend","showUserList","setShowUserList","setMessage","filteredMessageList","setFilteredMessageList","loaded","setLoaded","messageList","setMessageList","socket","io","auth","isUserBlocked","dataToUse","blockedUsers","addMessage","messageToAdd","myMessage","mess","isEqualTo","isUnsent","message1","message2","granted","mediaTypes","Images","canceled","assets","newMessage","emit","isImage","photo","deletionAlert","messageToDelete","SHORT","positions","CENTER","deleteTheMessage","cancelable","ignoreLogs","showListener","addListener","hideListener","remove","setOptions","headerRight","connect","timer","off","disconnect","close","on","clearTimeout","array","useIsFocused","msg","toSpliced","SafeAreaView","messagingScreen","toSorted","unblockUser","blockUser","newUserData","reverse","inverted","messagingInputContainer","messagingInput","editable","messagingButtonContainer","CreateChatRoom","isDisabled","setIsDisabled","setNameOfChatRoom","setRecipients","nameToAdd","handleAddValue","ChatRoomsNavigator","ChatsRoomNavigation","Chats","availableChats","setAvailableChats","generateChatRooms","realPayload","chats","permissionLevel","lastModifiedDate","useFocusEffect","chat","timeButton","timeText","actualTimeText","timeStyle","borderLeftColor","containerForNotifications","NotificationHomePage","NotificationsNavigation","notifications","setNotifications","isOpen","setIsOpen","refreshNotifications","bodyTosend","createNotificationButton","getDateText","spaceIndex","first","isMoving","setIsMoving","postId","newNotifications","not","scrollEnabled","notification","disableRightSwipe","onSwipeValueChange","handleOnLeftSwipe","creationDate","courseSimpleData","repliable","done","setDone","tempBody","renderInputFields","sendNotification","EditProfileHeader","saveChanges","EditUser","inputs","profileDescription","propOptions","linkedin","setFields","changedFields","SettingsPage","settingsDisabled","setSettingsDisabled","colorScheme","useColorScheme","currentVersion","manifest2","extra","expoClient","version","manifest","logOut","resetClassPages","resetDiscover","resetAppData","resetApiState","handleDeleteAccount","handleSettingsChange","settingName","settings","handleUseDeviceSettingToggled","handleDarkModeToggled","Settings","Group","presentation","Menu","menuItems","setMenuItems","Feather","sponsorsApiSlice","refreshSponsors","postSponsorVisit","sponsorId","useLazyRefreshSponsorsQuery","usePostSponsorVisitMutation","windowWidth","SponsorPage","isDarkMode","setImageIndex","setIsVisible","canOpenLink","setCanOpenLink","postSponsorVisitQuery","videoLinkArray","videoLink","Linking","canOpenURL","website","funct","phoneNumber","openURL","img","coupons","couponDescription","dayOfTheWeek","openTime","closeTime","SponsorsList","sponsorFilters","setSponsorFilters","gotSponsors","setGotSponsors","refreshSponsorsQuery","tabNames","tags","tempFilters","getFilters","shouldLimitPrint","filterName","getTheSponsors","sponsorsToSend","renderSponsorsBasedOnFilters","starredFinal","object","departments","ElectiveGenerator","departmentQuery","setDepartmentQuery","departmentOptions","setDepartmentOptions","setDescription","getClassesByDepartment","department","onChangeDepartmentText","getWords","wordList","wordListWithSynonyms","word","synonyms","cleanedDescription","classesByDepartment","aWords","bWords","aMatches","SearchClasses","hasSelectedElectiveGenerator","numberOfNotifications","setNumberOfNotifications","Foundation","CombinedClassPages","CreateImage","discoverPostInputs","setDiscoverPostInputs","TagInput","showTitle","onPressCamera","newText","imagePicker","CreateEvent","setDate","formatDateService","NativeDateService","dateService","nextDate","placement","AntDesign","contentUrl","host","postsAdapter","createEntityAdapter","selectId","post","tranformComments","comments","comment","numLikes","likes","hasLiked","discoverApiSlice","getDiscoverPosts","keepUnusedDataFor","pageLength","_","addMany","hasMorePages","ids","postsSelectors","selectAll","createDiscoverPost","emoji","postBody","pinned","newPost","addOne","deleteDiscoverPost","searchPatchResult","removeOne","getPostById","updatedPost","updateFunction","updateOne","changes","likePost","postAuthor","selectById","addComment","initiate","likeComment","commentId","deleteComment","getSelectors","useLazyGetDiscoverPostsQuery","useCreateDiscoverPostMutation","useDeleteDiscoverPostMutation","useLikePostMutation","useAddCommentMutation","useLazyGetPostByIdQuery","useLikeCommentMutation","useDeleteCommentMutation","OptionalText","CreatePost","selectedTagIndex","setSelectedTagIndex","selectedPostTypeIndex","setSelectedPostTypeIndex","setError","isEmojiShown","setIsEmojiShown","tagArray","submitEvent","submitImage","contentText","toast","hide","groupedData","DebounceTouchable","WrappedComponent","PreventDoubleClick","debouncedOnPress","debounce","leading","trailing","PureComponent","displayName","withPreventDoubleClick","BottomBar","commentIconShown","searchedTag","selectFromResult","onPressLike","DoubleTap","lastTap","handleDoubleTap","now","delay","onDoubleTap","Component","defaultProps","forwardRef","iconStyle","useImperativeHandle","animate","opacityAnim","scaleAnim","heartRotation","setHeartRotation","floor","pickRandomDegree","parallel","timing","easing","Easing","bounce","rotate","ImageComponent","apiInfo","likeRef","handlePressLike","DoubleTapHeart","EventBody","link","contentURL","truncated","eventInfo","EventCard","pinnedIcon","isAdded","setIsAdded","toggleAdditionOfEvent","isAdd","customEvent","ImageCard","SponsorCard","imageLink","setImageLink","hasCoupon","TouchableHighlight","onError","becomeSponsor","ImageBackground","TextCard","isUrl","renderTextBody","PostsList","handleRemoveRecentSearch","handleClickRecentSearch","fetchPosts","isFetching","posts","fetchFirstPage","fetchMorePosts","PinIcon","MaterialIcons","commonProps","isSponsor","sponsorProps","FooterSpinner","keyboardShouldPersistTaps","ListFooterComponent","Divider","SearchPage","searchBarBackgroundColor","DisabledFieldModal","FullPageSpinner","Comment","isOwnComment","isExpanded","setIsExpanded","handleLikeComment","handleDeleteComment","SinglePostBody","handleLikePost","RegExp","test","href","SinglePost","setComment","inputFocused","setInputFocused","refreshPost","refreshPostLoading","addCommentLoading","deletePost","deletePostLoading","handleRefreshPost","handleDeletePost","handleSubmitComment","footer","Discover","setSearchTerm","initialParams","onPressIn","icons","Proxy","target","IconProvider","toReactElement","flatten","FeatherIcon","FontAwesomeIcon","persistor","persistStore","Tab","createBottomTabNavigator","ExpoSplashScreen","Notifications","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","registerForPushNotificationsAsync","token","isDevice","existingStatus","finalStatus","importance","MAX","vibrationPattern","lightColor","App","localCurrentSection","isReady","setIsReady","setNotification","notificationListener","responseListener","fetchedCurrentSection","fetchedUserData","checkForUpdates","prepare","currentFrontEndVersion","v1","v2","lexicographical","zeroExtend","v1parts","v2parts","isValidPart","every","NaN","versionCompare","NavigationContainer","documentTitle","formatter","DarkTheme","DefaultTheme","Theme","StatusBar","FontAwesomeIconsPack","FeatherIconsPack","overflow","TabsPage","tabBarHideOnKeyboard","tabBarIcon","focused","iconName","tabBarStyle","lazy","ClassPages","tabBarLabel","unmountOnBlur","registerRootComponent"],"mappings":"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ACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,SACA,qBACA,qBACA,qBACA,qBACA,qBACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,eACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,eACA,eACA,eACA,qEACA,qEACA,qEACA,eACA,mDACA,mDACA,mDACA,eACA,mDACA,mDACA,qEACA,qEACA,qEACA,mDACA,mDACA,qEACA,qEACA,qEACA,mDACA,mDACA,qEACA,qEACA,qEACA,eACA,eACA,eACA,eACA,eACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,SACA,qBACA,qBACA,qBACA,qBACA,qBACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,SACA,qBACA,qBACA,qBACA,qBACA,qBACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,SACA,qBACA,qBACA,qBACA,qBACA,qBACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,SACA,qBACA,qBACA,qBACA,qBACA,qBACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,SACA,qBACA,qBACA,qBACA,qBACA,qBACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,eACA,eACA,iCACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,SACA,eACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,eACA,eACA,eACA,SACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,SACA,eACA,eACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,SACA,SACA,eACA,SACA,eACA,eACA,eACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,SACA,eACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,SACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,OACA,OACA,SACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,4BCvxDK,SAASC,GAAYC,GAC1B,MAAUC,2EAAoBD,EAAO,OAsEhC,IAAME,GAAgB,SAACC,GAC5B,IAAKA,EACH,MAAO,GAGT,IADA,IAAIC,EAAM,EACDC,EAAI,EAAGA,EAAIF,EAAIG,SAAUD,EAChCD,GAAOD,EAAII,WAAWF,IAAMA,EAG9B,OADcP,GAAWM,EAAMN,GAAWQ,SAiBrC,SAASE,GAAUC,GAA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","file":"static/js/app.f4386b43.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/app-logo-transparent.1ede614a.png\";","module.exports = __webpack_public_path__ + \"static/media/coupon.84c88381.png\";","module.exports = __webpack_public_path__ + \"static/media/become-sponsor.513cb6e7.png\";","module.exports = __webpack_public_path__ + \"static/media/splash-logo.2b1029f0.png\";","var map = {\n\t\"./af\": 412,\n\t\"./af.js\": 412,\n\t\"./ar\": 413,\n\t\"./ar-dz\": 414,\n\t\"./ar-dz.js\": 414,\n\t\"./ar-kw\": 415,\n\t\"./ar-kw.js\": 415,\n\t\"./ar-ly\": 416,\n\t\"./ar-ly.js\": 416,\n\t\"./ar-ma\": 417,\n\t\"./ar-ma.js\": 417,\n\t\"./ar-sa\": 418,\n\t\"./ar-sa.js\": 418,\n\t\"./ar-tn\": 419,\n\t\"./ar-tn.js\": 419,\n\t\"./ar.js\": 413,\n\t\"./az\": 420,\n\t\"./az.js\": 420,\n\t\"./be\": 421,\n\t\"./be.js\": 421,\n\t\"./bg\": 422,\n\t\"./bg.js\": 422,\n\t\"./bm\": 423,\n\t\"./bm.js\": 423,\n\t\"./bn\": 424,\n\t\"./bn-bd\": 425,\n\t\"./bn-bd.js\": 425,\n\t\"./bn.js\": 424,\n\t\"./bo\": 426,\n\t\"./bo.js\": 426,\n\t\"./br\": 427,\n\t\"./br.js\": 427,\n\t\"./bs\": 428,\n\t\"./bs.js\": 428,\n\t\"./ca\": 429,\n\t\"./ca.js\": 429,\n\t\"./cs\": 430,\n\t\"./cs.js\": 430,\n\t\"./cv\": 431,\n\t\"./cv.js\": 431,\n\t\"./cy\": 432,\n\t\"./cy.js\": 432,\n\t\"./da\": 433,\n\t\"./da.js\": 433,\n\t\"./de\": 434,\n\t\"./de-at\": 435,\n\t\"./de-at.js\": 435,\n\t\"./de-ch\": 436,\n\t\"./de-ch.js\": 436,\n\t\"./de.js\": 434,\n\t\"./dv\": 437,\n\t\"./dv.js\": 437,\n\t\"./el\": 438,\n\t\"./el.js\": 438,\n\t\"./en-au\": 439,\n\t\"./en-au.js\": 439,\n\t\"./en-ca\": 440,\n\t\"./en-ca.js\": 440,\n\t\"./en-gb\": 441,\n\t\"./en-gb.js\": 441,\n\t\"./en-ie\": 442,\n\t\"./en-ie.js\": 442,\n\t\"./en-il\": 443,\n\t\"./en-il.js\": 443,\n\t\"./en-in\": 444,\n\t\"./en-in.js\": 444,\n\t\"./en-nz\": 445,\n\t\"./en-nz.js\": 445,\n\t\"./en-sg\": 446,\n\t\"./en-sg.js\": 446,\n\t\"./eo\": 447,\n\t\"./eo.js\": 447,\n\t\"./es\": 448,\n\t\"./es-do\": 449,\n\t\"./es-do.js\": 449,\n\t\"./es-mx\": 450,\n\t\"./es-mx.js\": 450,\n\t\"./es-us\": 451,\n\t\"./es-us.js\": 451,\n\t\"./es.js\": 448,\n\t\"./et\": 452,\n\t\"./et.js\": 452,\n\t\"./eu\": 453,\n\t\"./eu.js\": 453,\n\t\"./fa\": 454,\n\t\"./fa.js\": 454,\n\t\"./fi\": 455,\n\t\"./fi.js\": 455,\n\t\"./fil\": 456,\n\t\"./fil.js\": 456,\n\t\"./fo\": 457,\n\t\"./fo.js\": 457,\n\t\"./fr\": 458,\n\t\"./fr-ca\": 459,\n\t\"./fr-ca.js\": 459,\n\t\"./fr-ch\": 460,\n\t\"./fr-ch.js\": 460,\n\t\"./fr.js\": 458,\n\t\"./fy\": 461,\n\t\"./fy.js\": 461,\n\t\"./ga\": 462,\n\t\"./ga.js\": 462,\n\t\"./gd\": 463,\n\t\"./gd.js\": 463,\n\t\"./gl\": 464,\n\t\"./gl.js\": 464,\n\t\"./gom-deva\": 465,\n\t\"./gom-deva.js\": 465,\n\t\"./gom-latn\": 466,\n\t\"./gom-latn.js\": 466,\n\t\"./gu\": 467,\n\t\"./gu.js\": 467,\n\t\"./he\": 468,\n\t\"./he.js\": 468,\n\t\"./hi\": 469,\n\t\"./hi.js\": 469,\n\t\"./hr\": 470,\n\t\"./hr.js\": 470,\n\t\"./hu\": 471,\n\t\"./hu.js\": 471,\n\t\"./hy-am\": 472,\n\t\"./hy-am.js\": 472,\n\t\"./id\": 473,\n\t\"./id.js\": 473,\n\t\"./is\": 474,\n\t\"./is.js\": 474,\n\t\"./it\": 475,\n\t\"./it-ch\": 476,\n\t\"./it-ch.js\": 476,\n\t\"./it.js\": 475,\n\t\"./ja\": 477,\n\t\"./ja.js\": 477,\n\t\"./jv\": 478,\n\t\"./jv.js\": 478,\n\t\"./ka\": 479,\n\t\"./ka.js\": 479,\n\t\"./kk\": 480,\n\t\"./kk.js\": 480,\n\t\"./km\": 481,\n\t\"./km.js\": 481,\n\t\"./kn\": 482,\n\t\"./kn.js\": 482,\n\t\"./ko\": 483,\n\t\"./ko.js\": 483,\n\t\"./ku\": 484,\n\t\"./ku.js\": 484,\n\t\"./ky\": 485,\n\t\"./ky.js\": 485,\n\t\"./lb\": 486,\n\t\"./lb.js\": 486,\n\t\"./lo\": 487,\n\t\"./lo.js\": 487,\n\t\"./lt\": 488,\n\t\"./lt.js\": 488,\n\t\"./lv\": 489,\n\t\"./lv.js\": 489,\n\t\"./me\": 490,\n\t\"./me.js\": 490,\n\t\"./mi\": 491,\n\t\"./mi.js\": 491,\n\t\"./mk\": 492,\n\t\"./mk.js\": 492,\n\t\"./ml\": 493,\n\t\"./ml.js\": 493,\n\t\"./mn\": 494,\n\t\"./mn.js\": 494,\n\t\"./mr\": 495,\n\t\"./mr.js\": 495,\n\t\"./ms\": 496,\n\t\"./ms-my\": 497,\n\t\"./ms-my.js\": 497,\n\t\"./ms.js\": 496,\n\t\"./mt\": 498,\n\t\"./mt.js\": 498,\n\t\"./my\": 499,\n\t\"./my.js\": 499,\n\t\"./nb\": 500,\n\t\"./nb.js\": 500,\n\t\"./ne\": 501,\n\t\"./ne.js\": 501,\n\t\"./nl\": 502,\n\t\"./nl-be\": 503,\n\t\"./nl-be.js\": 503,\n\t\"./nl.js\": 502,\n\t\"./nn\": 504,\n\t\"./nn.js\": 504,\n\t\"./oc-lnc\": 505,\n\t\"./oc-lnc.js\": 505,\n\t\"./pa-in\": 506,\n\t\"./pa-in.js\": 506,\n\t\"./pl\": 507,\n\t\"./pl.js\": 507,\n\t\"./pt\": 508,\n\t\"./pt-br\": 509,\n\t\"./pt-br.js\": 509,\n\t\"./pt.js\": 508,\n\t\"./ro\": 510,\n\t\"./ro.js\": 510,\n\t\"./ru\": 511,\n\t\"./ru.js\": 511,\n\t\"./sd\": 512,\n\t\"./sd.js\": 512,\n\t\"./se\": 513,\n\t\"./se.js\": 513,\n\t\"./si\": 514,\n\t\"./si.js\": 514,\n\t\"./sk\": 515,\n\t\"./sk.js\": 515,\n\t\"./sl\": 516,\n\t\"./sl.js\": 516,\n\t\"./sq\": 517,\n\t\"./sq.js\": 517,\n\t\"./sr\": 518,\n\t\"./sr-cyrl\": 519,\n\t\"./sr-cyrl.js\": 519,\n\t\"./sr.js\": 518,\n\t\"./ss\": 520,\n\t\"./ss.js\": 520,\n\t\"./sv\": 521,\n\t\"./sv.js\": 521,\n\t\"./sw\": 522,\n\t\"./sw.js\": 522,\n\t\"./ta\": 523,\n\t\"./ta.js\": 523,\n\t\"./te\": 524,\n\t\"./te.js\": 524,\n\t\"./tet\": 525,\n\t\"./tet.js\": 525,\n\t\"./tg\": 526,\n\t\"./tg.js\": 526,\n\t\"./th\": 527,\n\t\"./th.js\": 527,\n\t\"./tk\": 528,\n\t\"./tk.js\": 528,\n\t\"./tl-ph\": 529,\n\t\"./tl-ph.js\": 529,\n\t\"./tlh\": 530,\n\t\"./tlh.js\": 530,\n\t\"./tr\": 531,\n\t\"./tr.js\": 531,\n\t\"./tzl\": 532,\n\t\"./tzl.js\": 532,\n\t\"./tzm\": 533,\n\t\"./tzm-latn\": 534,\n\t\"./tzm-latn.js\": 534,\n\t\"./tzm.js\": 533,\n\t\"./ug-cn\": 535,\n\t\"./ug-cn.js\": 535,\n\t\"./uk\": 536,\n\t\"./uk.js\": 536,\n\t\"./ur\": 537,\n\t\"./ur.js\": 537,\n\t\"./uz\": 538,\n\t\"./uz-latn\": 539,\n\t\"./uz-latn.js\": 539,\n\t\"./uz.js\": 538,\n\t\"./vi\": 540,\n\t\"./vi.js\": 540,\n\t\"./x-pseudo\": 541,\n\t\"./x-pseudo.js\": 541,\n\t\"./yo\": 542,\n\t\"./yo.js\": 542,\n\t\"./zh-cn\": 543,\n\t\"./zh-cn.js\": 543,\n\t\"./zh-hk\": 544,\n\t\"./zh-hk.js\": 544,\n\t\"./zh-mo\": 545,\n\t\"./zh-mo.js\": 545,\n\t\"./zh-tw\": 546,\n\t\"./zh-tw.js\": 546\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 869;","module.exports = __webpack_public_path__ + \"static/media/owl-black-text.6f7231df.png\";","module.exports = __webpack_public_path__ + \"static/media/owl-white-text.9861cc3f.png\";","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { Appearance } from 'react-native';\r\n\r\nimport type { RootState } from './store';\r\n\r\n// Define a type for the slice state\r\ninterface AppDataState {\r\n  userKey: string;\r\n  isGuest: boolean;\r\n  isMobile: boolean;\r\n  darkMode: boolean;\r\n  useDeviceColorScheme: boolean;\r\n  isCacheReset: boolean; // Remove after 1/1/2024\r\n}\r\n\r\n// Define the initial state using that type\r\nconst initialState: AppDataState = {\r\n  userKey: '',\r\n  isGuest: false,\r\n  isMobile: false,\r\n  darkMode: false,\r\n  useDeviceColorScheme: false,\r\n  isCacheReset: false\r\n};\r\n\r\nexport const appDataSlice = createSlice({\r\n  name: 'appData',\r\n  initialState,\r\n  reducers: {\r\n    reset: () => initialState,\r\n    cacheReset: (state) => {\r\n      state.isCacheReset = true;\r\n    },\r\n    userKeyUpdated: (state, action: PayloadAction<string>) => {\r\n      state.userKey = action.payload;\r\n    },\r\n    setIsGuest: (state, action: PayloadAction<boolean>) => {\r\n      state.isGuest = action.payload;\r\n    },\r\n    deviceDarkModeSet: (state, action: PayloadAction<boolean>) => {\r\n      state.darkMode = action.payload;\r\n    },\r\n    useDeviceColorSchemeSet: (state, action: PayloadAction<boolean>) => {\r\n      state.useDeviceColorScheme = action.payload;\r\n    },\r\n    deleteAllAppData: (state) => {\r\n      state.userKey = '';\r\n      state.isGuest = false;\r\n      state.darkMode = true;\r\n    },\r\n    mobileSiteSet: (state, action: PayloadAction<boolean>) => {\r\n      state.isMobile = action.payload;\r\n    }\r\n  },\r\n  extraReducers: () => {}\r\n});\r\n\r\n// Selectors\r\nexport const selectDarkMode = (state: RootState) => state.appData.secure.darkMode;\r\n\r\nexport const selectUserKey = (state: RootState) => state.appData.secure.userKey;\r\n\r\nexport const selectIsGuest = (state: RootState) => state.appData.secure.isGuest;\r\n\r\nexport const selectMobile = (state: RootState) => state.appData.secure.isMobile;\r\n\r\n// Actions\r\nexport const {\r\n  userKeyUpdated,\r\n  setIsGuest,\r\n  deleteAllAppData,\r\n  reset,\r\n  deviceDarkModeSet,\r\n  useDeviceColorSchemeSet,\r\n  mobileSiteSet,\r\n  cacheReset\r\n} = appDataSlice.actions;\r\n\r\nexport default appDataSlice.reducer;\r\n","import * as SecureStore from 'expo-secure-store';\r\n\r\nexport default function createSecureStorage(options: any = {}) {\r\n  const replaceCharacter = options.replaceCharacter || '_';\r\n  const replacer = options.replacer || defaultReplacer;\r\n\r\n  return {\r\n    getItem: (key: string) => SecureStore.getItemAsync(replacer(key, replaceCharacter), options),\r\n    setItem: (key: string, value: string) => SecureStore.setItemAsync(replacer(key, replaceCharacter), value, options),\r\n    removeItem: (key: string) => SecureStore.deleteItemAsync(replacer(key, replaceCharacter), options)\r\n  };\r\n}\r\n\r\nfunction defaultReplacer(key: string, replaceCharacter: string) {\r\n  return key.replace(/[^a-z0-9.\\-_]/gi, replaceCharacter);\r\n}\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport type { PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface CalendarState {\r\n  isThreeDay: boolean;\r\n}\r\n\r\nconst initialState: CalendarState = {\r\n  isThreeDay: false\r\n};\r\n\r\nexport const calendarSlice = createSlice({\r\n  name: 'discover',\r\n  initialState,\r\n  reducers: {\r\n    reset: (state) => (state = initialState),\r\n    isThreeDaySet: (state, action: PayloadAction<boolean>) => {\r\n      state.isThreeDay = action.payload;\r\n    }\r\n  }\r\n});\r\n\r\nexport const { reset, isThreeDaySet } = calendarSlice.actions;\r\n\r\nexport default calendarSlice.reducer;\r\n","export const DISCOVER_LIST_PAGE_SIZE = 5;\r\n\r\nexport const tagIndices = [\r\n  'Clubs',\r\n  'Events',\r\n  'College News',\r\n  'Courses',\r\n  'HMC',\r\n  'Pomona',\r\n  'CMC',\r\n  'Pitzer',\r\n  'Scripps'\r\n];\r\n\r\nexport const adminTagIndices = [\r\n  'Athena Network',\r\n  'Clubs',\r\n  'Events',\r\n  'College News',\r\n  'Courses',\r\n  'HMC',\r\n  'Pomona',\r\n  'CMC',\r\n  'Pitzer',\r\n  'Scripps'\r\n];\r\n\r\nexport const MAX_WIDTH_WEB = 700;\r\n\r\nexport const postOptions = ['Image Post', 'Text Post', 'Link', 'Event'];\r\n\r\nexport const IMAGE_BUCKET_URL = 'https://athena-image-storage.s3.us-west-2.amazonaws.com/imagePostImages';\r\n\r\nexport const EMOJI_LIST = [\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '#',\r\n  '*',\r\n  '0',\r\n  '1',\r\n  '2',\r\n  '3',\r\n  '4',\r\n  '5',\r\n  '6',\r\n  '7',\r\n  '8',\r\n  '9',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  '',\r\n  ''\r\n];\r\n","import Toast from 'react-native-root-toast';\r\n\r\nimport { ClassTime } from './app/types';\r\nimport { EMOJI_LIST, IMAGE_BUCKET_URL } from './constants/discover';\r\n\r\nexport function getRndInteger(min: number, max: number) {\r\n  return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nexport function getImageUrl(imageId: string) {\r\n  return `${IMAGE_BUCKET_URL}/${imageId}.jpg`;\r\n}\r\n\r\nexport function nFormatter(num: number, digits: number) {\r\n  const lookup = [\r\n    { value: 1, symbol: '' },\r\n    { value: 1e3, symbol: 'k' },\r\n    { value: 1e6, symbol: 'M' },\r\n    { value: 1e9, symbol: 'G' },\r\n    { value: 1e12, symbol: 'T' },\r\n    { value: 1e15, symbol: 'P' },\r\n    { value: 1e18, symbol: 'E' }\r\n  ];\r\n  const rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\r\n  const item = lookup\r\n    .slice()\r\n    .reverse()\r\n    .find((item) => {\r\n      return num >= item.value;\r\n    });\r\n  return item\r\n    ? (num / item.value).toFixed(digits).replace(rx, '$1') + item.symbol\r\n    : '0';\r\n}\r\n\r\nexport function versionCompare(v1: string, v2: string, options?: any) {\r\n  const lexicographical = options && options.lexicographical;\r\n  const zeroExtend = options && options.zeroExtend;\r\n  let v1parts = v1.split('.') as any[];\r\n  let v2parts = v2.split('.') as any[];\r\n\r\n  function isValidPart(x) {\r\n    return (lexicographical ? /^\\d+[A-Za-z]*$/ : /^\\d+$/).test(x);\r\n  }\r\n\r\n  if (!v1parts.every(isValidPart) || !v2parts.every(isValidPart)) {\r\n    return NaN;\r\n  }\r\n\r\n  if (zeroExtend) {\r\n    while (v1parts.length < v2parts.length) v1parts.push('0');\r\n    while (v2parts.length < v1parts.length) v2parts.push('0');\r\n  }\r\n\r\n  if (!lexicographical) {\r\n    v1parts = v1parts.map(Number);\r\n    v2parts = v2parts.map(Number);\r\n  }\r\n\r\n  for (let i = 0; i < v1parts.length; ++i) {\r\n    if (v2parts.length === i) {\r\n      return 1;\r\n    }\r\n\r\n    if (v1parts[i] === v2parts[i]) {\r\n      continue;\r\n    } else if (v1parts[i] > v2parts[i]) {\r\n      return 1;\r\n    } else {\r\n      return -1;\r\n    }\r\n  }\r\n\r\n  if (v1parts.length !== v2parts.length) {\r\n    return -1;\r\n  }\r\n\r\n  return 0;\r\n}\r\n\r\nexport const stringToEmoji = (str: string) => {\r\n  if (!str) {\r\n    return '';\r\n  }\r\n  let dec = 0;\r\n  for (let i = 0; i < str.length; ++i) {\r\n    dec += str.charCodeAt(i) << i;\r\n  }\r\n  const emoji = EMOJI_LIST[dec % EMOJI_LIST.length];\r\n  return emoji;\r\n};\r\n\r\nexport function validURL(str: string) {\r\n  const pattern = new RegExp(\r\n    '^(https?:\\\\/\\\\/)?' + // protocol\r\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\r\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\r\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\r\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\r\n      '(\\\\#[-a-z\\\\d_]*)?$',\r\n    'i'\r\n  ); // fragment locator\r\n  return !!pattern.test(str);\r\n}\r\n\r\nexport function showToast(message: string, backgroundColor = '#000') {\r\n  Toast.show(message, {\r\n    duration: Toast.durations.LONG,\r\n    opacity: 1,\r\n    position: -100,\r\n    backgroundColor,\r\n    shadow: false\r\n  });\r\n}\r\n\r\n// Format range with 12 hour time\r\nexport const FormatTimeRange = (start: string, end: string) => {\r\n  const startDate = new Date(start);\r\n  const endDate = new Date(end);\r\n\r\n  const startHours = startDate.getHours() % 12 || 12;\r\n  const startMinutes = startDate.getMinutes();\r\n  const startAmPm = startDate.getHours() >= 12 ? 'pm' : 'am';\r\n  const endHours = endDate.getHours() % 12 || 12;\r\n  const endMinutes = endDate.getMinutes();\r\n  const endAmPm = endDate.getHours() >= 12 ? 'pm' : 'am';\r\n  return `${startHours}:${startMinutes}${startAmPm} - ${endHours}:${endMinutes}${endAmPm}`;\r\n};\r\n\r\nconst weekDayNumberToName = {\r\n  0: 'Sunday',\r\n  1: 'Monday',\r\n  2: 'Tuesday',\r\n  3: 'Wednesday',\r\n  4: 'Thursday',\r\n  5: 'Friday',\r\n  6: 'Saturday'\r\n};\r\n\r\nexport const FormatDate = (date: string) => {\r\n  const newDate = new Date(date);\r\n\r\n  const weekDay = newDate.getDay();\r\n  const month = newDate.getMonth() + 1;\r\n  const day = newDate.getDate();\r\n  return `${weekDayNumberToName[weekDay]}, ${month}/${day}`;\r\n};\r\n\r\nexport const exportToICal = (events: ClassTime[]): string => {\r\n  const formatDate = (date: Date) => {\r\n    return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';\r\n  };\r\n\r\n  const dayMapping: { [key: string]: string } = {\r\n    Sunday: 'SU',\r\n    Monday: 'MO',\r\n    Tuesday: 'TU',\r\n    Wednesday: 'WE',\r\n    Thursday: 'TH',\r\n    Friday: 'FR',\r\n    Saturday: 'SA'\r\n  };\r\n\r\n  let icsEvents = [];\r\n\r\n  for (const event of events) {\r\n    for (const schedule of event.courseSchedule) {\r\n      const days = schedule.daysOfTheWeek\r\n        .map((day) => dayMapping[day])\r\n        .join(',');\r\n\r\n      const summary = `${event.courseName} (${event.courseCode})`;\r\n      const description = `Professor: ${event.professorName}\\nSeats Filled: ${event.seatsFilled}\\nCourse Status: ${event.courseStatus}`;\r\n      const location = schedule.classLocation;\r\n\r\n      const startDateTime = `T${schedule.startTime.replace(':', '')}00Z`;\r\n      const endDateTime = `T${schedule.endTime.replace(':', '')}00Z`;\r\n\r\n      const vevent = `\r\nBEGIN:VEVENT\r\nUID:${event._id}-${schedule._id}\r\nDTSTAMP:${formatDate(new Date())}\r\nDTSTART:${startDateTime}\r\nDTEND:${endDateTime}\r\nRRULE:FREQ=WEEKLY;BYDAY=${days}\r\nSUMMARY:${summary}\r\nLOCATION:${location}\r\nDESCRIPTION:${description}\r\nEND:VEVENT\r\n`;\r\n\r\n      icsEvents.push(vevent);\r\n    }\r\n  }\r\n\r\n  return `\r\nBEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:-//AthenaNetwork//Event Calendar//EN\r\n${icsEvents.join('\\n')}\r\nEND:VCALENDAR\r\n`;\r\n};\r\n\r\nexport const getMasterCourseCodeFromCourseCode = (courseCode: string) => {\r\n  const courseCodeParts = courseCode.split('-');\r\n  return courseCodeParts.slice(0, courseCodeParts.length - 1).join('-');\r\n};\r\n\r\nexport const getTimeAsNumberOfMinutes = (time: string) => {\r\n  var timeParts = time.split(':');\r\n\r\n  var timeInMinutes = parseInt(timeParts[0]) * 60 + parseInt(timeParts[1]);\r\n\r\n  return timeInMinutes;\r\n};\r\n","import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\n\r\nexport const apiSlice = createApi({\r\n  reducerPath: 'api',\r\n  baseQuery: fetchBaseQuery({\r\n    baseUrl: 'https://api.athenaserver.com:5678/api'\r\n  }),\r\n  tagTypes: ['User', 'Posts'],\r\n  endpoints: (builder) => ({\r\n    getCurrentVersion: builder.query<any, void>({\r\n      query: () => '/randomShit/getCurrentVersion'\r\n    })\r\n  })\r\n});\r\n\r\nexport const { useLazyGetCurrentVersionQuery } = apiSlice;\r\n","import {\r\n  AddedClasses,\r\n  UserData,\r\n  UserDataApiRes\r\n} from '../../app/types';\r\nimport { apiSlice } from './apiSlice';\r\n\r\nexport const usersApiSlice = apiSlice.injectEndpoints({\r\n  overrideExisting: true,\r\n  endpoints: (builder) => ({\r\n    getUserInfo: builder.query({\r\n      providesTags: ['User'],\r\n      query: (userKey: string) => ({\r\n        url: '/users/me',\r\n        headers: {\r\n          userKey\r\n        }\r\n      }),\r\n      transformErrorResponse: (response) => {\r\n        if (response.status === 401) {\r\n          return { error: 'Unauthorized' };\r\n        }\r\n        return response;\r\n      },\r\n      transformResponse: ({\r\n        classes,\r\n        starredClasses,\r\n        ...rest\r\n      }: UserDataApiRes) => {\r\n        const addedClasses = {\r\n          length: 0,\r\n          classes: {},\r\n          orderedClasses: {},\r\n          starredClasses: {}\r\n        } as AddedClasses;\r\n\r\n        // Add classes to orderedClasses\r\n        classes.forEach(({ courseCode, courseTerm }) => {\r\n          if (courseTerm in addedClasses.orderedClasses) {\r\n            addedClasses.orderedClasses[courseTerm].push(courseCode);\r\n          } else {\r\n            addedClasses.orderedClasses[courseTerm] = [courseCode];\r\n          }\r\n        });\r\n        // Add classes to unordered classes\r\n        for (const { courseCode, courseTerm } of classes) {\r\n          try {\r\n            let schoolParts = courseCode.split('-');\r\n            schoolParts = schoolParts[schoolParts.length - 2].split(' ');\r\n            const school = schoolParts[schoolParts.length - 1];\r\n            const masterCourseCode = `${courseCode\r\n              .split(' ')\r\n              .slice(0, 2)\r\n              .join(' ')} ${school}`;\r\n            if (courseTerm in addedClasses.classes) {\r\n              if (masterCourseCode in addedClasses.classes[courseTerm]) {\r\n                addedClasses.classes[courseTerm][masterCourseCode].push(\r\n                  courseCode\r\n                );\r\n              } else {\r\n                addedClasses.classes[courseTerm][masterCourseCode] = [\r\n                  courseCode\r\n                ];\r\n              }\r\n            } else {\r\n              addedClasses.classes[courseTerm] = {\r\n                [masterCourseCode]: [courseCode]\r\n              };\r\n            }\r\n\r\n            addedClasses.length++;\r\n          } catch (e) {\r\n            console.warn('Error Adding Classes To State', e);\r\n          }\r\n        }\r\n        // Add classes to starred classes\r\n        for (const { courseCode, courseTerm } of starredClasses) {\r\n          try {\r\n            let schoolParts = courseCode.split('-');\r\n            schoolParts = schoolParts[schoolParts.length - 2].split(' ');\r\n            const school = schoolParts[schoolParts.length - 1];\r\n            const masterCourseCode = `${courseCode\r\n              .split(' ')\r\n              .slice(0, 2)\r\n              .join(' ')} ${school}`;\r\n            if (courseTerm in addedClasses.starredClasses) {\r\n              if (masterCourseCode in addedClasses.starredClasses[courseTerm]) {\r\n                addedClasses.starredClasses[courseTerm][masterCourseCode].push(\r\n                  courseCode\r\n                );\r\n              } else {\r\n                addedClasses.starredClasses[courseTerm][masterCourseCode] = [\r\n                  courseCode\r\n                ];\r\n              }\r\n            } else {\r\n              addedClasses.starredClasses[courseTerm] = {\r\n                [masterCourseCode]: [courseCode]\r\n              };\r\n            }\r\n          } catch (e) {\r\n            console.log('Error Adding Starred Classes To State', e);\r\n          }\r\n        }\r\n\r\n        return { addedClasses, starredClasses, ...rest } as UserData;\r\n      }\r\n    }),\r\n    login: builder.mutation({\r\n      query: ({ userName, password, isGuest }) => ({\r\n        url: `/users/login`,\r\n        params: isGuest\r\n          ? {\r\n              userName,\r\n              password,\r\n              isGuest\r\n            }\r\n          : {\r\n              userName,\r\n              password\r\n            }\r\n      })\r\n    }),\r\n    trackLogin: builder.mutation({\r\n      query: (userKey) => ({\r\n        url: `/analytics/login/openedApp`,\r\n        method: 'POST',\r\n        headers: {\r\n          userKey\r\n        },\r\n        responseHandler: (response) => response.text()\r\n      })\r\n    }),\r\n    deleteAccount: builder.mutation({\r\n      query: ({ userKey, userName }) => ({\r\n        url: '/users',\r\n        method: 'DELETE',\r\n        headers: {\r\n          userKey\r\n        },\r\n        params: {\r\n          userName\r\n        }\r\n      })\r\n    }),\r\n    editUser: builder.mutation({\r\n      invalidatesTags: ['User'],\r\n      query: ({ userKey, userName, fields }) => ({\r\n        url: `/users/${userName}`,\r\n        method: 'PATCH',\r\n        headers: {\r\n          'content-type': 'application/json',\r\n          userKey\r\n        },\r\n        body: fields\r\n      })\r\n    }),\r\n    getCollegeList: builder.query<any, void>({\r\n      query: () => '/randomShit/getCollegeList'\r\n    }),\r\n    getChatRooms: builder.mutation({\r\n      query: ({ userKey }) => ({\r\n        url: `/chatRooms/listOfChatRooms`,\r\n        method: 'GET',\r\n        headers: {\r\n          'content-type': 'application/json',\r\n          userKey\r\n        },\r\n        responseHandler: (response) => response.json()\r\n      })\r\n    }),\r\n    createChatRoom: builder.mutation({\r\n      query: ({ userKey, recipients, nameOfChatRoom }) => ({\r\n        url: `/chatRooms/newChatRoom`,\r\n        method: 'POST',\r\n        headers: {\r\n          'content-type': 'application/json',\r\n          userKey\r\n        },\r\n        body: JSON.stringify({\r\n          userList: recipients,\r\n          name: nameOfChatRoom\r\n        }),\r\n        responseHandler: (response) => response.text()\r\n      })\r\n    }),\r\n    addOrRemoveUserFromChatRoom: builder.mutation({\r\n      query: ({ userKey, chatRoomId, userName }) => ({\r\n        url: `/chatRooms/addOrRemoveUser`,\r\n        method: 'POST',\r\n        headers: {\r\n          'content-type': 'application/json',\r\n          userKey\r\n        },\r\n        body: JSON.stringify({\r\n          chatRoomId: chatRoomId,\r\n          userName: userName\r\n        })\r\n      })\r\n    }),\r\n    signupUser: builder.mutation({\r\n      query: (body) => ({\r\n        url: '/users',\r\n        method: 'POST',\r\n        body,\r\n        responseHandler: (response) => response.text()\r\n      })\r\n    }),\r\n    verifySignup: builder.mutation({\r\n      query: (code) => ({\r\n        url: '/users/verification',\r\n        method: 'POST',\r\n        body: { code }\r\n      })\r\n    }),\r\n    resetPassword: builder.mutation({\r\n      query: (email) => ({\r\n        url: '/users/forgotPassword',\r\n        params: {\r\n          email\r\n        },\r\n        responseHandler: (response) => response.text()\r\n      })\r\n    }),\r\n    addExpoPushToken: builder.mutation({\r\n      query: ({ userName, expoPushToken, userKey }) => ({\r\n        url: `/users/addExpoPushKey/${userName}`,\r\n        method: 'PATCH',\r\n        headers: {\r\n          userKey\r\n        },\r\n        body: {\r\n          expoPushToken\r\n        }\r\n      })\r\n    })\r\n  })\r\n});\r\n\r\nexport const {\r\n  useAddOrRemoveUserFromChatRoomMutation,\r\n  useCreateChatRoomMutation,\r\n  useGetChatRoomsMutation,\r\n  useTrackLoginMutation,\r\n  useGetUserInfoQuery,\r\n  useLazyGetUserInfoQuery,\r\n  useLoginMutation,\r\n  useDeleteAccountMutation,\r\n  useEditUserMutation,\r\n  useGetCollegeListQuery,\r\n  useSignupUserMutation,\r\n  useVerifySignupMutation,\r\n  useResetPasswordMutation,\r\n  useAddExpoPushTokenMutation\r\n} = usersApiSlice;\r\n","import { apiSlice } from './apiSlice';\r\nimport { usersApiSlice } from './usersApi';\r\nimport {\r\n  AllSectionsResponse,\r\n  Class,\r\n  SwapCoursePriorityInput,\r\n  UserData\r\n} from '../../app/types';\r\n\r\nexport const classPagesApi = apiSlice.injectEndpoints({\r\n  overrideExisting: true,\r\n  endpoints: (builder) => ({\r\n    getAllClasses: builder.query({\r\n      query: ({ userKey, pageNumber, courseTerm, collegeName }) => ({\r\n        url: `/classes/masterClassList/${collegeName}`,\r\n        headers: {\r\n          userKey\r\n        },\r\n        params: {\r\n          pageNumber,\r\n          courseTerm\r\n        }\r\n      }),\r\n      transformResponse: (response: { [masterCourseCode: string]: Class }) => {\r\n        const getRatingFromReviews = (reviews) => {\r\n          if (reviews.length === 0) {\r\n            return null;\r\n          }\r\n          let totalAverage = 0;\r\n          let counter = 0;\r\n          for (const review of reviews) {\r\n            if (review.rating) {\r\n              totalAverage += review.rating;\r\n              counter++;\r\n            }\r\n          }\r\n          if (counter > 0) {\r\n            return (totalAverage / counter).toFixed(2);\r\n          }\r\n          return null;\r\n        };\r\n\r\n        const getDifficultyFromReviews = (reviews) => {\r\n          if (reviews.length === 0) {\r\n            return null;\r\n          }\r\n          let totalAverage = 0;\r\n          let counter = 0;\r\n          for (const review of reviews) {\r\n            if (review.difficulty) {\r\n              totalAverage += review.difficulty;\r\n              counter++;\r\n            }\r\n          }\r\n          if (counter > 0) {\r\n            return (totalAverage / counter).toFixed(2);\r\n          }\r\n          return null;\r\n        };\r\n\r\n        return Object.fromEntries(\r\n          Object.entries(response).map(([key, value]) => {\r\n            return [\r\n              key,\r\n              {\r\n                ...value,\r\n                reviews: value.reviews.sort(),\r\n                rating: getRatingFromReviews(value.reviews),\r\n                difficulty: getDifficultyFromReviews(value.reviews)\r\n              }\r\n            ];\r\n          })\r\n        );\r\n      }\r\n    }),\r\n    getCurrentSection: builder.query<string, void>({\r\n      query: () => '/randomShit/currentTerm',\r\n      transformResponse: (response: { currentTerm: string }) =>\r\n        response.currentTerm\r\n    }),\r\n    getAllSections: builder.query<AllSectionsResponse, void>({\r\n      query: () => '/randomShit/getAllTerms'\r\n    }),\r\n    addClass: builder.mutation({\r\n      query: ({ userKey, courseCode, courseTerm, userName }) => ({\r\n        url: `/users/${userName}`,\r\n        method: 'PATCH',\r\n        headers: {\r\n          userKey\r\n        },\r\n        body: {\r\n          classesToAdd: [{ courseCode, courseTerm }]\r\n        }\r\n      }),\r\n      async onQueryStarted(\r\n        { userKey, courseCode, masterCourseCode, courseTerm },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        const patchResult = dispatch(\r\n          usersApiSlice.util.updateQueryData(\r\n            'getUserInfo',\r\n            userKey,\r\n            (draft) => {\r\n              // Add to ordered Added Classes\r\n              if (!(courseTerm in draft.addedClasses.orderedClasses)) {\r\n                draft.addedClasses.orderedClasses[courseTerm] = [courseCode];\r\n              } else {\r\n                draft.addedClasses.orderedClasses[courseTerm].push(courseCode);\r\n              }\r\n\r\n              // Add to unordered Added Classes\r\n              if (!(courseTerm in draft.addedClasses.classes)) {\r\n                draft.addedClasses.classes[courseTerm] = {\r\n                  [masterCourseCode]: [courseCode]\r\n                };\r\n              } else if (\r\n                !(masterCourseCode in draft.addedClasses.classes[courseTerm])\r\n              ) {\r\n                draft.addedClasses.classes[courseTerm][masterCourseCode] = [\r\n                  courseCode\r\n                ];\r\n              } else {\r\n                draft.addedClasses.classes[courseTerm][masterCourseCode].push(\r\n                  courseCode\r\n                );\r\n              }\r\n              draft.addedClasses.length++;\r\n            }\r\n          )\r\n        );\r\n\r\n        try {\r\n          await queryFulfilled;\r\n        } catch {\r\n          patchResult.undo();\r\n        }\r\n      }\r\n    }),\r\n    addMultipleClasses: builder.mutation<\r\n      { userData: UserData },\r\n      {\r\n        userKey: string;\r\n        courseTerm: string;\r\n        userName: string;\r\n        courseCodePairs: {\r\n          courseCode: string;\r\n          masterCourseCode: string;\r\n        }[];\r\n      }\r\n    >({\r\n      query: ({ userKey, courseCodePairs, courseTerm, userName }) => ({\r\n        url: `/users/${userName}`,\r\n        method: 'PATCH',\r\n        headers: {\r\n          userKey\r\n        },\r\n        body: {\r\n          classesToAdd: courseCodePairs.map((courseCodePair) => ({\r\n            courseCode: courseCodePair.courseCode,\r\n            courseTerm\r\n          }))\r\n        }\r\n      }),\r\n      async onQueryStarted(\r\n        { userKey, courseCodePairs, courseTerm },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        const patchResult = dispatch(\r\n          usersApiSlice.util.updateQueryData(\r\n            'getUserInfo',\r\n            userKey,\r\n            (draft) => {\r\n              for (const { masterCourseCode, courseCode } of courseCodePairs) {\r\n                if (!(courseTerm in draft.addedClasses.classes)) {\r\n                  draft.addedClasses.classes[courseTerm] = {\r\n                    [masterCourseCode]: [courseCode]\r\n                  };\r\n                } else if (\r\n                  !(masterCourseCode in draft.addedClasses.classes[courseTerm])\r\n                ) {\r\n                  draft.addedClasses.classes[courseTerm][masterCourseCode] = [\r\n                    courseCode\r\n                  ];\r\n                } else {\r\n                  draft.addedClasses.classes[courseTerm][masterCourseCode].push(\r\n                    courseCode\r\n                  );\r\n                }\r\n                draft.addedClasses.length++;\r\n              }\r\n            }\r\n          )\r\n        );\r\n\r\n        try {\r\n          await queryFulfilled;\r\n        } catch {\r\n          patchResult.undo();\r\n        }\r\n      }\r\n    }),\r\n    removeClass: builder.mutation({\r\n      query: ({ userKey, courseCode, courseTerm, userName }) => ({\r\n        url: `/users/${userName}`,\r\n        method: 'PATCH',\r\n        headers: {\r\n          userKey\r\n        },\r\n        body: {\r\n          classesToRemove: [{ courseCode, courseTerm }]\r\n        }\r\n      }),\r\n      async onQueryStarted(\r\n        { userKey, courseCode, masterCourseCode, courseTerm },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        const patchResult = dispatch(\r\n          usersApiSlice.util.updateQueryData(\r\n            'getUserInfo',\r\n            userKey,\r\n            (draft) => {\r\n              // Delete from ordered Added Classes\r\n              draft.addedClasses.orderedClasses[courseTerm] =\r\n                draft.addedClasses.orderedClasses[courseTerm].filter(\r\n                  (classCode) => classCode !== courseCode\r\n                );\r\n\r\n              // Delete from unordered Added Classes\r\n\r\n              draft.addedClasses.classes[courseTerm][masterCourseCode] =\r\n                draft.addedClasses.classes[courseTerm][masterCourseCode].filter(\r\n                  (classCode) => classCode !== courseCode\r\n                );\r\n              // Delete the master course code if there are no more classes\r\n              if (\r\n                draft.addedClasses.classes[courseTerm][masterCourseCode]\r\n                  .length === 0\r\n              ) {\r\n                delete draft.addedClasses.classes[courseTerm][masterCourseCode];\r\n              }\r\n              draft.addedClasses.length--;\r\n            }\r\n          )\r\n        );\r\n\r\n        try {\r\n          await queryFulfilled;\r\n        } catch {\r\n          patchResult.undo();\r\n        }\r\n      }\r\n    }),\r\n\r\n    addStarredClass: builder.mutation({\r\n      query: ({ userKey, courseCode, courseTerm, userName }) => ({\r\n        url: `/users/${userName}`,\r\n        method: 'PATCH',\r\n        headers: {\r\n          userKey\r\n        },\r\n        body: {\r\n          starredClassesToAdd: [{ courseCode, courseTerm }]\r\n        }\r\n      }),\r\n      async onQueryStarted(\r\n        { userKey, courseCode, masterCourseCode, courseTerm },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        const patchResult = dispatch(\r\n          usersApiSlice.util.updateQueryData(\r\n            'getUserInfo',\r\n            userKey,\r\n            (draft) => {\r\n              if (\r\n                !draft.starredClasses.some(\r\n                  (course) =>\r\n                    course.courseTerm === courseTerm &&\r\n                    course.courseCode === courseCode\r\n                )\r\n              ) {\r\n                draft.starredClasses.push({\r\n                  courseCode: courseCode,\r\n                  courseTerm: courseTerm\r\n                });\r\n              }\r\n            }\r\n          )\r\n        );\r\n\r\n        try {\r\n          await queryFulfilled;\r\n        } catch {\r\n          patchResult.undo();\r\n        }\r\n      }\r\n    }),\r\n    removeStarredClass: builder.mutation({\r\n      query: ({ userKey, courseCode, courseTerm, userName }) => ({\r\n        url: `/users/${userName}`,\r\n        method: 'PATCH',\r\n        headers: {\r\n          userKey\r\n        },\r\n        body: {\r\n          starredClassesToRemove: [{ courseCode, courseTerm }]\r\n        }\r\n      }),\r\n      async onQueryStarted(\r\n        { userKey, courseCode, masterCourseCode, courseTerm },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        const patchResult = dispatch(\r\n          usersApiSlice.util.updateQueryData(\r\n            'getUserInfo',\r\n            userKey,\r\n            (draft) => {\r\n              draft.starredClasses = draft.starredClasses.filter(\r\n                (course) =>\r\n                  course.courseCode !== courseCode ||\r\n                  course.courseTerm !== courseTerm\r\n              );\r\n            }\r\n          )\r\n        );\r\n\r\n        try {\r\n          await queryFulfilled;\r\n        } catch {\r\n          patchResult.undo();\r\n        }\r\n      }\r\n    }),\r\n\r\n    isAllowedToReview: builder.query({\r\n      query: ({ masterCourseCode, userKey }) => ({\r\n        url: '/users/isAllowedToReview',\r\n        method: 'GET',\r\n        params: {\r\n          masterCourseCode\r\n        },\r\n        headers: {\r\n          userKey\r\n        }\r\n      })\r\n    }),\r\n    sendReview: builder.mutation({\r\n      query: ({ userKey, body }) => ({\r\n        url: '/classes/userReview',\r\n        method: 'PATCH',\r\n        headers: {\r\n          userKey\r\n        },\r\n        body,\r\n        responseHandler: (response) => response.text()\r\n      })\r\n    }),\r\n    swapCoursePriority: builder.mutation<any, SwapCoursePriorityInput>({\r\n      query: ({\r\n        userName,\r\n        firstPosition,\r\n        secondPosition,\r\n        termToUpdate,\r\n        userKey\r\n      }) => ({\r\n        url: '/users/' + userName,\r\n        method: 'PATCH',\r\n        headers: {\r\n          userKey\r\n        },\r\n        body: {\r\n          swapCoursePriority: {\r\n            firstPosition,\r\n            secondPosition,\r\n            termToUpdate\r\n          }\r\n        }\r\n      }),\r\n      async onQueryStarted(\r\n        { firstPosition, secondPosition, termToUpdate, userKey },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        const patchResult = dispatch(\r\n          usersApiSlice.util.updateQueryData(\r\n            'getUserInfo',\r\n            userKey,\r\n            (draft) => {\r\n              // move classes around in list\r\n              if (firstPosition > secondPosition) {\r\n                const temp =\r\n                  draft.addedClasses.orderedClasses[termToUpdate][\r\n                    firstPosition\r\n                  ];\r\n\r\n                for (let i = firstPosition; i > secondPosition; i--) {\r\n                  draft.addedClasses.orderedClasses[termToUpdate][i] =\r\n                    draft.addedClasses.orderedClasses[termToUpdate][i - 1];\r\n                }\r\n\r\n                draft.addedClasses.orderedClasses[termToUpdate][\r\n                  secondPosition\r\n                ] = temp;\r\n              } else {\r\n                const temp =\r\n                  draft.addedClasses.orderedClasses[termToUpdate][\r\n                    firstPosition\r\n                  ];\r\n\r\n                for (let i = firstPosition; i < secondPosition; i++) {\r\n                  draft.addedClasses.orderedClasses[termToUpdate][i] =\r\n                    draft.addedClasses.orderedClasses[termToUpdate][i + 1];\r\n                }\r\n\r\n                draft.addedClasses.orderedClasses[termToUpdate][\r\n                  secondPosition\r\n                ] = temp;\r\n              }\r\n            }\r\n          )\r\n        );\r\n\r\n        try {\r\n          await queryFulfilled;\r\n        } catch {\r\n          patchResult.undo();\r\n        }\r\n      }\r\n    })\r\n  })\r\n});\r\n\r\nexport const {\r\n  useGetAllClassesQuery,\r\n  useGetCurrentSectionQuery,\r\n  useAddClassMutation,\r\n  useAddMultipleClassesMutation,\r\n  useRemoveClassMutation,\r\n  useIsAllowedToReviewQuery,\r\n  useSendReviewMutation,\r\n  useLazyGetAllClassesQuery,\r\n  useLazyGetAllSectionsQuery,\r\n  useRemoveStarredClassMutation,\r\n  useAddStarredClassMutation,\r\n  useSwapCoursePriorityMutation\r\n} = classPagesApi;\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport type { RootState } from '../../app/store';\r\nimport { AddedClasses, Class, CourseSchedule, Filters } from '../../app/types';\r\nimport {\r\n  getMasterCourseCodeFromCourseCode,\r\n  getTimeAsNumberOfMinutes\r\n} from '../../functions';\r\nimport { classPagesApi } from '../api/classPagesApi';\r\nimport { usersApiSlice } from '../api/usersApi';\r\n\r\n// Define a type for the slice state\r\ninterface ClassPagesState {\r\n  classes: { [masterCourseCode: string]: Class };\r\n  filteredClasses: { [masterCourseCode: string]: Class };\r\n  renderedClasses: { [masterCourseCode: string]: Class };\r\n  currentSection: string;\r\n  availableSections: string[];\r\n  searchTerm: string;\r\n  selectedClass: any;\r\n  page: number;\r\n  filters: Filters;\r\n  isHMC: boolean;\r\n  hasSelectedElectiveGen: boolean;\r\n  suggestedClasses: { [masterCourseCode: string]: Class };\r\n  orderedAddedClasses: AddedClasses['orderedClasses'];\r\n}\r\n\r\n// Define the initial state using that type\r\nconst initialState: ClassPagesState = {\r\n  classes: {},\r\n  filteredClasses: {},\r\n  renderedClasses: {},\r\n  currentSection: '',\r\n  availableSections: [],\r\n  selectedClass: {},\r\n  searchTerm: '',\r\n  page: 1,\r\n  isHMC: false,\r\n  filters: {\r\n    filterConflicts: false,\r\n    colleges: { HM: true, CM: true, PO: true, PZ: true, SC: true }\r\n  },\r\n  hasSelectedElectiveGen: false,\r\n  suggestedClasses: {},\r\n  orderedAddedClasses: {}\r\n};\r\n\r\nexport const classPagesSlice = createSlice({\r\n  name: 'classPages',\r\n  initialState,\r\n  reducers: {\r\n    reset: () => initialState,\r\n    currentSectionUpdated: (state, action: PayloadAction<string>) => {\r\n      state.currentSection = action.payload;\r\n    },\r\n    availableSectionsListUpdated: (state, action: PayloadAction<string[]>) => {\r\n      state.availableSections = action.payload;\r\n    },\r\n    endOfListReached: (state) => {\r\n      state.page++;\r\n    },\r\n    resetClasses: (state) => {\r\n      state.page = 1;\r\n      state.searchTerm = '';\r\n\r\n      classPagesSlice.caseReducers.searchResultsFiltered(state);\r\n    },\r\n    suggestedClassesUpdated: (\r\n      state,\r\n      action: PayloadAction<{ [masterCourseCode: string]: Class }>\r\n    ) => {\r\n      state.suggestedClasses = action.payload;\r\n    },\r\n    suggestedClassesDimissed: (state) => {\r\n      state.suggestedClasses = {};\r\n    },\r\n    electiveGeneratorSelected: (state) => {\r\n      state.hasSelectedElectiveGen = true;\r\n    },\r\n    classSelected: (state, action: PayloadAction<string>) => {\r\n      state.selectedClass = state.classes[action.payload];\r\n    },\r\n    selectedClassCleared: (state) => {\r\n      state.selectedClass = {};\r\n    },\r\n    filtersSaved: (state, action: PayloadAction<Filters>) => {\r\n      state.filters = action.payload;\r\n      classPagesSlice.caseReducers.searchResultsFiltered(state);\r\n    },\r\n    isHMCUpdated: (state, action: PayloadAction<boolean>) => {\r\n      state.isHMC = action.payload;\r\n    },\r\n    filtersReset: (state) => {\r\n      state.filters = initialState.filters;\r\n\r\n      classPagesSlice.caseReducers.searchResultsFiltered(state);\r\n    },\r\n    searchResultsFiltered: (state) => {\r\n      // Update the renderedClasses object with the new filters\r\n      let newResultsArray = Object.entries(state.classes);\r\n\r\n      newResultsArray = newResultsArray.filter(([masterCourseCode, _]) => {\r\n        // filter by college\r\n        const collegeAbr = masterCourseCode.substring(\r\n          masterCourseCode.length - 2,\r\n          masterCourseCode.length\r\n        );\r\n        return state.filters.colleges[collegeAbr];\r\n      });\r\n\r\n      const newResultsObject = Object.fromEntries(newResultsArray);\r\n      // filter conflicting times\r\n      if (\r\n        state.filters.filterConflicts &&\r\n        state.orderedAddedClasses[state.currentSection] &&\r\n        state.orderedAddedClasses[state.currentSection].length\r\n      ) {\r\n        newResultsArray.forEach(([masterCourseCode, _]) => {\r\n          newResultsObject[masterCourseCode].times = newResultsObject[\r\n            masterCourseCode\r\n          ].times.filter((time) => {\r\n            for (const timeWindow of time.courseSchedule) {\r\n              if (\r\n                doesClassConflict(\r\n                  timeWindow,\r\n                  state.orderedAddedClasses[state.currentSection],\r\n                  state.classes\r\n                )\r\n              ) {\r\n                return false;\r\n              }\r\n            }\r\n            return true;\r\n          });\r\n\r\n          if (newResultsObject[masterCourseCode].times.length == 0) {\r\n            delete newResultsObject[masterCourseCode];\r\n          }\r\n        });\r\n      }\r\n\r\n      state.filteredClasses = newResultsObject;\r\n      state.renderedClasses = { ...state.filteredClasses };\r\n    },\r\n    searchTermUpdated: (state, action: PayloadAction<string>) => {\r\n      let newResultsArray = Object.entries(state.filteredClasses);\r\n      state.searchTerm = action.payload;\r\n      state.page = 1;\r\n\r\n      if (state.searchTerm === '') {\r\n        classPagesSlice.caseReducers.resetClasses(state);\r\n      } else {\r\n        const searchTerm = matchDepartmentName(state.searchTerm);\r\n\r\n        // Check for courseCode shortcuts\r\n        const searchCourseCode = findSearchTermShortcuts(searchTerm);\r\n\r\n        const searchTerms = searchTerm.split(' ');\r\n\r\n        newResultsArray = newResultsArray.filter(\r\n          ([_, { courseName, times, masterCourseCode }]) =>\r\n            filterBySearchTerm(\r\n              courseName,\r\n              times,\r\n              masterCourseCode,\r\n              searchCourseCode,\r\n              searchCourseCode === state.searchTerm ? searchTerms : []\r\n            )\r\n        );\r\n\r\n        const newResultsObject = Object.fromEntries(newResultsArray);\r\n\r\n        state.renderedClasses = { ...newResultsObject };\r\n      }\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addMatcher(\r\n      classPagesApi.endpoints.getAllClasses.matchFulfilled,\r\n      (state, { payload }) => {\r\n        state.classes = payload;\r\n        state.filteredClasses = payload;\r\n        state.renderedClasses = payload;\r\n      }\r\n    );\r\n    builder.addMatcher(\r\n      usersApiSlice.endpoints.getUserInfo.matchFulfilled,\r\n      (state, { payload }) => {\r\n        state.orderedAddedClasses = payload.addedClasses.orderedClasses;\r\n      }\r\n    );\r\n    builder.addMatcher(\r\n      classPagesApi.endpoints.addClass.matchFulfilled,\r\n      (state, { payload }) => {\r\n        state.orderedAddedClasses = getOrderedClassesFromApiRes(\r\n          payload.userData.classes\r\n        );\r\n      }\r\n    );\r\n    builder.addMatcher(\r\n      classPagesApi.endpoints.removeClass.matchFulfilled,\r\n      (state, { payload }) => {\r\n        state.orderedAddedClasses = getOrderedClassesFromApiRes(\r\n          payload.userData.classes\r\n        );\r\n      }\r\n    );\r\n    builder.addMatcher(\r\n      classPagesApi.endpoints.swapCoursePriority.matchFulfilled,\r\n      (state, { payload }) => {\r\n        state.orderedAddedClasses = getOrderedClassesFromApiRes(\r\n          payload.userData.classes\r\n        );\r\n      }\r\n    );\r\n  }\r\n});\r\n\r\n// Helper functions\r\n\r\nconst findSearchTermShortcuts = (searchPhrase: string) => {\r\n  return searchPhrase\r\n    .replace(/(csci *|cs *)(\\d+)/i, (match, p1, p2) => `csci ${p2}`)\r\n    .replace(\r\n      /((e *)|(eng *)|(engr *))(\\d+)/i,\r\n      (match, p1, p2, p3, p4, p5) => `engr ${p5}`\r\n    )\r\n    .replace(/(bio *|biol *)(\\d+)/i, (match, p1, p2) => `biol ${p2}`)\r\n    .replace(\r\n      // pad 0s for courseCode search\r\n      /([a-z]+ *)(\\d+)/i,\r\n      (match, p1, p2) => p1 + p2.padStart(3, '0')\r\n    );\r\n};\r\n\r\n// convert full department name search phrase to the department code\r\n// TODO: add more departments\r\nconst matchDepartmentName = (searchPhrase: string) => {\r\n  return searchPhrase\r\n    .replace(/(computer science)/i, 'csci')\r\n    .replace(/(engineering)/i, 'engr')\r\n    .replace(/(biology)/i, 'biol');\r\n};\r\n\r\nconst filterBySearchTerm = (\r\n  courseName: string,\r\n  times: any[],\r\n  masterCourseCode: string,\r\n  searchCourseCode?: string,\r\n  searchTerms?: string[]\r\n) => {\r\n  const coursePhrase = `${masterCourseCode} ${courseName} ${\r\n    times[0]?.professorName ? times[0].professorName : ''\r\n  }`;\r\n\r\n  // Return true if any of the searchCourseCodes are found in the masterCourseCode\r\n  if (\r\n    masterCourseCode\r\n      .trim()\r\n      .replace(/\\s+/g, ' ')\r\n      .includes(searchCourseCode.toUpperCase().trim().replace(/\\s+/g, ' '))\r\n  ) {\r\n    return true;\r\n  }\r\n\r\n  // Return true if all of the searchPhrases are found in the coursePhrase\r\n  for (const searchTerm of searchTerms) {\r\n    if (\r\n      !coursePhrase\r\n        .toUpperCase()\r\n        .trim()\r\n        .replace(/\\s+/g, ' ')\r\n        .includes(searchTerm.toUpperCase().trim().replace(/\\s+/g, ' '))\r\n    ) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return searchTerms.length > 0;\r\n};\r\n\r\nconst doesClassConflict = (\r\n  schedule: CourseSchedule,\r\n  orderedAddedClasses: string[],\r\n  classes: { [masterCourseCode: string]: Class }\r\n) => {\r\n  for (const addedClass of orderedAddedClasses) {\r\n    const masterCourseCode = getMasterCourseCodeFromCourseCode(addedClass);\r\n    const addedTimes = classes[masterCourseCode].times;\r\n\r\n    for (const addedTime of addedTimes) {\r\n      for (const addedSchedule of addedTime.courseSchedule) {\r\n        const addedTimeStart = getTimeAsNumberOfMinutes(\r\n          addedSchedule.startTime\r\n        );\r\n        const addedTimeEnd = getTimeAsNumberOfMinutes(addedSchedule.endTime);\r\n        const scheduleTimeStart = getTimeAsNumberOfMinutes(schedule.startTime);\r\n        const scheduleTimeEnd = getTimeAsNumberOfMinutes(schedule.endTime);\r\n        if (\r\n          addedSchedule.daysOfTheWeek.filter((day) =>\r\n            schedule.daysOfTheWeek.includes(day)\r\n          ).length > 0 &&\r\n          ((scheduleTimeStart >= addedTimeStart &&\r\n            scheduleTimeStart < addedTimeEnd) ||\r\n            (scheduleTimeEnd > addedTimeStart &&\r\n              scheduleTimeEnd <= addedTimeEnd) ||\r\n            (scheduleTimeStart <= addedTimeStart &&\r\n              scheduleTimeEnd >= addedTimeEnd))\r\n        ) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst getOrderedClassesFromApiRes = (\r\n  classes: { courseCode: string; courseTerm: string }[]\r\n) => {\r\n  let orderedClasses: AddedClasses['orderedClasses'] = {};\r\n  classes.forEach(({ courseCode, courseTerm }) => {\r\n    if (!orderedClasses[courseTerm]) {\r\n      orderedClasses[courseTerm] = [];\r\n    }\r\n    orderedClasses[courseTerm].push(courseCode);\r\n  });\r\n  return orderedClasses;\r\n};\r\n\r\n// Selectors\r\nexport const selectClassesList = (state: RootState) =>\r\n  state.appData.classPages.classes;\r\n\r\nexport const selectRenderedClassesList = (state: RootState) =>\r\n  state.appData.classPages.renderedClasses;\r\n\r\n// Actions\r\nexport const {\r\n  currentSectionUpdated,\r\n  endOfListReached,\r\n  searchTermUpdated,\r\n  resetClasses,\r\n  classSelected,\r\n  selectedClassCleared,\r\n  reset,\r\n  filtersSaved,\r\n  filtersReset,\r\n  isHMCUpdated,\r\n  availableSectionsListUpdated,\r\n  electiveGeneratorSelected,\r\n  suggestedClassesUpdated,\r\n  suggestedClassesDimissed\r\n} = classPagesSlice.actions;\r\n\r\nexport default classPagesSlice.reducer;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport type { PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport { RootState } from '../../app/store';\r\n\r\ninterface DiscoverState {\r\n  searchTerm: string;\r\n  submittedSearchTerm: string;\r\n  tag: string;\r\n  recentSearches: string[];\r\n}\r\nconst initialState: DiscoverState = {\r\n  searchTerm: '',\r\n  submittedSearchTerm: '',\r\n  tag: '',\r\n  recentSearches: []\r\n};\r\n\r\nexport const discoverSlice = createSlice({\r\n  name: 'discover',\r\n  initialState,\r\n  reducers: {\r\n    reset: () => initialState,\r\n    searchTermSubmitted: (state, action: PayloadAction<string>) => {\r\n      state.submittedSearchTerm = action.payload;\r\n      if (action.payload && !state.recentSearches.includes(action.payload)) {\r\n        state.recentSearches.unshift(action.payload);\r\n      }\r\n    },\r\n    searchTermChanged: (state, action: PayloadAction<string>) => {\r\n      state.searchTerm = action.payload;\r\n      if (action.payload === '') {\r\n        state.submittedSearchTerm = '';\r\n      }\r\n    },\r\n    recentSearchTermSelected: (state, action: PayloadAction<string>) => {\r\n      state.searchTerm = action.payload;\r\n      state.submittedSearchTerm = action.payload;\r\n    },\r\n    tagSelected: (state, action: PayloadAction<string>) => {\r\n      state.tag = action.payload;\r\n    },\r\n    recentSearchTermRemoved: (state, action: PayloadAction<string>) => {\r\n      state.recentSearches = state.recentSearches.filter(\r\n        (term) => term !== action.payload\r\n      );\r\n    }\r\n  }\r\n});\r\n\r\nexport const {\r\n  reset,\r\n  searchTermChanged,\r\n  searchTermSubmitted,\r\n  tagSelected,\r\n  recentSearchTermSelected,\r\n  recentSearchTermRemoved\r\n} = discoverSlice.actions;\r\n\r\nexport const selectSearchTerm = (state: RootState) => state.appData.discover.searchTerm;\r\nexport const selectSubmittedSearchTerm = (state: RootState) => state.appData.discover.submittedSearchTerm;\r\nexport const selectTag = (state: RootState) => state.appData.discover.tag;\r\nexport const selectRecentSearches = (state: RootState) => state.appData.discover.recentSearches;\r\n\r\nexport default discoverSlice.reducer;\r\n","// import createSecureStore from \"redux-persist-expo-securestore\"\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport * as ExpoSecureStorage from 'expo-secure-store';\r\nimport { Platform } from 'react-native';\r\nimport { combineReducers } from 'redux';\r\nimport { persistReducer } from 'redux-persist';\r\nimport ExpoFileSystemStorage from 'redux-persist-expo-filesystem';\r\n\r\nimport createSecureStorage from './SecureStorage';\r\nimport appDataReducer from '../app/appDataSlice';\r\nimport calendarReducer from '../features/calendar/calendarSlice';\r\nimport classPagesReducer from '../features/classPages/classPagesSlice';\r\nimport discoverReducer from '../features/discover/discoverSlice';\r\n\r\n// Secure storage\r\n\r\n// const SecureStorage = createSecureStore();\r\nconst SecureStorage = createSecureStorage();\r\n\r\nconst securePersistConfig = {\r\n  key: 'secure',\r\n  storage: Platform.OS === 'web' ? AsyncStorage : SecureStorage\r\n};\r\n\r\n// Non-secure (AsyncStorage) storage\r\nconst cpPersistConfig = {\r\n  key: 'classPages',\r\n  storage: Platform.OS === 'android' ? ExpoFileSystemStorage : AsyncStorage,\r\n  whitelist:\r\n    Platform.OS === 'web'\r\n      ? ['currentSection', 'hasSelectedElectiveGen']\r\n      : ['classes', 'currentSection', 'isHMC', 'hasSelectedElectiveGen']\r\n};\r\n\r\nconst discoverPersistConfig = {\r\n  key: 'discover',\r\n  storage: Platform.OS === 'android' ? ExpoFileSystemStorage : AsyncStorage,\r\n  whitelist: ['recentSearches']\r\n};\r\n\r\n// Combine them together\r\nexport const rootReducer = combineReducers({\r\n  classPages: persistReducer(cpPersistConfig, classPagesReducer),\r\n  secure: persistReducer(securePersistConfig, appDataReducer),\r\n  discover: persistReducer(discoverPersistConfig, discoverReducer),\r\n  calendar: calendarReducer\r\n});\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport {\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER\r\n} from 'redux-persist';\r\n\r\nimport { rootReducer } from './storage';\r\nimport { apiSlice } from '../features/api/apiSlice';\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    appData: rootReducer,\r\n    [apiSlice.reducerPath]: apiSlice.reducer\r\n  },\r\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware({\r\n    serializableCheck: false,\r\n    immutableCheck: false\r\n  }).concat(apiSlice.middleware)\r\n});\r\n\r\n// serializableCheck: {\r\n//   ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n//   ignoredPaths: [\r\n//     'appData.classPages.classes',\r\n//     'addData.classPages.renderedClasses',\r\n//   ],\r\n// },\r\n// immutableCheck: {\r\n//   ignoredPaths: [\r\n//     'appData.classPages.classes',\r\n//     'addData.classPages.renderedClasses',\r\n//   ],\r\n// },\r\n\r\n// Infer the `RootState` and `AppDispatch` types from the store itself\r\nexport type RootState = ReturnType<typeof store.getState>;\r\n// Inferred type: {posts: PostsState, comments: CommentsState, users: UsersState}\r\nexport type AppDispatch = typeof store.dispatch;\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\n\r\nimport type { RootState, AppDispatch } from './store';\r\n\r\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\r\nexport const useAppDispatch: () => AppDispatch = useDispatch;\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import { Image, View } from 'react-native';\r\n\r\nexport default function WebSplashScreen() {\r\n  return (\r\n    <View\r\n      style={{\r\n        flex: 1,\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n      }}\r\n    >\r\n      <Image\r\n        source={require('../../assets/logos/splash-logo.png')}\r\n        style={{ width: 300, height: 300 }}\r\n      />\r\n    </View>\r\n  );\r\n}\r\n","import { Manager } from 'socket.io-client';\r\n\r\nexport const base_URL = 'https://api.athenaserver.com:5678/api';\r\n\r\nexport const manager = new Manager(base_URL, {\r\n  randomizationFactor: 0.5,\r\n  addTrailingSlash: false,\r\n  autoConnect: false\r\n});\r\n","import { FontAwesome } from '@expo/vector-icons';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport {\r\n  Card,\r\n  Divider,\r\n  IndexPath,\r\n  Layout,\r\n  Select,\r\n  SelectItem\r\n} from '@ui-kitten/components';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport moment from 'moment-timezone';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  Dimensions,\r\n  Image,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  RefreshControl,\r\n  ScrollView,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  View\r\n} from 'react-native';\r\nimport { LineChart } from 'react-native-chart-kit';\r\n\r\nimport { selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport { base_URL } from '../../constants/admin';\r\n\r\nconst AdminHomePage = createNativeStackNavigator();\r\n\r\nexport default function AdminHomeNavigation() {\r\n  const [adminCommands, setAdminCommands] = useState([]);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  useEffect(() => {\r\n    getAdminCommands();\r\n  }, []);\r\n  async function getAdminCommands() {\r\n    const adminURL = `${base_URL}/adminCommands`;\r\n    const res = await fetch(`${adminURL}/getAdminCommands`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    });\r\n    let commands: any[] = await res.json();\r\n    const filter = await fetch(`${adminURL}/toggleAdminCommands`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      },\r\n      body: '{}'\r\n    });\r\n    const filterObject = (await filter.json()).currentAdminCommandsStatus;\r\n    commands = commands.sort((a, b) => {\r\n      const textA = a.label.toUpperCase();\r\n      const textB = b.label.toUpperCase();\r\n      return textA < textB ? -1 : textA > textB ? 1 : 0;\r\n    });\r\n    const finalCommandList = [];\r\n    for (const command of commands) {\r\n      if (filterObject[command.label]) {\r\n        finalCommandList.push(command);\r\n      }\r\n    }\r\n    // @ts-ignore\r\n    setAdminCommands(finalCommandList);\r\n    return commands;\r\n  }\r\n\r\n  const [refreshing, setRefreshing] = useState(false);\r\n\r\n  const onRefresh = useCallback(() => {\r\n    setRefreshing(true);\r\n    setAdminCommands([]);\r\n    getAdminCommands().then((commands) => setRefreshing(false));\r\n  }, []);\r\n\r\n  function AdminHome({ navigation }) {\r\n    return (\r\n      <ScrollView\r\n        refreshControl={\r\n          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\r\n        }\r\n      >\r\n        {adminCommands?.length === 0 ? <Text>No Commands Yet. Rip</Text> : null}\r\n        {adminCommands?.map((command) => {\r\n          return (\r\n            <TouchableOpacity\r\n              onPress={() => {\r\n                navigation.navigate('AdminCommand', { data: command });\r\n              }}\r\n              style={listingStyles.cardContainer}\r\n              key={command.url}\r\n            >\r\n              <Text style={listingStyles.text}>{command.label}</Text>\r\n            </TouchableOpacity>\r\n          );\r\n        })}\r\n      </ScrollView>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AdminHomePage.Navigator initialRouteName=\"AdminHome\">\r\n      <AdminHomePage.Screen\r\n        options={{\r\n          // title: 'Admin Home',\r\n          /* headerTitle: () => {\r\n                        return adminControlPanelHeader;\r\n                    }, */\r\n          headerShown: false\r\n        }}\r\n        name=\"AdminHome\"\r\n        component={AdminHome}\r\n      />\r\n      <AdminHomePage.Screen\r\n        name=\"AdminCommand\"\r\n        component={AdminCommand}\r\n        options={{ headerTitle: '' }}\r\n      />\r\n    </AdminHomePage.Navigator>\r\n  );\r\n}\r\n\r\nfunction AdminCommand({\r\n  route: {\r\n    params: { data }\r\n  }\r\n}) {\r\n  const [info, setInfo] = useState({});\r\n  const [isFileUpload, setIsFileUpload] = useState(false);\r\n  const [body, setBody] = useState({});\r\n  const [users, setUsers] = useState([]);\r\n  const [fileUploads, setFileUploads] = useState([]);\r\n  const [sponsors, setSponsors] = useState([]);\r\n  const [status, setStatus] = useState('0');\r\n  const [allFieldsFilled, setAllFieldsFilled] = useState(false);\r\n  const [buttonPushed, setButtonPushed] = useState(false); // refresh button\r\n  const userKey = useAppSelector(selectUserKey);\r\n\r\n  useEffect(() => {\r\n    // Check for first button render\r\n    checkForFieldsFilled(body);\r\n    // Fetch User List\r\n    fetch(`${base_URL}/users/getUserNameList`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then(async (data) => {\r\n      if (data.ok) {\r\n        const newUsers = (await data.json()).map((userName) => {\r\n          return {\r\n            label: userName,\r\n            id: userName\r\n          };\r\n        });\r\n        setUsers(newUsers);\r\n      }\r\n    });\r\n    // Fetch Sponsor List\r\n    fetch(`${base_URL}/sponsors/`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then(async (data) => {\r\n      if (data.ok) {\r\n        const sponsors = (await data.json()).map((sponsor) => {\r\n          return {\r\n            label: sponsor.sponsorName,\r\n            id: sponsor._id\r\n          };\r\n        });\r\n        setSponsors(sponsors);\r\n      }\r\n    });\r\n    // Fetch File upload List\r\n    fetch(`${base_URL}/adminCommands/getReferenceImages`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then(async (data) => {\r\n      if (data.ok) {\r\n        const images = (await data.json()).map((imageName) => {\r\n          return {\r\n            label: imageName,\r\n            id: imageName\r\n          };\r\n        });\r\n        setFileUploads(images);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  function checkForFieldsFilled(body) {\r\n    for (const field of data.fields) {\r\n      if (field.mandatory) {\r\n        if (body[field.id] === undefined || body[field.id] === null) {\r\n          setAllFieldsFilled(false);\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    setAllFieldsFilled(true);\r\n  }\r\n\r\n  const sendApiData = (data, userKey) => {\r\n    let additionToUrl = '';\r\n    for (const aspect in body) {\r\n      if (body[aspect].paramOverride) {\r\n        additionToUrl += body[aspect];\r\n        break;\r\n      }\r\n    }\r\n    if (JSON.stringify(body, null, 2) !== '{}' && data.apiType === 'GET') {\r\n      for (const aspect in body) {\r\n        if (additionToUrl === '') {\r\n          additionToUrl = '?';\r\n        } else {\r\n          additionToUrl += '&';\r\n        }\r\n        additionToUrl += `${aspect}=${body[aspect]}`;\r\n      }\r\n    }\r\n    const newUrl = data.url + additionToUrl;\r\n    if (!isFileUpload) {\r\n      fetch(newUrl, {\r\n        method: data.apiType,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          userKey\r\n        },\r\n        body:\r\n          JSON.stringify(body, null, 2) !== '{}' && data.apiType !== 'GET'\r\n            ? JSON.stringify(body)\r\n            : undefined\r\n      }).then((res) => {\r\n        // @ts-ignore\r\n        setStatus(res.status);\r\n        res.text().then((text) => {\r\n          try {\r\n            const text2 = JSON.parse(text);\r\n            setInfo(text2);\r\n          } catch (err) {\r\n            setInfo(text);\r\n          }\r\n        });\r\n      });\r\n    } else {\r\n      const formdata = new FormData();\r\n      for (const item in body) {\r\n        if (!item.includes('picture')) {\r\n          formdata.append(item, body[item]);\r\n        } else {\r\n          formdata.append(item, {\r\n            // @ts-ignore\r\n            uri: body[item].uri,\r\n            name: item,\r\n            type: 'image/jpg'\r\n          });\r\n        }\r\n      }\r\n      fetch(newUrl, {\r\n        body: formdata,\r\n        redirect: 'follow',\r\n        method: data.apiType,\r\n        headers: {\r\n          userKey\r\n        }\r\n      }).then((res) => {\r\n        // @ts-ignore\r\n        setStatus(res.status);\r\n        res.text().then((text) => {\r\n          try {\r\n            const text2 = JSON.parse(text);\r\n            setInfo(text2);\r\n          } catch (err) {\r\n            setInfo(text);\r\n          }\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  if (buttonPushed) {\r\n    setButtonPushed(false);\r\n    sendApiData(data, userKey);\r\n  }\r\n\r\n  function renderEachDropItem(field) {\r\n    if (field.data) {\r\n      // This is where we can add preset lists if we can't use something hardcoded on the server\r\n      switch (field.data) {\r\n        case 'users': {\r\n          field.options = users;\r\n          break;\r\n        }\r\n        case 'sponsors': {\r\n          field.options = sponsors;\r\n          break;\r\n        }\r\n        case 'fileUploads': {\r\n          field.options = fileUploads;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    const final = [];\r\n    for (const option of field.options) {\r\n      final.push(<SelectItem title={option.label} />);\r\n    }\r\n    return final;\r\n  }\r\n\r\n  function renderTheFieldsNecessary(fields) {\r\n    const changeValue = (theValue, valueToChange) => {\r\n      const newBody = body;\r\n      for (const aspect in newBody) {\r\n        if (\r\n          newBody[aspect] === null ||\r\n          newBody[aspect] === undefined ||\r\n          newBody[aspect] === ''\r\n        ) {\r\n          delete newBody[aspect];\r\n        }\r\n      }\r\n      if (theValue !== undefined) {\r\n        newBody[valueToChange] = theValue;\r\n      } else if (newBody[valueToChange]) {\r\n        delete newBody[valueToChange];\r\n      }\r\n      setBody(newBody);\r\n      checkForFieldsFilled(newBody);\r\n    };\r\n\r\n    const fileUploadTemplate = (field) => {\r\n      const pickImage = async () => {\r\n        const result = await ImagePicker.launchImageLibraryAsync({\r\n          allowsEditing: false\r\n        });\r\n        if (!result.cancelled) {\r\n          changeValue(result, field.id);\r\n        }\r\n      };\r\n\r\n      return (\r\n        <View>\r\n          {/* Image Picker */}\r\n          <TouchableOpacity\r\n            onPress={() => {\r\n              pickImage();\r\n            }}\r\n            style={{\r\n              height: 80,\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              borderRadius: 8,\r\n              paddingVertical: 8,\r\n              flexDirection: 'row',\r\n              backgroundColor: '#dbdbdb',\r\n              marginVertical: 15,\r\n              marginHorizontal: 5\r\n            }}\r\n          >\r\n            <Layout\r\n              style={{\r\n                flex: 1,\r\n                flexDirection: 'row',\r\n                height: '100%',\r\n                marginHorizontal: 10,\r\n                backgroundColor: '#dbdbdb'\r\n              }}\r\n            >\r\n              <Layout\r\n                style={{\r\n                  flex: 1,\r\n                  justifyContent: 'center',\r\n                  alignItems: 'center',\r\n                  height: '100%',\r\n                  borderRadius: 10,\r\n                  backgroundColor: '#bfbfbf'\r\n                }}\r\n              >\r\n                {body && body[field?.id] ? (\r\n                  <Image\r\n                    source={{ uri: body[field.id].uri }}\r\n                    style={{ width: '90%', height: '90%', borderRadius: 10 }}\r\n                  />\r\n                ) : (\r\n                  <FontAwesome name=\"image\" size={40} color=\"grey\" />\r\n                )}\r\n              </Layout>\r\n              <Layout\r\n                style={{\r\n                  backgroundColor: '#dbdbdb',\r\n                  flex: 4,\r\n                  height: '100%',\r\n                  justifyContent: 'center',\r\n                  alignItems: 'center'\r\n                }}\r\n              >\r\n                <Text\r\n                  style={{\r\n                    fontSize: 17\r\n                  }}\r\n                >\r\n                  {body && body[field?.id]\r\n                    ? 'Select Another Image'\r\n                    : 'Select Image'}\r\n                </Text>\r\n              </Layout>\r\n            </Layout>\r\n          </TouchableOpacity>\r\n        </View>\r\n      );\r\n    };\r\n    const renderFilterParameters = (fields) => {\r\n      if (fields.length === 0) {\r\n        return null;\r\n      }\r\n      return (\r\n        <View style={{ flexDirection: 'row' }}>\r\n          <Text\r\n            style={{\r\n              fontSize: 15,\r\n              paddingLeft: 12,\r\n              paddingBottom: 5,\r\n              paddingTop: 5,\r\n              alignContent: 'center',\r\n              fontWeight: 'bold'\r\n            }}\r\n          >\r\n            Filters/Parameters\r\n          </Text>\r\n        </View>\r\n      );\r\n    };\r\n    const final = [];\r\n\r\n    function renderStringArray(field) {\r\n      const valuesToSend = {};\r\n      function changeStringValue(theValue, miniField, field) {\r\n        valuesToSend[miniField] = theValue;\r\n        const newFieldForBody = [];\r\n        for (const value of Object.values(valuesToSend)) {\r\n          newFieldForBody.push(value);\r\n        }\r\n        changeValue(newFieldForBody, field.id);\r\n      }\r\n      const tempFinal = [];\r\n      tempFinal.push(\r\n        <Text\r\n          style={{\r\n            fontSize: 14,\r\n            paddingLeft: 5,\r\n            paddingBottom: 3,\r\n            paddingTop: 3\r\n          }}\r\n        >\r\n          {field.mandatory ? `${field.label} (mandatory)` : field.label}\r\n        </Text>\r\n      );\r\n      for (const eachOne in field.stringArray) {\r\n        tempFinal.push(\r\n          <TextInput\r\n            autoCapitalize=\"none\"\r\n            onChangeText={(theValue) =>\r\n              changeStringValue(\r\n                theValue,\r\n                field.stringArray[eachOne].label,\r\n                field\r\n              )\r\n            }\r\n            style={myStyles.indentedInput}\r\n            placeholderTextColor=\"gray\"\r\n            placeholder={\r\n              field.stringArray[eachOne].mandatory\r\n                ? `${field.stringArray[eachOne].label} (mandatory)`\r\n                : field.stringArray[eachOne].label\r\n            }\r\n          />\r\n        );\r\n      }\r\n      return tempFinal;\r\n    }\r\n\r\n    const renderMultiSelectDropDown = (field) => {\r\n      const [selectedIndex, setSelectedIndex] = useState([]);\r\n      const [hasChosen, setHasChosen] = useState(false);\r\n      function toggleValue(index) {\r\n        setHasChosen(true);\r\n        setSelectedIndex(index);\r\n        const newSelection = Array.isArray(index)\r\n          ? index.map((littleIndex) => {\r\n              return field.options[littleIndex.row].id;\r\n            })\r\n          : field.options[index.row].id;\r\n        changeValue(newSelection, field.id);\r\n      }\r\n      function calculateSelectedValues() {\r\n        const finalArray = selectedIndex.map((littleIndex) => {\r\n          return `${field.options[littleIndex.row].label}, `;\r\n        });\r\n        if (finalArray.length > 0) {\r\n          let finalObject = finalArray.at(-1);\r\n          finalObject = finalObject.replace(', ', '');\r\n          finalArray.splice(-1, 1);\r\n          finalArray.push(finalObject);\r\n          return finalArray;\r\n        }\r\n        return field.mandatory ? `${field.label} (mandatory)` : field.label;\r\n      }\r\n      return (\r\n        <Layout style={myStyles.containerDrop} level=\"1\">\r\n          <Select\r\n            multiSelect\r\n            value={hasChosen ? calculateSelectedValues() : field.label}\r\n            selectedIndex={selectedIndex}\r\n            onSelect={(index) => toggleValue(index)}\r\n          >\r\n            {renderEachDropItem(field)}\r\n          </Select>\r\n        </Layout>\r\n      );\r\n    };\r\n\r\n    const renderDropDown = (field) => {\r\n      const [selectedIndex, setSelectedIndex] = useState(new IndexPath(0));\r\n      const [hasChosen, setHasChosen] = useState(false);\r\n\r\n      function currentValue() {\r\n        return (\r\n          <Text>\r\n            {!hasChosen\r\n              ? `Choose ${field.label}${field.mandatory ? ' (mandatory)' : ''}`\r\n              : field.options[selectedIndex.row - 1].label}{' '}\r\n          </Text>\r\n        );\r\n      }\r\n\r\n      function handleSelection(index) {\r\n        setSelectedIndex(index);\r\n        changeValue(\r\n          index.row === 0 ? undefined : field.options[index.row - 1].id,\r\n          field.id\r\n        );\r\n        if (index.row === 0) {\r\n          setHasChosen(false);\r\n        } else {\r\n          setHasChosen(true);\r\n        }\r\n      }\r\n\r\n      return (\r\n        <Select\r\n          style={myStyles.containerDrop}\r\n          value={currentValue}\r\n          selectedIndex={selectedIndex}\r\n          onSelect={handleSelection}\r\n        >\r\n          <SelectItem title={' '} />\r\n          {renderEachDropItem(field)}\r\n        </Select>\r\n      );\r\n    };\r\n\r\n    for (let i = 0; i < fields.length; i++) {\r\n      const { type } = fields[i];\r\n      if (type === 'Boolean') {\r\n        final.push(trueFalseTemplate(fields[i]));\r\n      } else if (type === 'String') {\r\n        final.push(\r\n          <TextInput\r\n            autoCapitalize=\"none\"\r\n            clearButtonMode=\"always\"\r\n            onChangeText={(theValue) => changeValue(theValue, fields[i].id)}\r\n            style={myStyles.input}\r\n            placeholderTextColor=\"gray\"\r\n            placeholder={\r\n              fields[i].mandatory\r\n                ? `${fields[i].label} (mandatory)`\r\n                : fields[i].label\r\n            }\r\n          />\r\n        );\r\n      } else if (type === 'ArrayString') {\r\n        final.push(renderStringArray(fields[i]));\r\n      } else if (type === 'DropDown') {\r\n        final.push(renderDropDown(fields[i]));\r\n      } else if (type === 'MultiSelectDropDown') {\r\n        final.push(renderMultiSelectDropDown(fields[i]));\r\n      } else if (type === 'BigString') {\r\n        final.push(\r\n          <TextInput\r\n            autoCapitalize=\"sentences\"\r\n            clearButtonMode=\"always\"\r\n            onChangeText={(theValue) => changeValue(theValue, fields[i].id)}\r\n            style={myStyles.inputBig}\r\n            multiline\r\n            placeholderTextColor=\"gray\"\r\n            placeholder={\r\n              fields[i].mandatory\r\n                ? `${fields[i].label} (mandatory)`\r\n                : fields[i].label\r\n            }\r\n          />\r\n        );\r\n      } else if (type === 'FileUpload') {\r\n        if (!isFileUpload) {\r\n          setIsFileUpload(true);\r\n        }\r\n        final.push(fileUploadTemplate(fields[i]));\r\n      }\r\n    }\r\n    return (\r\n      <View>\r\n        {renderFilterParameters(fields)}\r\n        <View>{final}</View>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  const trueFalseTemplate = (field) => {\r\n    const [selectedIndex, setSelectedIndex] = useState();\r\n    const boolValues = ['false', 'true'];\r\n    // @ts-ignore\r\n    const displayValue = boolValues[selectedIndex - 1];\r\n    const renderOption = (displayValue) => <SelectItem title={displayValue} />;\r\n    const changeEverything = (value) => {\r\n      setSelectedIndex(value);\r\n      if (value.row === 0) {\r\n        const newBody = body;\r\n        newBody[field.id] = false;\r\n        setBody(newBody);\r\n      } else if (value.row === 1) {\r\n        const newBody = body;\r\n        newBody[field.id] = true;\r\n        setBody(newBody);\r\n      }\r\n    };\r\n    return (\r\n      <Layout style={styles.container} level=\"1\">\r\n        <Select\r\n          label={field.label}\r\n          selectedIndex={selectedIndex}\r\n          value={displayValue}\r\n          onSelect={(index) => changeEverything(index)}\r\n          placeholder={\r\n            field.mandatory ? `${field.label} (mandatory)` : `${field.label}`\r\n          }\r\n        >\r\n          {boolValues.map(renderOption)}\r\n        </Select>\r\n      </Layout>\r\n    );\r\n  };\r\n\r\n  function showResponseData(actions) {\r\n    if (JSON.stringify(info, null, 2) === '{}') {\r\n      return null;\r\n    }\r\n    const informationToShow = [];\r\n\r\n    // use this one for displaying everything pretty\r\n    if (Array.isArray(info)) {\r\n      if (data.isDateGraph) {\r\n        // check for need for rendering graphs\r\n        const timeFrames = [\r\n          '2week-unique',\r\n          '2week-total',\r\n          'month-unique',\r\n          '6month-total'\r\n        ];\r\n        for (const item of timeFrames) {\r\n          const dataToShow = {\r\n            labels: getDates(item),\r\n            datasets: [\r\n              {\r\n                data: getData(item)\r\n              }\r\n            ]\r\n          };\r\n          informationToShow.push(renderOneGraph(dataToShow, item));\r\n        }\r\n      }\r\n      for (const oneElement of info) {\r\n        informationToShow.push(renderOneCard(oneElement, actions || []));\r\n      }\r\n    } else {\r\n      informationToShow.push(\r\n        <Text style={{ flexShrink: 1 }}>\r\n          {typeof info === 'string' ? info : JSON.stringify(info, null, 2)}\r\n        </Text>\r\n      );\r\n    }\r\n\r\n    function getData(timeFrame) {\r\n      const final = [];\r\n      switch (timeFrame) {\r\n        case '2week-unique': {\r\n          for (let i = 13; i >= 0; i--) {\r\n            const day = moment()\r\n              .tz('America/Los_Angeles')\r\n              .subtract(i, 'days')\r\n              .format('YYYY-MM-DD');\r\n            let counter = 0;\r\n            const usersToday = [];\r\n            // @ts-ignore\r\n            for (const instance of info) {\r\n              const { userName } = instance;\r\n              if (instance.date === day && !usersToday.includes(userName)) {\r\n                usersToday.push(userName);\r\n                counter++;\r\n              }\r\n            }\r\n            final.push(counter);\r\n          }\r\n          break;\r\n        }\r\n        case '2week-total': {\r\n          for (let i = 13; i >= 0; i--) {\r\n            const day = moment()\r\n              .tz('America/Los_Angeles')\r\n              .subtract(i, 'days')\r\n              .format('YYYY-MM-DD');\r\n            let counter = 0;\r\n            const usersToday = [];\r\n            // @ts-ignore\r\n            for (const instance of info) {\r\n              const { userName } = instance;\r\n              if (instance.date === day) {\r\n                usersToday.push(userName);\r\n                counter++;\r\n              }\r\n            }\r\n            final.push(counter);\r\n          }\r\n          break;\r\n        }\r\n        case 'month-unique': {\r\n          for (let i = 4; i > 0; i--) {\r\n            const weekStart = moment()\r\n              .tz('America/Los_Angeles')\r\n              .subtract(i, 'weeks')\r\n              .format('YYYY-MM-DD');\r\n            const weekEnd = moment()\r\n              .tz('America/Los_Angeles')\r\n              .subtract(i - 1, 'weeks')\r\n              .format('YYYY-MM-DD');\r\n            let counter = 0;\r\n            const usersMonth = [];\r\n            // @ts-ignore\r\n            for (const instance of info) {\r\n              if (\r\n                instance.date > weekStart &&\r\n                instance.date <= weekEnd &&\r\n                !usersMonth.includes(instance.userName)\r\n              ) {\r\n                counter++;\r\n                usersMonth.push(instance.userName);\r\n              }\r\n            }\r\n            final.push(counter);\r\n          }\r\n          break;\r\n        }\r\n        case '6month-total': {\r\n          for (let i = 6; i > 0; i--) {\r\n            const monthStart = moment()\r\n              .tz('America/Los_Angeles')\r\n              .subtract(i, 'months')\r\n              .format('YYYY-MM-DD');\r\n            const monthEnd = moment()\r\n              .tz('America/Los_Angeles')\r\n              .subtract(i - 1, 'months')\r\n              .format('YYYY-MM-DD');\r\n            let counter = 0;\r\n            // @ts-ignore\r\n            for (const instance of info) {\r\n              if (instance.date > monthStart && instance.date <= monthEnd) {\r\n                counter++;\r\n              }\r\n            }\r\n            final.push(counter);\r\n          }\r\n          break;\r\n        }\r\n      }\r\n      return final;\r\n    }\r\n\r\n    function getDates(timeFrame) {\r\n      const final = [];\r\n      switch (timeFrame) {\r\n        case '2week-unique': {\r\n          for (let i = 13; i >= 0; i--) {\r\n            final.push(\r\n              moment()\r\n                .tz('America/Los_Angeles')\r\n                .subtract(i, 'days')\r\n                .format('MM/DD')\r\n            );\r\n          }\r\n          break;\r\n        }\r\n        case '2week-total': {\r\n          for (let i = 13; i >= 0; i--) {\r\n            final.push(\r\n              moment()\r\n                .tz('America/Los_Angeles')\r\n                .subtract(i, 'days')\r\n                .format('MM/DD')\r\n            );\r\n          }\r\n          break;\r\n        }\r\n        case 'month-unique': {\r\n          for (let i = 4; i > 0; i--) {\r\n            final.push(\r\n              `${moment()\r\n                .tz('America/Los_Angeles')\r\n                .subtract(i, 'weeks')\r\n                .add(1, 'days')\r\n                .format('MM/DD')}-${moment()\r\n                .tz('America/Los_Angeles')\r\n                .subtract(i - 1, 'weeks')\r\n                .format('MM/DD')}`\r\n            );\r\n          }\r\n          break;\r\n        }\r\n        case '6month-total': {\r\n          for (let i = 6; i > 0; i--) {\r\n            final.push(\r\n              `${moment()\r\n                .tz('America/Los_Angeles')\r\n                .subtract(i, 'months')\r\n                .add(1, 'days')\r\n                .format('MM/DD')}-${moment()\r\n                .tz('America/Los_Angeles')\r\n                .subtract(i - 1, 'months')\r\n                .format('MM/DD')}`\r\n            );\r\n          }\r\n          break;\r\n        }\r\n      }\r\n      return final;\r\n    }\r\n\r\n    function renderOneGraph(graphData, timeFrame) {\r\n      return (\r\n        <View style={{ paddingBottom: 10 }}>\r\n          <Text>\r\n            Timeframe:\r\n            {timeFrame}\r\n          </Text>\r\n          <LineChart\r\n            data={graphData}\r\n            width={Dimensions.get('window').width}\r\n            height={400}\r\n            verticalLabelRotation={60}\r\n            fromZero\r\n            xLabelsOffset={-10}\r\n            segments={8}\r\n            chartConfig={{\r\n              backgroundColor: '#bdbdbd',\r\n              decimalPlaces: 0,\r\n              color: (opacity = 1) => `rgba(255, 255, 255, ${opacity})`,\r\n              labelColor: (opacity = 1) => `rgba(255, 255, 255, ${opacity})`,\r\n              style: {\r\n                borderRadius: 16\r\n              },\r\n              propsForDots: {\r\n                r: '6',\r\n                strokeWidth: '2',\r\n                stroke: '#333333'\r\n              }\r\n            }}\r\n          />\r\n        </View>\r\n      );\r\n    }\r\n\r\n    function renderOneCard(cardInfo, actions) {\r\n      const finalText = [];\r\n      for (const aspect in cardInfo) {\r\n        if (aspect !== '_id' && aspect !== '__v') {\r\n          finalText.push(\r\n            <View style={{ flexDirection: 'row', flexWrap: 'wrap' }}>\r\n              <Text style={{ fontWeight: 'bold' }}>{`${aspect} : `}</Text>\r\n              <Text>{JSON.stringify(cardInfo[aspect], null, '\\t')}</Text>\r\n            </View>\r\n          );\r\n        }\r\n      }\r\n      let renderedActions = null;\r\n      // @ts-ignore\r\n      if (actions !== []) {\r\n        renderedActions = [];\r\n        for (const action of actions) {\r\n          renderedActions.push(renderButtonForCard(action, cardInfo));\r\n        }\r\n      }\r\n\r\n      function renderButtonForCard(action, cardInfo) {\r\n        return (\r\n          <View style={{ marginHorizontal: 20 }}>\r\n            <TouchableOpacity\r\n              style={{\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                width: 100,\r\n                height: 40,\r\n                backgroundColor: action.color ? action.color : 'gray',\r\n                elevation: 3\r\n              }}\r\n              onPress={() => {\r\n                const params = {};\r\n                for (const parameter of action.params) {\r\n                  params[parameter] = cardInfo[parameter]\r\n                    ? cardInfo[parameter]\r\n                    : undefined;\r\n                }\r\n                fetch(action.url, {\r\n                  method: action.method,\r\n                  headers: {\r\n                    'Content-Type': 'application/json',\r\n                    userKey\r\n                  },\r\n                  body: JSON.stringify(params)\r\n                }).then((res) => {\r\n                  if (res.ok) {\r\n                    setButtonPushed(true);\r\n                  }\r\n                });\r\n              }}\r\n            >\r\n              {/* @ts-ignore */}\r\n              <Text style={myStyles.buttonText}>{action.label}</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        );\r\n      }\r\n\r\n      return (\r\n        <View>\r\n          <Card>\r\n            {finalText}\r\n            <View\r\n              style={{\r\n                paddingTop: 15,\r\n                width: '95%',\r\n                flexDirection: 'row',\r\n                alignSelf: 'center',\r\n                alignContent: 'center',\r\n                justifyContent: 'center'\r\n              }}\r\n            >\r\n              {renderedActions}\r\n            </View>\r\n          </Card>\r\n          <Divider />\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <View style={{ flexShrink: 1 }}>\r\n        <Text\r\n          style={{\r\n            fontSize: 20,\r\n            paddingLeft: 20,\r\n            paddingBottom: 0,\r\n            paddingTop: 20,\r\n            fontWeight: 'bold'\r\n          }}\r\n        >\r\n          Server Response\r\n        </Text>\r\n        <Text\r\n          style={{\r\n            fontSize: 13,\r\n            paddingLeft: 20,\r\n            paddingBottom: 10,\r\n            paddingTop: 5,\r\n            fontStyle: 'italic'\r\n          }}\r\n        >\r\n          Status Code: {status}\r\n        </Text>\r\n        <View style={{ paddingTop: 10, backgroundColor: 'lightgray' }}>\r\n          {informationToShow}\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <KeyboardAvoidingView\r\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n    >\r\n      <ScrollView style={{ height: '100%' }}>\r\n        <View style={sponsorPageStyles.container}>\r\n          <View\r\n            style={{ width: '100%', display: 'flex', alignItems: 'center' }}\r\n          >\r\n            <Text style={sponsorPageStyles.title}>{data.label}</Text>\r\n          </View>\r\n\r\n          {data.url && (\r\n            // @ts-ignore\r\n            <View style={sponsorPageStyles.address}>\r\n              <Text style={{ fontSize: 18 }}>{data.url}</Text>\r\n            </View>\r\n          )}\r\n          <View style={sponsorPageStyles.description}>\r\n            {renderTheFieldsNecessary(data.fields)}\r\n          </View>\r\n          {allFieldsFilled && (\r\n            <TouchableOpacity\r\n              onPress={() => {\r\n                sendApiData(data, userKey);\r\n                // @ts-ignore\r\n              }}\r\n              style={myStyles.button}\r\n            >\r\n              <Text style={myStyles.text}>Send Call</Text>\r\n            </TouchableOpacity>\r\n          )}\r\n          {showResponseData(data.actions)}\r\n        </View>\r\n      </ScrollView>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst sponsorPageStyles = {\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: 'white'\r\n    // alignItems: 'center',\r\n  },\r\n  header: {\r\n    marginTop: 20,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: '100%'\r\n  },\r\n  address: {\r\n    alignItems: 'center',\r\n    margin: 10,\r\n    borderColor: 'black',\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  video: {\r\n    marginTop: 20,\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  title: {\r\n    fontSize: 26,\r\n    marginLeft: 10\r\n  },\r\n  logo: {\r\n    width: '100%',\r\n    height: 100\r\n  },\r\n  description: {\r\n    borderWidth: 1,\r\n    margin: 10,\r\n    borderColor: '#5d5c5c',\r\n    borderRadius: 5,\r\n    width: '95%',\r\n    padding: 10,\r\n    backgroundColor: 'rgba(178,166,166,0.22)'\r\n  },\r\n  couponContainer: {\r\n    width: '100%',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginTop: 20,\r\n    marginBottom: 20\r\n  },\r\n  coupon: {\r\n    width: 400,\r\n    height: 267\r\n  },\r\n  imageGallery: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    margin: 10,\r\n    marginBottom: 0\r\n  },\r\n  imageStyle: {\r\n    width: 150,\r\n    height: 150,\r\n    paddingTop: 100,\r\n    margin: 5\r\n  },\r\n  headerText: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold'\r\n  }\r\n};\r\n\r\nconst myStyles = {\r\n  inputBig: {\r\n    height: 200,\r\n    backgroundColor: 'white',\r\n    margin: 12,\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  input: {\r\n    backgroundColor: '#ffffff',\r\n    height: 50,\r\n    margin: 12,\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  containerDrop: {\r\n    backgroundColor: '#ffffff',\r\n    height: 42,\r\n    margin: 12,\r\n    borderWidth: 1\r\n  },\r\n  indentedInput: {\r\n    backgroundColor: '#ffffff',\r\n    height: 50,\r\n    marginVertical: 12,\r\n    borderWidth: 1,\r\n    padding: 10,\r\n    marginRight: 12,\r\n    marginLeft: 30\r\n  },\r\n  text: {\r\n    fontSize: 16,\r\n    lineHeight: 21,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  },\r\n  buttonText: {\r\n    fontSize: 13,\r\n    flexWrap: 'wrap',\r\n    lineHeight: 15,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  },\r\n  button: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 32,\r\n    borderRadius: 4,\r\n    elevation: 3,\r\n    backgroundColor: 'black'\r\n  }\r\n};\r\n\r\nconst listingStyles = {\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center'\r\n  },\r\n  cardContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    alignSelf: 'center',\r\n    width: '95%',\r\n    height: 75,\r\n    backgroundColor: '#bbbbbb',\r\n    borderRadius: 10,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderBottomWidth: 0,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 2,\r\n    elevation: 1,\r\n    marginLeft: 5,\r\n    marginRight: 5,\r\n    marginTop: 10\r\n  },\r\n  text: {\r\n    flex: 1,\r\n    fontSize: 20,\r\n    textAlign: 'center',\r\n    marginTop: 5,\r\n    marginBottom: 5\r\n  },\r\n  image: {\r\n    width: '100%',\r\n    height: '100%',\r\n    borderRadius: 10\r\n  }\r\n};\r\n\r\nconst styles = {\r\n  imagesContainer: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-between',\r\n    padding: 10,\r\n    paddingTop: 20\r\n  },\r\n  imageContainer: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center'\r\n  },\r\n  imageLabel: {\r\n    fontSize: 12,\r\n    color: 'black',\r\n    padding: 10,\r\n    textAlign: 'center'\r\n  },\r\n  cardContainer: {\r\n    backgroundColor: '#FFF',\r\n    borderWidth: 0,\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    margin: 0,\r\n    padding: 0\r\n  },\r\n  container: {\r\n    flex: 1\r\n  }\r\n};\r\n","import { Layout, Text } from '@ui-kitten/components';\r\nimport Constants from 'expo-constants';\r\n\r\ntype HeaderProps = {\r\n  accessoryLeft?: keyof JSX.IntrinsicElements | JSX.Element;\r\n  accessoryRight?: keyof JSX.IntrinsicElements | JSX.Element;\r\n  center?: keyof JSX.IntrinsicElements | JSX.Element;\r\n  title: string;\r\n  level?: '1' | '2' | '3' | '4';\r\n};\r\n\r\nexport default function Header({\r\n  accessoryLeft,\r\n  accessoryRight,\r\n  title,\r\n  center,\r\n  level = '1'\r\n}: HeaderProps) {\r\n  return (\r\n    <Layout\r\n      level={level}\r\n      style={{\r\n        paddingTop: Constants.statusBarHeight + 10,\r\n        width: '100%',\r\n        justifyContent: 'space-between',\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        paddingHorizontal: 20\r\n      }}\r\n    >\r\n      <Layout level={level} style={{ flexDirection: 'row' }}>\r\n        {accessoryLeft}\r\n        <Text style={{ marginLeft: 10, fontSize: 20, fontWeight: '500' }}>\r\n          {title}\r\n        </Text>\r\n      </Layout>\r\n      {center}\r\n\r\n      {accessoryRight}\r\n    </Layout>\r\n  );\r\n}\r\n","import { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { Layout } from '@ui-kitten/components';\r\nimport React, { useState } from 'react';\r\nimport { Image, TouchableOpacity } from 'react-native';\r\n\r\nimport AdminHomeNavigation from './adminPanel';\r\nimport { selectDarkMode, selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport Header from '../../components/Header';\r\nimport { base_URL } from '../notifications/constants';\r\n\r\nconst AdminStack = createNativeStackNavigator();\r\nexport default function AdminPanel() {\r\n  const accessoryLeft = (\r\n    <Image\r\n      style={{\r\n        height: 28,\r\n        width: 28,\r\n        alignItems: 'center'\r\n      }}\r\n      source={require('../../../assets/logos/app-logo-transparent.png')}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <AdminStack.Navigator>\r\n      <AdminStack.Screen\r\n        options={{\r\n          header: () => {\r\n            return (\r\n              <Layout style={{ paddingBottom: 10 }}>\r\n                <Header accessoryLeft={accessoryLeft} title=\"Admin Panel\" />\r\n              </Layout>\r\n            );\r\n          }\r\n        }}\r\n        name=\"AdminStack\"\r\n        component={AdminHomeNavigation}\r\n      />\r\n    </AdminStack.Navigator>\r\n  );\r\n}\r\n","import { Button, Layout, Text } from '@ui-kitten/components';\r\n\r\nexport default function EnterCodePage({ navigation }) {\r\n  return (\r\n    <Layout style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\r\n      <Text\r\n        style={{\r\n          margin: 10\r\n        }}\r\n        category=\"s1\"\r\n      >\r\n        An email has been sent to you with a temporary password. Login to set\r\n        your new password.\r\n      </Text>\r\n      <Button\r\n        style={{ margin: 10 }}\r\n        onPress={() => {\r\n          navigation.reset({ index: 0, routes: [{ name: 'Login' }] });\r\n        }}\r\n      >\r\n        Back to Login\r\n      </Button>\r\n    </Layout>\r\n  );\r\n}\r\n","import { useNetInfo } from '@react-native-community/netinfo';\r\nimport { Button, Input, Layout, Spinner, Text } from '@ui-kitten/components';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { Keyboard } from 'react-native';\r\n\r\nimport { useResetPasswordMutation } from '../../api/usersApi';\r\n\r\nexport default function EnterEmailPage({ navigation }) {\r\n  const [email, setEmail] = useState('');\r\n  const inputRef = useRef<Input>(null);\r\n  const [resetPassword, { isLoading, isError }] = useResetPasswordMutation();\r\n  const netInfo = useNetInfo();\r\n\r\n  useEffect(() => {\r\n    if (inputRef.current) inputRef.current.focus();\r\n  }, [inputRef.current]);\r\n\r\n  const onSubmit = async () => {\r\n    if (!netInfo.isConnected) {\r\n      alert('Connect to the internet to reset your password');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await resetPassword(email).unwrap();\r\n      navigation.navigate('EnterCodePage');\r\n    } catch (e) {\r\n      console.warn('Error submitting forgot password email', e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout style={{ flex: 1, paddingTop: 30, alignItems: 'center' }}>\r\n      <Text style={{ margin: 10 }} category=\"s1\">\r\n        Enter your email to get started\r\n      </Text>\r\n\r\n      <Input\r\n        autoCapitalize=\"none\"\r\n        placeholder=\"Email\"\r\n        ref={inputRef}\r\n        style={{ margin: 10 }}\r\n        onChangeText={setEmail}\r\n        value={email}\r\n        onSubmitEditing={Keyboard.dismiss}\r\n      />\r\n      {isError && (\r\n        <Text style={{ color: 'red' }}>Email is invalid. Try again</Text>\r\n      )}\r\n      <Button\r\n        style={{ margin: 10 }}\r\n        onPress={onSubmit}\r\n        disabled={isLoading}\r\n        accessoryRight={() => (isLoading ? <Spinner status=\"basic\" /> : null)}\r\n      >\r\n        Submit\r\n      </Button>\r\n    </Layout>\r\n  );\r\n}\r\n","import { createNativeStackNavigator } from '@react-navigation/native-stack';\r\n\r\nimport EnterCodePage from './EnterCodePage';\r\nimport EnterEmailPage from './EnterEmailPage';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function ForgotPassword() {\r\n  return (\r\n    <Stack.Navigator\r\n      screenOptions={{\r\n        headerShown: false\r\n      }}\r\n    >\r\n      <Stack.Screen name=\"EnterEmailPage\" component={EnterEmailPage} />\r\n      <Stack.Screen name=\"EnterCodePage\" component={EnterCodePage} />\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n","import NetInfo from '@react-native-community/netinfo';\r\nimport { Input, Layout, Spinner, Text } from '@ui-kitten/components';\r\nimport React, { useState } from 'react';\r\nimport {\r\n  Image,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  KeyboardAvoidingView,\r\n  Keyboard,\r\n  TouchableWithoutFeedback,\r\n  Platform,\r\n  TextInput\r\n} from 'react-native';\r\n\r\nimport {\r\n  selectDarkMode,\r\n  setIsGuest,\r\n  userKeyUpdated\r\n} from '../../app/appDataSlice';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport { useLazyGetAllSectionsQuery } from '../api/classPagesApi';\r\nimport {\r\n  useLazyGetUserInfoQuery,\r\n  useLoginMutation,\r\n  useTrackLoginMutation\r\n} from '../api/usersApi';\r\nimport {\r\n  availableSectionsListUpdated,\r\n  currentSectionUpdated\r\n} from '../classPages/classPagesSlice';\r\n\r\nconst LightModeLogo = require('../../../assets/logos/owl-black-text.png');\r\nconst DarkModeLogo = require('../../../assets/logos/owl-white-text.png');\r\n\r\nexport default function Login({ navigation }) {\r\n  const [userName, setUserName] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loginError, setLoginError] = useState('');\r\n\r\n  const [login, { isLoading }] = useLoginMutation();\r\n  const [getUserInfo, { isLoading: loadingUserInfo }] =\r\n    useLazyGetUserInfoQuery();\r\n  const [trackLogin] = useTrackLoginMutation();\r\n  const [getAllSections] = useLazyGetAllSectionsQuery();\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  // const apiUserKey = useAppSelector((state) => state.appData.secure);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const passwordRef = React.useRef(null);\r\n\r\n  const handleLogin = async () => {\r\n    Keyboard.dismiss();\r\n\r\n    // Check for internet connection\r\n    const netInfo = await NetInfo.fetch();\r\n    if (!netInfo.isConnected) {\r\n      setLoginError('No internet connection');\r\n      return;\r\n    }\r\n\r\n    // Validate input\r\n    if (!userName) {\r\n      setLoginError(\"Username can't be empty\");\r\n    } else if (!password) {\r\n      setLoginError(\"Password can't be empty\");\r\n    } else {\r\n      try {\r\n        const { userKey } = await login({\r\n          userName,\r\n          password\r\n        }).unwrap();\r\n        // Save user key and data to redux store\r\n        dispatch(userKeyUpdated(userKey));\r\n        dispatch(setIsGuest(false));\r\n\r\n        // Get current section\r\n        const allSections = await getAllSections().unwrap();\r\n\r\n        dispatch(currentSectionUpdated(allSections.currentTerm));\r\n        dispatch(availableSectionsListUpdated(allSections.availableTerms));\r\n\r\n        // Get user info\r\n        getUserInfo(userKey)\r\n          .unwrap()\r\n          .then(async () => {\r\n            await trackLogin(userKey);\r\n          });\r\n\r\n        // Reset login form\r\n        setUserName('');\r\n        setPassword('');\r\n        setLoginError('');\r\n      } catch (e) {\r\n        setLoginError('Invalid username or password');\r\n        console.error('Failed to Login: ', e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const guestLogin = async () => {\r\n    Keyboard.dismiss();\r\n\r\n    // Check for internet connection\r\n    const netInfo = await NetInfo.fetch();\r\n    if (!netInfo.isConnected) {\r\n      setLoginError('No internet connection');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { userKey } = await login({\r\n        userName: '',\r\n        password: '',\r\n        isGuest: true\r\n      }).unwrap();\r\n      // Save user key and data to redux store\r\n      dispatch(userKeyUpdated(userKey));\r\n      dispatch(setIsGuest(true));\r\n\r\n      // Get user info\r\n      getUserInfo(userKey)\r\n        .unwrap()\r\n        .then(async () => {\r\n          await trackLogin(userKey);\r\n        });\r\n\r\n      // Reset login form\r\n      setUserName('');\r\n      setPassword('');\r\n      setLoginError('');\r\n    } catch (e) {\r\n      setLoginError('Invalid username or password');\r\n      console.error('Failed to Login: ', e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TouchableWithoutFeedback\r\n      style={{ flex: 1 }}\r\n      onPress={() => {\r\n        Keyboard.dismiss();\r\n      }}\r\n    >\r\n      <KeyboardAvoidingView\r\n        style={styles.container}\r\n        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n      >\r\n        <Layout\r\n          style={{\r\n            flex: 1,\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n          }}\r\n        >\r\n          {darkMode ? (\r\n            <Image source={DarkModeLogo} style={styles.logo} />\r\n          ) : (\r\n            <Image source={LightModeLogo} style={styles.logo} />\r\n          )}\r\n\r\n          <Layout style={styles.inputView}>\r\n            <Input\r\n              autoCapitalize=\"none\"\r\n              status=\"control\"\r\n              autoComplete=\"username\"\r\n              style={styles.TextInput}\r\n              placeholder=\"username / email\"\r\n              placeholderTextColor=\"white\"\r\n              keyboardType=\"email-address\"\r\n              onChangeText={(userName) => setUserName(userName)}\r\n              value={userName}\r\n              onSubmitEditing={() => passwordRef.current.focus()}\r\n              blurOnSubmit={false}\r\n            />\r\n          </Layout>\r\n          <Layout style={styles.inputView}>\r\n            <Input\r\n              style={styles.TextInput}\r\n              autoComplete=\"password\"\r\n              placeholder=\"password\"\r\n              placeholderTextColor=\"white\"\r\n              secureTextEntry\r\n              onChangeText={(password) => setPassword(password)}\r\n              value={password}\r\n              ref={passwordRef}\r\n            />\r\n          </Layout>\r\n          <TouchableOpacity\r\n            onPress={() => {\r\n              navigation.navigate('ForgotPassword');\r\n            }}\r\n          >\r\n            <Text style={styles.forgot_button}>Forgot Password?</Text>\r\n          </TouchableOpacity>\r\n          {isLoading || loadingUserInfo ? (\r\n            <Layout\r\n              style={{ position: 'absolute', backgroundColor: 'transparent' }}\r\n            >\r\n              <Spinner />\r\n            </Layout>\r\n          ) : null}\r\n\r\n          <TouchableOpacity\r\n            style={styles.loginBtn}\r\n            onPress={() => {\r\n              handleLogin();\r\n            }}\r\n          >\r\n            <Text style={{ color: '#fff' }}>LOGIN</Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity\r\n            style={{\r\n              width: '50%',\r\n              borderRadius: 25,\r\n              height: 40,\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginTop: 20,\r\n              backgroundColor: darkMode ? '#8b31e3' : 'rgb(98,111,187)',\r\n              maxWidth: 300\r\n            }}\r\n            onPress={() => {\r\n              guestLogin();\r\n            }}\r\n          >\r\n            <Text style={{ color: '#fff' }}>Try As Guest</Text>\r\n          </TouchableOpacity>\r\n          <Text style={styles.error}>{loginError}</Text>\r\n          <TouchableOpacity\r\n            style={{ width: '100%' }}\r\n            onPress={() => {\r\n              navigation.navigate('Signup');\r\n            }}\r\n          >\r\n            <Layout level=\"2\" style={styles.signupBtn}>\r\n              <Text>SIGN UP</Text>\r\n            </Layout>\r\n          </TouchableOpacity>\r\n        </Layout>\r\n      </KeyboardAvoidingView>\r\n    </TouchableWithoutFeedback>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1\r\n  },\r\n  title: {\r\n    fontSize: 30,\r\n    fontWeight: 'bold',\r\n    textAlign: 'center'\r\n  },\r\n  image: {\r\n    marginBottom: 40\r\n  },\r\n\r\n  inputView: {\r\n    flexDirection: 'row',\r\n    height: 40,\r\n    marginTop: 20,\r\n    marginLeft: 50,\r\n    marginRight: 50,\r\n    margin: 10\r\n  },\r\n\r\n  TextInput: {\r\n    backgroundColor: '#b42bba',\r\n    borderColor: '#b42bba',\r\n    color: '#fff',\r\n    borderWidth: 1,\r\n    borderRadius: 30,\r\n    width: '100%',\r\n    maxWidth: 300\r\n  },\r\n\r\n  forgot_button: {\r\n    height: 30,\r\n    marginBottom: 30\r\n  },\r\n\r\n  loginBtn: {\r\n    width: '80%',\r\n    borderRadius: 25,\r\n    height: 50,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    marginTop: 10,\r\n    backgroundColor: '#ff3f5e',\r\n    maxWidth: 300\r\n  },\r\n  guestButton: {\r\n    width: '60%',\r\n    borderRadius: 25,\r\n    height: 40,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    marginTop: 20\r\n  },\r\n  signupBtn: {\r\n    marginTop: 60,\r\n    width: '100%',\r\n    height: 50,\r\n    alignItems: 'center',\r\n    alignSelf: 'center',\r\n    justifyContent: 'center',\r\n    maxWidth: 800\r\n  },\r\n  error: {\r\n    color: 'red',\r\n    fontSize: 15\r\n  },\r\n  logo: {\r\n    width: 178,\r\n    height: 197,\r\n    marginBottom: 20\r\n  }\r\n});\r\n","import {\r\n  CheckBox,\r\n  IndexPath,\r\n  Layout,\r\n  Select,\r\n  SelectItem,\r\n  Text,\r\n  Input,\r\n  Spinner\r\n} from '@ui-kitten/components';\r\nimport React, { useState, useRef } from 'react';\r\nimport {\r\n  StyleSheet,\r\n  KeyboardAvoidingView,\r\n  Keyboard,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n  Platform\r\n} from 'react-native';\r\n\r\nimport { userKeyUpdated } from '../../../app/appDataSlice';\r\nimport { useAppDispatch } from '../../../app/hooks';\r\nimport { base_URL } from '../../../constants/admin';\r\nimport {\r\n  useGetCollegeListQuery,\r\n  useSignupUserMutation\r\n} from '../../api/usersApi';\r\n\r\nfunction Signup({ navigation }) {\r\n  const [realFirstName, setRealFirstName] = useState('');\r\n  const [realLastName, setRealLastName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [major, setMajor] = useState('');\r\n  const dispatch = useAppDispatch();\r\n  const [selectedIndex, setSelectedIndex] = useState(new IndexPath(0));\r\n  const [simplifiedSignup, setSimplifiedSignUp] = useState(false);\r\n  const [userCollege, setUserCollege] = useState({\r\n    collegeName: '',\r\n    humanReadableCollegeName: null\r\n  });\r\n\r\n  const { data: collegeList } = useGetCollegeListQuery();\r\n  const [signupUser, { isLoading: signupLoading }] = useSignupUserMutation();\r\n\r\n  const firstNameInputRef = useRef<Input>();\r\n  const lastNameInputRef = useRef<Input>();\r\n  const passwordInputRef = useRef<Input>();\r\n  const majorInputRef = useRef<Input>();\r\n\r\n  const validateInput = () => {\r\n    if (!simplifiedSignup) {\r\n      if (!realFirstName) {\r\n        alert('Please fill First Name');\r\n        return false;\r\n      }\r\n      if (!realLastName) {\r\n        alert('Please fill Last Name');\r\n        return false;\r\n      }\r\n\r\n      if (!userCollege.collegeName) {\r\n        alert('Please fill College Name');\r\n        return false;\r\n      }\r\n\r\n      if (!major) {\r\n        alert('Please fill Major');\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (!email) {\r\n      alert('Please fill Email');\r\n      return false;\r\n    }\r\n\r\n    if (!password) {\r\n      alert('Please fill Password');\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleSubmitButton = async () => {\r\n    if (validateInput()) {\r\n      try {\r\n        const body = {\r\n          email,\r\n          password,\r\n          realFirstName,\r\n          realLastName,\r\n          collegeName: userCollege.collegeName,\r\n          major\r\n        };\r\n\r\n        // Uncomment this stuff when we get the email working again\r\n        // await signupUser(body).unwrap();\r\n        // navigation.navigate('VerifyEmail');\r\n        const response = await fetch(`${base_URL}/users/noEmailUserCreation`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'content-type': 'application/json'\r\n          },\r\n          body: JSON.stringify(body)\r\n        });\r\n        if (response.ok) {\r\n          const responseUnwrapped = await response.json();\r\n          dispatch(userKeyUpdated(responseUnwrapped.password));\r\n          navigation.goBack();\r\n        } else {\r\n          throw `${(await response.json()).message}`;\r\n        }\r\n      } catch (e) {\r\n        console.warn('Signup error: ', e.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderCollegeDropDown = () => {\r\n    function handleSelection(index) {\r\n      setSelectedIndex(index);\r\n      const newObject = {\r\n        collegeName: collegeList[index.row].id,\r\n        humanReadableCollegeName: collegeList[index.row].label\r\n      };\r\n      setUserCollege(newObject);\r\n    }\r\n\r\n    return (\r\n      <Layout style={styles.containerDrop}>\r\n        <Select\r\n          placeholder=\"Choose A College\"\r\n          value={\r\n            !userCollege.humanReadableCollegeName\r\n              ? 'Selection'\r\n              : userCollege.humanReadableCollegeName\r\n          }\r\n          onFocus={Keyboard.dismiss}\r\n          selectedIndex={selectedIndex}\r\n          onSelect={handleSelection}\r\n        >\r\n          {collegeList &&\r\n            collegeList.map((college, index) => (\r\n              <SelectItem title={college.label} key={index} />\r\n            ))}\r\n        </Select>\r\n      </Layout>\r\n    );\r\n  };\r\n\r\n  const fields = [];\r\n  fields.push(\r\n    <Layout key=\"1\">\r\n      <Layout style={styles.SectionStyle}>\r\n        <Layout style={styles.labelSection}>\r\n          <Text style={styles.label}>Email</Text>\r\n        </Layout>\r\n        <Input\r\n          style={styles.inputStyle}\r\n          onChangeText={(email) => setEmail(email)}\r\n          underlineColorAndroid=\"#f000\"\r\n          placeholder=\"Enter Email\"\r\n          placeholderTextColor=\"#8b9cb5\"\r\n          defaultValue=\"\"\r\n          autoCapitalize=\"none\"\r\n          returnKeyType=\"next\"\r\n          onSubmitEditing={() =>\r\n            passwordInputRef.current ? passwordInputRef.current.focus() : null\r\n          }\r\n          blurOnSubmit={false}\r\n        />\r\n      </Layout>\r\n      <Layout style={styles.SectionStyle}>\r\n        <Layout style={styles.labelSection}>\r\n          <Text style={styles.label}>Password</Text>\r\n        </Layout>\r\n        <Input\r\n          style={styles.inputStyle}\r\n          onChangeText={(password) => setPassword(password)}\r\n          underlineColorAndroid=\"#f000\"\r\n          placeholder=\"Enter Password\"\r\n          placeholderTextColor=\"#8b9cb5\"\r\n          defaultValue=\"\"\r\n          ref={passwordInputRef}\r\n          returnKeyType=\"next\"\r\n          secureTextEntry\r\n          onSubmitEditing={() =>\r\n            firstNameInputRef.current ? firstNameInputRef.current.focus() : null\r\n          }\r\n          blurOnSubmit={false}\r\n        />\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n\r\n  if (!simplifiedSignup) {\r\n    fields.push(\r\n      <Layout key=\"2\">\r\n        <Layout style={styles.SectionStyle}>\r\n          <Layout style={styles.labelSection}>\r\n            <Text style={styles.label}>First Name</Text>\r\n          </Layout>\r\n          <Input\r\n            style={styles.inputStyle}\r\n            onChangeText={setRealFirstName}\r\n            ref={firstNameInputRef}\r\n            underlineColorAndroid=\"#f000\"\r\n            placeholder=\"Enter First Name\"\r\n            placeholderTextColor=\"#8b9cb5\"\r\n            defaultValue=\"\"\r\n            autoCapitalize=\"sentences\"\r\n            returnKeyType=\"next\"\r\n            onSubmitEditing={() =>\r\n              lastNameInputRef?.current\r\n                ? lastNameInputRef.current.focus()\r\n                : null\r\n            }\r\n            blurOnSubmit={false}\r\n          />\r\n        </Layout>\r\n\r\n        <Layout style={styles.SectionStyle}>\r\n          <Layout style={styles.labelSection}>\r\n            <Text style={styles.label}>Last Name</Text>\r\n          </Layout>\r\n          <Input\r\n            style={styles.inputStyle}\r\n            onChangeText={setRealLastName}\r\n            underlineColorAndroid=\"#f000\"\r\n            placeholder=\"Enter Last Name\"\r\n            placeholderTextColor=\"#8b9cb5\"\r\n            defaultValue=\"\"\r\n            ref={lastNameInputRef}\r\n            autoCapitalize=\"sentences\"\r\n            returnKeyType=\"next\"\r\n            onSubmitEditing={() =>\r\n              majorInputRef.current ? majorInputRef.current.focus() : null\r\n            }\r\n            blurOnSubmit={false}\r\n          />\r\n        </Layout>\r\n\r\n        <Layout style={styles.SectionStyle}>\r\n          <Layout style={styles.labelSection}>\r\n            <Text style={styles.label}>Intended Major</Text>\r\n          </Layout>\r\n          <Input\r\n            style={styles.inputStyle}\r\n            onChangeText={setMajor}\r\n            underlineColorAndroid=\"#f000\"\r\n            placeholder=\"Enter Intended Major\"\r\n            placeholderTextColor=\"#8b9cb5\"\r\n            defaultValue=\"\"\r\n            ref={majorInputRef}\r\n            blurOnSubmit\r\n          />\r\n        </Layout>\r\n\r\n        <Layout style={styles.SectionStyle}>\r\n          <Layout style={styles.labelSection}>\r\n            <Text style={styles.label}>College Name</Text>\r\n          </Layout>\r\n          {renderCollegeDropDown()}\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    // Registration Page\r\n    <Layout style={{ flex: 1 }}>\r\n      <ScrollView style={{ flex: 1 }}>\r\n        {/* Spinner */}\r\n        {signupLoading && (\r\n          <Layout\r\n            style={{\r\n              flex: 1,\r\n              position: 'absolute',\r\n              zIndex: 1,\r\n              top: '50%',\r\n              left: '50%',\r\n              backgroundColor: 'transparent'\r\n            }}\r\n          >\r\n            <Spinner />\r\n          </Layout>\r\n        )}\r\n\r\n        <Layout style={{ paddingVertical: 30, paddingHorizontal: 40 }}>\r\n          <CheckBox\r\n            checked={simplifiedSignup}\r\n            onChange={(nextChecked) => setSimplifiedSignUp(nextChecked)}\r\n          >\r\n            Simplified Signup\r\n          </CheckBox>\r\n        </Layout>\r\n\r\n        <KeyboardAvoidingView\r\n          style={{ flex: 1 }}\r\n          behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n        >\r\n          {fields}\r\n\r\n          <TouchableOpacity\r\n            style={styles.buttonStyle}\r\n            onPress={handleSubmitButton}\r\n          >\r\n            <Text style={styles.buttonTextStyle}>Register</Text>\r\n          </TouchableOpacity>\r\n        </KeyboardAvoidingView>\r\n      </ScrollView>\r\n    </Layout>\r\n  );\r\n}\r\nexport default Signup;\r\n\r\nconst styles = StyleSheet.create({\r\n  SectionStyle: {\r\n    flexDirection: 'row',\r\n    height: 40,\r\n    marginTop: 20,\r\n    marginLeft: 35,\r\n    marginRight: 35,\r\n    margin: 10\r\n  },\r\n  buttonStyle: {\r\n    backgroundColor: '#b42bba',\r\n    borderWidth: 0,\r\n    color: '#FFFFFF',\r\n    borderColor: '#7DE24E',\r\n    height: 40,\r\n    alignItems: 'center',\r\n    borderRadius: 30,\r\n    marginLeft: 35,\r\n    marginRight: 35,\r\n    marginTop: 20,\r\n    marginBottom: 20\r\n  },\r\n  buttonTextStyle: {\r\n    color: '#FFFFFF',\r\n    paddingVertical: 10,\r\n    fontSize: 16\r\n  },\r\n  inputStyle: {\r\n    flex: 1,\r\n    paddingLeft: 15,\r\n    paddingRight: 15,\r\n    borderWidth: 1,\r\n    borderRadius: 30,\r\n    borderColor: '#dadae8'\r\n  },\r\n  errorTextStyle: {\r\n    color: 'red',\r\n    textAlign: 'center',\r\n    fontSize: 14\r\n  },\r\n  successTextStyle: {\r\n    color: 'black',\r\n    textAlign: 'center',\r\n    fontSize: 18,\r\n    padding: 30\r\n  },\r\n  label: {\r\n    textAlign: 'center',\r\n    fontSize: 15,\r\n    paddingLeft: 10,\r\n    paddingRight: 10\r\n  },\r\n  labelSection: {\r\n    justifyContent: 'center'\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center'\r\n  },\r\n\r\n  text: {\r\n    fontSize: 20,\r\n    margin: 20\r\n  },\r\n  input: {\r\n    width: '80%',\r\n    margin: 20,\r\n    borderWidth: 1,\r\n    borderColor: 'black',\r\n    borderRadius: 20,\r\n    height: 40,\r\n    padding: 10\r\n  },\r\n  button: {\r\n    width: '80%',\r\n    margin: 20,\r\n    alignItems: 'center',\r\n    backgroundColor: '#b42bba',\r\n    height: 40,\r\n    borderRadius: 20,\r\n    borderColor: '#b42bba',\r\n    justifyContent: 'center'\r\n  },\r\n  buttonText: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    color: 'white'\r\n  },\r\n  containerDrop: {\r\n    minHeight: 128,\r\n    minWidth: 200\r\n  }\r\n});\r\n","import { Layout, Text, Input, Spinner } from '@ui-kitten/components';\r\nimport React from 'react';\r\nimport { StyleSheet, TouchableOpacity } from 'react-native';\r\n\r\nimport { userKeyUpdated } from '../../../app/appDataSlice';\r\nimport { useAppDispatch } from '../../../app/hooks';\r\nimport {\r\n  useVerifySignupMutation,\r\n  useLazyGetUserInfoQuery\r\n} from '../../api/usersApi';\r\n\r\nexport default function VerifyEmail() {\r\n  const [verificationCode, setVerificationCode] = React.useState('');\r\n  const [verifyCode, { isError }] = useVerifySignupMutation();\r\n  const [getUserInfo, { isLoading: getUserInfoLoading }] =\r\n    useLazyGetUserInfoQuery();\r\n  const dispatch = useAppDispatch();\r\n\r\n  const handleVerifyCodeButton = async () => {\r\n    try {\r\n      const { password } = await verifyCode(verificationCode).unwrap();\r\n      dispatch(userKeyUpdated(password));\r\n      await getUserInfo(password).unwrap();\r\n    } catch (error) {\r\n      console.warn(\"Couldn't verify code\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout style={styles.container}>\r\n      <Text style={styles.text}>\r\n        A verification code has been sent to your email. Please check your email\r\n        and enter the code below.\r\n      </Text>\r\n      {getUserInfoLoading && <Spinner />}\r\n      {isError && <Text>Error verifying code</Text>}\r\n      <Input\r\n        style={styles.input}\r\n        placeholder=\"Verification Code\"\r\n        keyboardType=\"numeric\"\r\n        onChangeText={(text) => setVerificationCode(text)}\r\n      />\r\n      <TouchableOpacity style={styles.button} onPress={handleVerifyCodeButton}>\r\n        <Text style={styles.buttonText}>Finish Signup</Text>\r\n      </TouchableOpacity>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  SectionStyle: {\r\n    flexDirection: 'row',\r\n    height: 40,\r\n    marginTop: 20,\r\n    marginLeft: 35,\r\n    marginRight: 35,\r\n    margin: 10\r\n  },\r\n  buttonStyle: {\r\n    backgroundColor: '#b42bba',\r\n    borderWidth: 0,\r\n    color: '#FFFFFF',\r\n    borderColor: '#7DE24E',\r\n    height: 40,\r\n    alignItems: 'center',\r\n    borderRadius: 30,\r\n    marginLeft: 35,\r\n    marginRight: 35,\r\n    marginTop: 20,\r\n    marginBottom: 20\r\n  },\r\n  buttonTextStyle: {\r\n    color: '#FFFFFF',\r\n    paddingVertical: 10,\r\n    fontSize: 16\r\n  },\r\n  inputStyle: {\r\n    flex: 1,\r\n    color: 'black',\r\n    paddingLeft: 15,\r\n    paddingRight: 15,\r\n    borderWidth: 1,\r\n    borderRadius: 30,\r\n    borderColor: '#dadae8'\r\n  },\r\n  errorTextStyle: {\r\n    color: 'red',\r\n    textAlign: 'center',\r\n    fontSize: 14\r\n  },\r\n  successTextStyle: {\r\n    color: 'black',\r\n    textAlign: 'center',\r\n    fontSize: 18,\r\n    padding: 30\r\n  },\r\n  description: {\r\n    color: 'black',\r\n    textAlign: 'center',\r\n    fontSize: 18,\r\n    padding: 30\r\n  },\r\n  label: {\r\n    color: 'black',\r\n    textAlign: 'center',\r\n    fontSize: 15,\r\n    paddingLeft: 10,\r\n    paddingRight: 10\r\n  },\r\n  labelSection: {\r\n    justifyContent: 'center'\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center'\r\n  },\r\n\r\n  text: {\r\n    fontSize: 20,\r\n    margin: 20\r\n  },\r\n  input: {\r\n    width: '80%',\r\n    margin: 20,\r\n    borderWidth: 1,\r\n    borderColor: 'black',\r\n    borderRadius: 20,\r\n    height: 40,\r\n    padding: 10\r\n  },\r\n  button: {\r\n    width: '80%',\r\n    margin: 20,\r\n    alignItems: 'center',\r\n    backgroundColor: '#b42bba',\r\n    height: 40,\r\n    borderRadius: 20,\r\n    borderColor: '#b42bba',\r\n    justifyContent: 'center'\r\n  },\r\n  buttonText: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    color: 'white'\r\n  },\r\n  containerDrop: {\r\n    minHeight: 128,\r\n    minWidth: 200\r\n  }\r\n});\r\n","import { HeaderBackButton } from '@react-navigation/elements';\r\nimport { Platform } from 'react-native';\r\n\r\nexport default function BackButton({ navigation, ...props }) {\r\n  return (\r\n    <HeaderBackButton\r\n      {...props}\r\n      onPress={navigation.goBack}\r\n      label=\"Back\"\r\n      labelVisible={Platform.OS === 'ios'}\r\n    />\r\n  );\r\n}\r\n","import { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { useTheme } from '@ui-kitten/components';\r\n\r\nimport SignupForm from './SignupForm';\r\nimport VerifyEmail from './VerifyEmail';\r\nimport { selectDarkMode } from '../../../app/appDataSlice';\r\nimport { useAppSelector } from '../../../app/hooks';\r\nimport BackButton from '../../../components/BackButton';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function Signup() {\r\n  const theme = useTheme();\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n\r\n  return (\r\n    <Stack.Navigator\r\n      screenOptions={({ navigation }) => ({\r\n        headerStyle: {\r\n          backgroundColor: darkMode ? theme['color-basic-800'] : '#fff'\r\n        },\r\n        headerLeft: (props) => <BackButton {...props} navigation={navigation} />\r\n      })}\r\n    >\r\n      <Stack.Screen\r\n        name=\"SignupForm\"\r\n        component={SignupForm}\r\n        options={{ title: 'Signup' }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"VerifyEmail\"\r\n        component={VerifyEmail}\r\n        options={{ title: 'Verify Email' }}\r\n      />\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n","import { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { useTheme } from '@ui-kitten/components';\r\n\r\nimport ForgotPassword from './ForgotPassword/index';\r\nimport Login from './Login';\r\nimport Signup from './Signup/index';\r\nimport { selectDarkMode } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport BackButton from '../../components/BackButton';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function Auth() {\r\n  const theme = useTheme();\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n\r\n  return (\r\n    <Stack.Navigator\r\n      screenOptions={{\r\n        headerStyle: {\r\n          backgroundColor: darkMode ? theme['color-basic-800'] : '#fff'\r\n        }\r\n      }}\r\n    >\r\n      <Stack.Screen\r\n        name=\"Login\"\r\n        component={Login}\r\n        options={{ headerShown: false }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"Signup\"\r\n        component={Signup}\r\n        options={{ headerShown: false }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"ForgotPassword\"\r\n        component={ForgotPassword}\r\n        options={{ title: 'Reset Password' }}\r\n      />\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n","import { Button, Icon, Layout, Text, useTheme } from '@ui-kitten/components';\r\nimport Modal from 'react-native-modal';\r\n\r\nimport { selectDarkMode } from '../app/appDataSlice';\r\nimport { useAppSelector } from '../app/hooks';\r\n\r\ntype ModalContainerProps = {\r\n  children: React.ReactNode;\r\n  backDropVisible: boolean;\r\n  setBackDropVisible: React.Dispatch<React.SetStateAction<boolean>>;\r\n  title: string;\r\n  clickBackdropToClose?: boolean;\r\n  modalStyle?: any;\r\n  modalProps?: any;\r\n};\r\n\r\nexport default function ModalContainer({\r\n  children,\r\n  backDropVisible,\r\n  setBackDropVisible,\r\n  title,\r\n  clickBackdropToClose = true,\r\n  modalStyle,\r\n  modalProps\r\n}: ModalContainerProps) {\r\n  const theme = useTheme();\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n\r\n  return (\r\n    <Modal\r\n      backdropOpacity={clickBackdropToClose ? 0.2 : 0}\r\n      onBackdropPress={\r\n        clickBackdropToClose ? () => setBackDropVisible(false) : undefined\r\n      }\r\n      isVisible={backDropVisible}\r\n      style={[\r\n        {\r\n          backgroundColor: darkMode\r\n            ? theme['color-basic-900']\r\n            : theme['color-basic-50'],\r\n          borderRadius: 20,\r\n          flex: 1,\r\n          marginTop: 300,\r\n          marginBottom: 50,\r\n          width: '90%',\r\n          maxWidth: 500,\r\n          alignSelf: 'center',\r\n          shadowColor: '#000',\r\n          shadowOffset: {\r\n            width: 0,\r\n            height: 12\r\n          },\r\n          shadowOpacity: 0.58,\r\n          shadowRadius: 16.0,\r\n\r\n          elevation: 11\r\n        },\r\n        modalStyle\r\n      ]}\r\n      {...modalProps}\r\n    >\r\n      <Layout\r\n        style={{\r\n          flex: 1,\r\n          alignItems: 'center',\r\n          borderRadius: 20,\r\n          backgroundColor: darkMode\r\n            ? theme['color-basic-900']\r\n            : theme['color-basic-100']\r\n        }}\r\n      >\r\n        <Button\r\n          appearance=\"ghost\"\r\n          style={{\r\n            position: 'absolute',\r\n            top: 0,\r\n            right: 0,\r\n            flex: 1,\r\n            borderRadius: 20\r\n          }}\r\n          accessoryRight={(props) => (\r\n            <Icon pack=\"fontAwesome\" name=\"angle-down\" {...props} />\r\n          )}\r\n          onPress={() => setBackDropVisible(false)}\r\n        />\r\n        <Text category=\"h5\" style={{ marginVertical: 15 }}>\r\n          {title}\r\n        </Text>\r\n        {children}\r\n      </Layout>\r\n    </Modal>\r\n  );\r\n}\r\n","import {\r\n  IndexPath,\r\n  Layout,\r\n  Select,\r\n  SelectItem,\r\n  Text\r\n} from '@ui-kitten/components';\r\nimport React, { useState } from 'react';\r\nimport { TouchableOpacity } from 'react-native';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport { useLazyGetAllClassesQuery } from '../api/classPagesApi';\r\nimport { usersApiSlice } from '../api/usersApi';\r\nimport { currentSectionUpdated } from './classPagesSlice';\r\n\r\nexport default function SelectTerm({ navigation }) {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const availableSections = useAppSelector(\r\n    (state) => state.appData.classPages.availableSections\r\n  );\r\n  const userKey = useAppSelector((state) => state.appData.secure.userKey);\r\n  const currentSection = useAppSelector(\r\n    (state) => state.appData.classPages.currentSection\r\n  );\r\n\r\n  const { data: userDataCache } =\r\n    usersApiSlice.endpoints.getUserInfo.useQueryState(userKey, {\r\n      skip: !userKey\r\n    });\r\n  const [getAllClasses] = useLazyGetAllClassesQuery();\r\n\r\n  const startIndexValue =\r\n    availableSections.findIndex((term) => term == currentSection) || 0;\r\n\r\n  const [selectedSectionIndex, setSelectedSectionIndex] = useState<IndexPath>(\r\n    new IndexPath(startIndexValue)\r\n  );\r\n\r\n  const saveChanges = () => {\r\n    if (availableSections[selectedSectionIndex.row] !== currentSection) {\r\n      try {\r\n        getAllClasses({\r\n          userKey,\r\n          collegeName: userDataCache.collegeName,\r\n          courseTerm: availableSections[selectedSectionIndex.row]\r\n        }).unwrap();\r\n\r\n        dispatch(\r\n          currentSectionUpdated(availableSections[selectedSectionIndex.row])\r\n        );\r\n      } catch (e) {\r\n        console.warn('Changing section: could not fetch classes', e);\r\n      }\r\n    }\r\n\r\n    navigation.goBack();\r\n  };\r\n\r\n  return (\r\n    <Layout style={{ flex: 1 }}>\r\n      <Layout\r\n        style={{\r\n          flexDirection: 'row',\r\n          justifyContent: 'space-between',\r\n          margin: 20,\r\n          marginTop: 60\r\n        }}\r\n      >\r\n        <TouchableOpacity\r\n          onPress={() => {\r\n            navigation.goBack();\r\n          }}\r\n        >\r\n          <Text>Cancel</Text>\r\n        </TouchableOpacity>\r\n\r\n        <Text category=\"s1\">Select Term</Text>\r\n\r\n        <TouchableOpacity onPress={saveChanges}>\r\n          <Text>Save</Text>\r\n        </TouchableOpacity>\r\n      </Layout>\r\n\r\n      <Select\r\n        style={{ margin: 20 }}\r\n        label=\"Term\"\r\n        value={availableSections[selectedSectionIndex.row]}\r\n        selectedIndex={selectedSectionIndex}\r\n        onSelect={(index: IndexPath) => {\r\n          setSelectedSectionIndex(index);\r\n        }}\r\n      >\r\n        {availableSections.map((term, index) => (\r\n          <SelectItem key={index} title={term} />\r\n        ))}\r\n      </Select>\r\n    </Layout>\r\n  );\r\n}\r\n","import { apiSlice } from '../api/apiSlice';\r\n\r\nexport const base_URL = 'https://api.athenaserver.com:5678/api';\r\n","import { Layout, Text } from '@ui-kitten/components';\r\n\r\nexport default function Message({ title, item }) {\r\n  return (\r\n    <Layout\r\n      style={{\r\n        flex: 1,\r\n        marginTop: 10,\r\n        alignItems: 'center',\r\n        backgroundColor: 'transparent'\r\n      }}\r\n    >\r\n      <Text style={{ margin: 20, color: '#fff' }}>{title}</Text>\r\n      {item}\r\n    </Layout>\r\n  );\r\n}\r\n","import { Layout, Input, Button, Icon, useTheme } from '@ui-kitten/components';\r\nimport { useState } from 'react';\r\nimport {\r\n  Keyboard,\r\n  TouchableOpacity,\r\n  LayoutAnimation,\r\n  TouchableWithoutFeedback\r\n} from 'react-native';\r\n\r\nimport { selectDarkMode } from '../app/appDataSlice';\r\nimport { useAppSelector } from '../app/hooks';\r\n\r\ntype SearchBarProps = {\r\n  onChangeText: (text: string) => void;\r\n  searchTerm: string;\r\n  placeholder?: string;\r\n  accessoryLeft?: any;\r\n  inputProps?: any;\r\n  inputStyle?: any;\r\n  inputRef?: any;\r\n  cancelButtonAction?: () => void;\r\n  onSubmitEditing?: () => void;\r\n  alwaysShowCancelButton?: boolean;\r\n  cancelButtonStatus?:\r\n    | 'basic'\r\n    | 'primary'\r\n    | 'success'\r\n    | 'info'\r\n    | 'warning'\r\n    | 'danger';\r\n};\r\n\r\nexport default function SearchBar({\r\n  onChangeText,\r\n  searchTerm,\r\n  accessoryLeft,\r\n  placeholder,\r\n  inputRef,\r\n  inputStyle,\r\n  inputProps,\r\n  cancelButtonAction = () => {},\r\n  onSubmitEditing = () => {},\r\n  cancelButtonStatus = 'warning',\r\n  alwaysShowCancelButton = false\r\n}: SearchBarProps) {\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const theme = useTheme();\r\n\r\n  const select = () => {\r\n    setSelected(true);\r\n    if (!alwaysShowCancelButton) {\r\n      LayoutAnimation.configureNext(\r\n        LayoutAnimation.create(100, 'linear', 'scaleX')\r\n      );\r\n    }\r\n  };\r\n\r\n  const deselect = () => {\r\n    setSelected(false);\r\n    if (!alwaysShowCancelButton) {\r\n      LayoutAnimation.configureNext(\r\n        LayoutAnimation.create(100, 'linear', 'opacity')\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      style={{\r\n        backgroundColor: 'transparent',\r\n        flexDirection: 'row'\r\n      }}\r\n    >\r\n      {accessoryLeft}\r\n\r\n      <Input\r\n        style={{\r\n          ...inputStyle,\r\n          borderRadius: 20,\r\n          flex: 1,\r\n          borderWidth: 1,\r\n          borderColor: darkMode\r\n            ? theme['color-basic-500']\r\n            : theme['color-basic-100']\r\n        }}\r\n        placeholderTextColor={theme['color-basic-500']}\r\n        accessoryRight={\r\n          selected && searchTerm.length > 0\r\n            ? (props) => (\r\n                <TouchableOpacity onPress={() => onChangeText('')}>\r\n                  <Icon {...props} name=\"times\" pack=\"fontAwesome\" />\r\n                </TouchableOpacity>\r\n              )\r\n            : null\r\n        }\r\n        onFocus={select}\r\n        onBlur={deselect}\r\n        placeholder={placeholder}\r\n        value={searchTerm}\r\n        onChangeText={(text) => {\r\n          onChangeText(text);\r\n        }}\r\n        onSubmitEditing={onSubmitEditing}\r\n        ref={inputRef}\r\n        autoCorrect={false}\r\n        {...inputProps}\r\n      />\r\n\r\n      {alwaysShowCancelButton || selected ? (\r\n        <Button\r\n          size=\"small\"\r\n          status={cancelButtonStatus}\r\n          appearance=\"ghost\"\r\n          onPress={() => {\r\n            Keyboard.dismiss();\r\n            cancelButtonAction();\r\n          }}\r\n        >\r\n          Cancel\r\n        </Button>\r\n      ) : null}\r\n    </Layout>\r\n  );\r\n}\r\n","export const RENDERED_RESULTS_LIMIT = 10;\r\nexport const NEW_REVIEW_FIELDS = [\r\n  {\r\n    label: 'Professor',\r\n    id: 'professor',\r\n    mandatory: false,\r\n    type: 'DropDown',\r\n    options: []\r\n  },\r\n  {\r\n    label: 'Grade',\r\n    id: 'grade',\r\n    type: 'DropDown',\r\n    mandatory: false,\r\n    options: [\r\n      {\r\n        label: 'A+',\r\n        id: 'A'\r\n      },\r\n      {\r\n        label: 'A',\r\n        id: 'A'\r\n      },\r\n      {\r\n        label: 'A-',\r\n        id: 'A'\r\n      },\r\n      {\r\n        label: 'B+',\r\n        id: 'B'\r\n      },\r\n      {\r\n        label: 'B',\r\n        id: 'B'\r\n      },\r\n      {\r\n        label: 'B-',\r\n        id: 'B'\r\n      },\r\n      {\r\n        label: 'C+',\r\n        id: 'C'\r\n      },\r\n      {\r\n        label: 'C',\r\n        id: 'C'\r\n      },\r\n      {\r\n        label: 'C-',\r\n        id: 'C'\r\n      },\r\n      {\r\n        label: 'D+',\r\n        id: 'D'\r\n      },\r\n      {\r\n        label: 'D',\r\n        id: 'D'\r\n      },\r\n      {\r\n        label: 'D-',\r\n        id: 'D'\r\n      },\r\n      {\r\n        label: 'F+',\r\n        id: 'F'\r\n      },\r\n      {\r\n        label: 'F',\r\n        id: 'F'\r\n      },\r\n      {\r\n        label: 'F-',\r\n        id: 'F'\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    label: 'Time Spent in Hours (ie: 7)',\r\n    id: 'timeSpent',\r\n    mandatory: false,\r\n    type: 'String'\r\n  }\r\n];\r\n","import { Entypo, Ionicons } from '@expo/vector-icons';\r\nimport { Divider, Layout, Text, useTheme } from '@ui-kitten/components';\r\nimport React, { useRef } from 'react';\r\nimport {\r\n  Platform,\r\n  ScrollView,\r\n  TouchableOpacity,\r\n  useWindowDimensions\r\n} from 'react-native';\r\nimport DraggableFlatList, {\r\n  RenderItemParams,\r\n  ScaleDecorator\r\n} from 'react-native-draggable-flatlist';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { classSelected } from './classPagesSlice';\r\nimport { BottomSheetMethods } from '@gorhom/bottom-sheet/lib/typescript/types';\r\n\r\ntype AddedClassesProps = {\r\n  setAddedClassesVisible: (visible: boolean) => void;\r\n  addedClasses: string[];\r\n  handleRemoveClass: (courseCode: string, masterCourseCode: string) => void;\r\n  darkMode: boolean;\r\n  handleSwapAddedClasses: (from: number, to: number) => void;\r\n  bottomSheetRef: React.MutableRefObject<BottomSheetMethods>;\r\n};\r\n\r\nexport default function AddedClasses({\r\n  setAddedClassesVisible,\r\n  addedClasses,\r\n  handleRemoveClass,\r\n  darkMode,\r\n  handleSwapAddedClasses,\r\n  bottomSheetRef\r\n}: AddedClassesProps) {\r\n  const navigation = useNavigation();\r\n  const dispatch = useAppDispatch();\r\n  const theme = useTheme();\r\n  const windowHeight = useWindowDimensions().height;\r\n\r\n  const allClassesList = useAppSelector(\r\n    (state) => state.appData.classPages.classes\r\n  );\r\n\r\n  const addedClassesList: [\r\n    masterCourseCode: string,\r\n    courseCode: string,\r\n    courseName: string\r\n  ][] = addedClasses.map((courseCode) => {\r\n    const courseCodeParts = courseCode.split('-');\r\n    const masterCourseCode = courseCodeParts\r\n      .slice(0, courseCodeParts.length - 1)\r\n      .join('-');\r\n    const { courseName } = allClassesList[masterCourseCode];\r\n    return [masterCourseCode, courseCode, courseName];\r\n  });\r\n\r\n  function handleClassSelected(courseCode: string) {\r\n    dispatch(classSelected(courseCode));\r\n    setAddedClassesVisible(false);\r\n    if (Platform.OS === 'web') {\r\n      navigation.navigate('SingleClassPage');\r\n    } else {\r\n      bottomSheetRef.current?.snapToIndex(0);\r\n    }\r\n  }\r\n\r\n  const renderItem = ({\r\n    item: [masterCourseCode, courseCode, courseName],\r\n    drag,\r\n    isActive,\r\n    getIndex\r\n  }: RenderItemParams<[string, string, string]>) => {\r\n    return (\r\n      <ScaleDecorator>\r\n        <Layout\r\n          style={{\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            paddingVertical: 7,\r\n            paddingHorizontal: 10,\r\n            backgroundColor: isActive ? 'lightblue' : 'transparent'\r\n            // ? theme['color-basic-900']\r\n            // : theme['color-basic-100']\r\n          }}\r\n        >\r\n          <Layout\r\n            style={{ flexDirection: 'row', backgroundColor: 'transparent' }}\r\n          >\r\n            <TouchableOpacity disabled={isActive} onLongPress={drag}>\r\n              <Ionicons name=\"reorder-three\" size={28} />\r\n            </TouchableOpacity>\r\n            <Layout style={{ backgroundColor: 'transparent' }}>\r\n              <TouchableOpacity\r\n                onPress={() => {\r\n                  handleClassSelected(courseCode.slice(0, -3));\r\n                }}\r\n              >\r\n                <Text category=\"s1\">{courseName}</Text>\r\n                <Text category=\"p2\">{courseCode}</Text>\r\n              </TouchableOpacity>\r\n            </Layout>\r\n          </Layout>\r\n\r\n          <TouchableOpacity\r\n            onPress={() => handleRemoveClass(courseCode, masterCourseCode)}\r\n          >\r\n            <Entypo name=\"cross\" size={28} color=\"red\" />\r\n          </TouchableOpacity>\r\n        </Layout>\r\n      </ScaleDecorator>\r\n    );\r\n  };\r\n\r\n  const renderFlatList = () => (\r\n    <DraggableFlatList\r\n      contentContainerStyle={{ maxWidth: 500 }}\r\n      automaticallyAdjustsScrollIndicatorInsets\r\n      indicatorStyle={darkMode ? 'white' : 'black'}\r\n      showsVerticalScrollIndicator\r\n      ListEmptyComponent={\r\n        <Text>\r\n          No classes yet... Click the{' '}\r\n          <Text style={{ fontWeight: 'bold' }}>+</Text> next to a class to see\r\n          it here\r\n        </Text>\r\n      }\r\n      ItemSeparatorComponent={() => <Divider />}\r\n      data={addedClassesList}\r\n      onDragEnd={({ from, to }) => {\r\n        handleSwapAddedClasses(from, to);\r\n      }}\r\n      keyExtractor={(item) => item[1]}\r\n      renderItem={renderItem}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      style={{\r\n        flex: Platform.OS === 'web' ? undefined : 1,\r\n        backgroundColor: darkMode\r\n          ? theme['color-basic-900']\r\n          : theme['color-basic-100']\r\n      }}\r\n    >\r\n      {Platform.OS === 'web' ? (\r\n        <ScrollView style={{ maxHeight: windowHeight - 450 }}>\r\n          {renderFlatList()}\r\n        </ScrollView>\r\n      ) : (\r\n        <>{renderFlatList()}</>\r\n      )}\r\n    </Layout>\r\n  );\r\n}\r\n","import { FontAwesome, FontAwesome5 } from '@expo/vector-icons';\r\nimport { Layout, Text } from '@ui-kitten/components';\r\nimport { useRef } from 'react';\r\nimport { StyleSheet, Animated, TouchableOpacity, Platform } from 'react-native';\r\n\r\nexport default function ClassListItemItem({\r\n  courseCode,\r\n  seatsAvailable,\r\n  seatsFilled,\r\n  handleAddClass,\r\n  handleRemoveClass,\r\n  darkMode,\r\n  added,\r\n  masterCourseCode,\r\n  handleClassSelected\r\n}) {\r\n  const selectedAnim = useRef(new Animated.Value(1)).current;\r\n\r\n  return (\r\n    <TouchableOpacity\r\n      style={{ flex: 1 }}\r\n      onPress={() => {\r\n        handleClassSelected(masterCourseCode);\r\n      }}\r\n    >\r\n      <Layout style={styles.dropDownItem}>\r\n        <Text>{`\\u2022 ${courseCode}`}</Text>\r\n        <Text\r\n          style={seatsAvailable > 0 ? styles.isAvailable : styles.notAvailable}\r\n        >\r\n          {seatsFilled} /{seatsFilled + seatsAvailable}\r\n        </Text>\r\n        {/* Add / Remove Class */}\r\n        <TouchableOpacity\r\n          activeOpacity={1}\r\n          onPress={() => {\r\n            if (added) {\r\n              handleRemoveClass(courseCode, masterCourseCode);\r\n            } else {\r\n              handleAddClass(courseCode, masterCourseCode);\r\n            }\r\n            if (Platform.OS !== 'web') {\r\n              Animated.sequence([\r\n                Animated.spring(selectedAnim, {\r\n                  toValue: 0.0,\r\n                  speed: 16,\r\n                  useNativeDriver: true\r\n                })\r\n              ]).start(() => {\r\n                Animated.spring(selectedAnim, {\r\n                  toValue: 1,\r\n                  speed: 16,\r\n                  useNativeDriver: true\r\n                }).start();\r\n              });\r\n            }\r\n          }}\r\n        >\r\n          <Animated.View\r\n            style={{\r\n              width: 50,\r\n              alignItems: 'center',\r\n              transform: [\r\n                {\r\n                  scale: selectedAnim\r\n                }\r\n              ]\r\n            }}\r\n          >\r\n            <FontAwesome5\r\n              style={{ padding: 5 }}\r\n              size={24}\r\n              name={added ? 'times' : 'plus'}\r\n              color={darkMode ? 'white' : 'black'}\r\n            />\r\n          </Animated.View>\r\n        </TouchableOpacity>\r\n        {/* <FontAwesome\r\n          style={{ padding: 5 }}\r\n          size={24}\r\n          name={added ? 'star' : 'star-o'}\r\n          color={darkMode ? 'white' : 'black'}\r\n        /> */}\r\n      </Layout>\r\n    </TouchableOpacity>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  list__container: {\r\n    margin: 10,\r\n    marginLeft: 0,\r\n    height: '90%',\r\n    width: '100%'\r\n  },\r\n  addedClassesContainer: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    width: '60%',\r\n    borderTopRightRadius: 20,\r\n    borderBottomRightRadius: 20,\r\n    borderColor: '#c2c2c2',\r\n    backgroundColor: '#f7f7f7',\r\n    paddingTop: 5,\r\n    borderTopWidth: 1.5,\r\n    borderBottomWidth: 1.5,\r\n    borderRightWidth: 1.5\r\n  },\r\n  addedClasses: {\r\n    position: 'absolute',\r\n    right: 3,\r\n    top: 3,\r\n    padding: 7,\r\n    margin: 5,\r\n    backgroundColor: '#c9c9c9',\r\n    borderRadius: 100\r\n  },\r\n  item: {\r\n    marginBottom: 10,\r\n    marginTop: 10\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n    marginBottom: 5\r\n  },\r\n  buttonContainer: {\r\n    right: 0,\r\n    position: 'absolute',\r\n    width: 50,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    height: '100%'\r\n  },\r\n  button: {\r\n    padding: 5,\r\n    borderColor: 'grey'\r\n  },\r\n  dropDown: {\r\n    backgroundColor: '#f7f7f7',\r\n    paddingLeft: 30,\r\n    paddingBottom: 10,\r\n    paddingTop: 10\r\n  },\r\n  dropDownItem: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    height: 54\r\n  },\r\n  isAvailable: {\r\n    color: 'green'\r\n  },\r\n  notAvailable: {\r\n    color: 'red'\r\n  },\r\n  loadingMessage: {\r\n    fontSize: 20,\r\n    color: 'white',\r\n    alignSelf: 'center',\r\n    fontStyle: 'italic'\r\n  },\r\n  loadingMessageRefresh: {\r\n    fontSize: 15,\r\n    paddingTop: 20,\r\n    color: 'white',\r\n    alignSelf: 'center',\r\n    fontWeight: 'bold'\r\n  },\r\n  filters: {\r\n    backgroundColor: 'white',\r\n    alignItems: 'center',\r\n    padding: 10\r\n  }\r\n});\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport { Layout, Text } from '@ui-kitten/components';\r\nimport { useMemo } from 'react';\r\nimport {\r\n  LayoutAnimation,\r\n  Platform,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  UIManager\r\n} from 'react-native';\r\n\r\nimport ClassListItemItem from './ClassListItemItem';\r\n\r\nif (\r\n  Platform.OS === 'android' &&\r\n  UIManager.setLayoutAnimationEnabledExperimental\r\n) {\r\n  UIManager.setLayoutAnimationEnabledExperimental(true);\r\n}\r\n\r\nexport default function Item({\r\n  courseName,\r\n  masterCourseCode,\r\n  schedule,\r\n  menuOpen,\r\n  setIsMenuOpen,\r\n  darkMode,\r\n  handleClassSelected,\r\n  handleAddClass,\r\n  handleRemoveClass,\r\n  inItem\r\n}) {\r\n  const memoizedItem = useMemo(() => {\r\n    return (\r\n      <Layout\r\n        style={{\r\n          borderRadius: 20,\r\n          opacity: 1,\r\n          marginTop: 7,\r\n          marginRight: 9,\r\n          marginLeft: 9\r\n        }}\r\n      >\r\n        {/* Name and master coursecode */}\r\n        <Layout style={{ marginHorizontal: 20 }}>\r\n          <Layout>\r\n            <TouchableOpacity\r\n              onPress={() => {\r\n                handleClassSelected(masterCourseCode);\r\n              }}\r\n            >\r\n              <Layout style={styles.item}>\r\n                <Text style={styles.title}>{courseName}</Text>\r\n                <Text>{masterCourseCode}</Text>\r\n              </Layout>\r\n            </TouchableOpacity>\r\n\r\n            {/* Dropdown Menu Toggle */}\r\n            <TouchableOpacity\r\n              style={styles.buttonContainer}\r\n              onPress={() => {\r\n                if (menuOpen === masterCourseCode) {\r\n                  setIsMenuOpen('');\r\n                  LayoutAnimation.configureNext({\r\n                    duration: 730,\r\n                    create: { type: 'easeInEaseOut', property: 'opacity' },\r\n                    update: { type: 'spring', springDamping: 0.8 }\r\n                  });\r\n                } else {\r\n                  setIsMenuOpen(masterCourseCode);\r\n                  LayoutAnimation.configureNext({\r\n                    duration: Platform.OS === 'android' ? 500 : 730,\r\n                    create: { type: 'easeInEaseOut', property: 'opacity' },\r\n                    update: { type: 'spring', springDamping: 0.8 }\r\n                  });\r\n                }\r\n              }}\r\n            >\r\n              <Layout style={styles.button}>\r\n                <FontAwesome5\r\n                  name={\r\n                    menuOpen === masterCourseCode\r\n                      ? 'chevron-up'\r\n                      : 'chevron-down'\r\n                  }\r\n                  size={20}\r\n                  color={darkMode ? 'white' : 'black'}\r\n                />\r\n              </Layout>\r\n            </TouchableOpacity>\r\n          </Layout>\r\n\r\n          {/* Dropdown Menu */}\r\n          {menuOpen === masterCourseCode && (\r\n            <Layout>\r\n              {schedule.map(\r\n                ({ _id, courseCode, seatsAvailable, seatsFilled, added }) => (\r\n                  <ClassListItemItem\r\n                    key={_id}\r\n                    courseCode={courseCode}\r\n                    seatsAvailable={seatsAvailable}\r\n                    seatsFilled={seatsFilled}\r\n                    handleAddClass={handleAddClass}\r\n                    handleRemoveClass={handleRemoveClass}\r\n                    darkMode={darkMode}\r\n                    added={added}\r\n                    masterCourseCode={masterCourseCode}\r\n                    handleClassSelected={handleClassSelected}\r\n                  />\r\n                )\r\n              )}\r\n            </Layout>\r\n          )}\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }, [menuOpen, inItem, darkMode]);\r\n\r\n  // useTraceUpdate(memoizedItem);\r\n  return memoizedItem;\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  list__container: {\r\n    margin: 10,\r\n    marginLeft: 0,\r\n    height: '90%',\r\n    width: '100%'\r\n  },\r\n  addedClassesContainer: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    width: '60%',\r\n    borderTopRightRadius: 20,\r\n    borderBottomRightRadius: 20,\r\n    borderColor: '#c2c2c2',\r\n    backgroundColor: '#f7f7f7',\r\n    paddingTop: 5,\r\n    borderTopWidth: 1.5,\r\n    borderBottomWidth: 1.5,\r\n    borderRightWidth: 1.5\r\n  },\r\n  addedClasses: {\r\n    position: 'absolute',\r\n    right: 3,\r\n    top: 3,\r\n    padding: 7,\r\n    margin: 5,\r\n    backgroundColor: '#c9c9c9',\r\n    borderRadius: 100\r\n  },\r\n  item: {\r\n    marginBottom: 10,\r\n    marginTop: 10\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n    marginBottom: 5,\r\n    marginRight: 30\r\n  },\r\n  buttonContainer: {\r\n    right: 0,\r\n    position: 'absolute',\r\n    width: 50,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    height: '100%'\r\n  },\r\n  button: {\r\n    padding: 5,\r\n    borderColor: 'grey'\r\n  },\r\n  dropDown: {\r\n    backgroundColor: '#f7f7f7',\r\n    paddingLeft: 30,\r\n    paddingBottom: 10,\r\n    paddingTop: 10\r\n  },\r\n  dropDownItem: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    height: 54\r\n  },\r\n  isAvailable: {\r\n    color: 'green'\r\n  },\r\n  notAvailable: {\r\n    color: 'red'\r\n  },\r\n  loadingMessage: {\r\n    fontSize: 20,\r\n    color: 'white',\r\n    alignSelf: 'center',\r\n    fontStyle: 'italic'\r\n  },\r\n  loadingMessageRefresh: {\r\n    fontSize: 15,\r\n    paddingTop: 20,\r\n    color: 'white',\r\n    alignSelf: 'center',\r\n    fontWeight: 'bold'\r\n  },\r\n  addClassButton: {\r\n    padding: 15\r\n  },\r\n  filters: {\r\n    backgroundColor: 'white',\r\n    alignItems: 'center',\r\n    padding: 10\r\n  }\r\n});\r\n","import {\r\n  Button,\r\n  CheckBox,\r\n  Divider,\r\n  Layout,\r\n  Text,\r\n  Toggle,\r\n  useTheme\r\n} from '@ui-kitten/components';\r\nimport { useState } from 'react';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport {\r\n  classPagesSlice,\r\n  filtersReset,\r\n  filtersSaved,\r\n  isHMCUpdated\r\n} from './classPagesSlice';\r\n\r\nexport default function FilterClasses({ darkMode, setFiltersMenuVisible }) {\r\n  const theme = useTheme();\r\n  const initialFilters = classPagesSlice.getInitialState().filters;\r\n  const filters = useAppSelector((state) => state.appData.classPages.filters);\r\n  const isHMC = useAppSelector((state) => state.appData.classPages.isHMC);\r\n\r\n  const [colleges, setColleges] = useState(filters.colleges);\r\n  const [filterConflicts, setFilterConflicts] = useState(\r\n    filters.filterConflicts\r\n  );\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const onChangeIsHMC = (change: boolean) => {\r\n    dispatch(isHMCUpdated(change));\r\n  };\r\n\r\n  const onChangeFilterCollege = (college: string, change: boolean) => {\r\n    setColleges({ ...colleges, [college]: change });\r\n  };\r\n\r\n  const resetFilters = () => {\r\n    setColleges(initialFilters.colleges);\r\n    setFilterConflicts(initialFilters.filterConflicts);\r\n    dispatch(filtersReset());\r\n  };\r\n\r\n  const saveFilters = () => {\r\n    dispatch(filtersSaved({ colleges, filterConflicts }));\r\n    setFiltersMenuVisible(false);\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      style={{\r\n        backgroundColor: darkMode\r\n          ? theme['color-basic-900']\r\n          : theme['color-basic-100'],\r\n        alignItems: 'center',\r\n        padding: 10\r\n      }}\r\n    >\r\n      <Layout\r\n        style={{\r\n          flexDirection: 'row',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          marginBottom: 10,\r\n          backgroundColor: darkMode\r\n            ? theme['color-basic-900']\r\n            : theme['color-basic-100']\r\n        }}\r\n      >\r\n        <Text>4C Credits </Text>\r\n        <Toggle\r\n          checked={isHMC}\r\n          onChange={(change) => {\r\n            onChangeIsHMC(change);\r\n          }}\r\n        />\r\n        <Text> HMC Credits</Text>\r\n      </Layout>\r\n      <Divider />\r\n\r\n      <CheckBox\r\n        style={{ marginTop: 20 }}\r\n        checked={filterConflicts}\r\n        onChange={(bool) => setFilterConflicts(bool)}\r\n      >\r\n        Filter Conflicting Classes\r\n      </CheckBox>\r\n\r\n      <Text style={{ marginTop: 20, marginBottom: 5 }}>Colleges</Text>\r\n\r\n      <Layout\r\n        style={{\r\n          flexDirection: 'row',\r\n          justifyContent: 'center',\r\n          alignItems: 'center'\r\n        }}\r\n      >\r\n        {Object.keys(colleges).map((college) => (\r\n          <CheckBox\r\n            style={{\r\n              backgroundColor: darkMode\r\n                ? theme['color-basic-900']\r\n                : theme['color-basic-100']\r\n            }}\r\n            key={college}\r\n            checked={colleges[college]}\r\n            onChange={(change) => {\r\n              onChangeFilterCollege(college, change);\r\n            }}\r\n          >\r\n            {college}\r\n          </CheckBox>\r\n        ))}\r\n      </Layout>\r\n      <Button style={{ marginTop: 20 }} onPress={saveFilters}>\r\n        Update Results\r\n      </Button>\r\n      <Button\r\n        size=\"small\"\r\n        style={{ marginTop: 20 }}\r\n        status=\"info\"\r\n        onPress={resetFilters}\r\n      >\r\n        Reset Filters\r\n      </Button>\r\n    </Layout>\r\n  );\r\n}\r\n","// This is going to take forever...\r\nimport { Region } from 'react-native-maps';\r\n\r\nexport const locations = {\r\n  ClaremontColleges: [34.10042611094802, -117.71002008183225],\r\n  'Steele Hall': [34.10484995720829, -117.71210324868221],\r\n  'Adams Hall': [32.76290904884907, -117.0662288298868],\r\n  'Andrew Building': [34.0998138672686, -117.7139029825534],\r\n  'Andrew Hall': [34.0998138672686, -117.7139029825534],\r\n  'Andrew Science Hall': [34.0998138672686, -117.7139029825534],\r\n  'Andrew Science Building': [34.0998138672686, -117.7139029825534],\r\n  'Hahn Social Science Bldg': [34.098126371324604, -117.71603190000098],\r\n  'Avery Hall': [34.10402559390241, -117.7059215470358],\r\n  'Bauer Center': [34.10625935916369, -117.70861091635064],\r\n  'Broad Center': [34.10494505589454, -117.70672332698616],\r\n  'Bernard Hall': [34.10435220581155, -117.70632440303753],\r\n  'Broad Hall': [34.10462192392436, -117.7058712693149],\r\n  'Beckman Hall': [34.106128887593115, -117.71251107536439],\r\n  'Balch Hall': [34.10345253373929, -117.71128438546123],\r\n  Brackett: [34.09834700926052, -117.71012299276501],\r\n  'Brackett Observatory': [34.09834700926052, -117.71012299276501],\r\n  'Baxter Hall': [34.10466728950935, -117.71187640303745],\r\n  'Biszantz Tennis Center': [34.10095490591795, -117.70630717402211],\r\n  'Carnegie Building': [34.09813556541387, -117.7153908567008],\r\n  Carnegie: [34.09813556541387, -117.7153908567008],\r\n  'Carnegie Bldg': [34.09813556541387, -117.7153908567008],\r\n  'Richardson Dance Studio': [34.10315111680064, -117.7099604470359],\r\n  Edmunds: [34.0998600356232, -117.71319481917635],\r\n  'Fletcher Hall': [34.104073077554126, -117.70639700470716],\r\n  'Galileo Hall': [34.10625489220558, -117.71180151450122],\r\n  'Honnold/Mudd Library': [34.10217613878248, -117.71228898240652],\r\n  Honnold: [34.10217613878248, -117.71228898240652],\r\n  'Claremont Colleges Library': [34.10217613878248, -117.71228898240652],\r\n  'Mudd Library': [34.10217613878248, -117.71228898240652],\r\n  'Humanities Building': [34.103735329211226, -117.71001297587144],\r\n  'Jacobs Science Center': [34.105831090704534, -117.7117513875151],\r\n  'Keck Laboratories': [34.09325008938014, -117.72347845495186],\r\n  'Keck Graduate Institute': [34.09325008938014, -117.72347845495186],\r\n  'Kravis Center': [34.10187820435941, -117.71108730125341],\r\n  'The Kravis Center': [34.10187820435941, -117.71108730125341],\r\n  'The Kravis Center LC': [34.10187820435941, -117.71108730125341],\r\n  'Kravis Center LC': [34.10187820435941, -117.71108730125341],\r\n  'Keck Science Center': [34.10308083314274, -117.70782900285776],\r\n  'Bridges Hall of Music': [34.09741077681766, -117.71380091635093],\r\n  'Lebus Court': [34.097133818486924, -117.7138019163509],\r\n  'LeBus Court': [34.097133818486924, -117.7138019163509],\r\n  Lincoln: [34.09436321343312, -117.71791431635106],\r\n  'McGregor CompSci Center': [34.105735661459065, -117.71277261820012],\r\n  'Mudd Science Library': [34.10235157034289, -117.71228630285779],\r\n  'Oldenborg Center': [34.0972862770658, -117.71197834518651],\r\n  Online: null,\r\n  'Parsons Engineering Building': [34.106763408455166, -117.71201133169328],\r\n  'Performing Arts Center': [34.103841861577266, -117.71263855867934],\r\n  PAC: [34.103841861577266, -117.71263855867934],\r\n  Pearsons: [34.09909136806275, -117.71531797402218],\r\n  'Pearsons Hall': [34.09909136806275, -117.71531797402218],\r\n  'Rains Center': [34.09962247726175, -117.7116976875152],\r\n  'Rembrandt Hall': [34.09714703734707, -117.71436354518652],\r\n  'Roberts North': [34.10243304031955, -117.71058173613733],\r\n  'Roberts South': [34.1018600288952, -117.7105736895106],\r\n  'Roberts Pavilion': [34.100334255091674, -117.70640981635093],\r\n  'Robert Redford Conservcy': [34.11077818412942, -117.71047418566549],\r\n  'Robert Redford Conservancy': [34.11077818412942, -117.71047418566549],\r\n  'Smith Campus Center': [34.09962026169959, -117.71350964518648],\r\n  'Seaver South Laboratory': [34.100042028976105, -117.71531142101722],\r\n  'Seaver North Laboratory': [34.100042028976105, -117.71531142101722],\r\n  'Seaman Hall': [34.10199315160771, -117.71010893169331],\r\n  'Shanahan Center': [34.10656042476094, -117.71087576052881],\r\n  'Drinkward Recital Hall': [34.10656042476094, -117.71087576052881],\r\n  Stauffer: [34.102953598099226, -117.71334231635072],\r\n  'Stauffer Hall': [34.102953598099226, -117.71334231635072],\r\n  'RC Seaver Biology Bldg': [34.10023161864675, -117.71627928465743],\r\n  'Seaver Biology Building': [34.10023161864675, -117.71627928465743],\r\n  'Seaver Theater': [34.096747978139696, -117.7104344010084],\r\n  'Seaver Theatre': [34.096747978139696, -117.7104344010084],\r\n  'Thatcher Music Bldg': [34.09754703461027, -117.71440025414981],\r\n  KSPC: [34.09754703461027, -117.71440025414981],\r\n  'Thatcher Music Building': [34.09754703461027, -117.71440025414981],\r\n  'Vita Nova Hall': [34.10300376863079, -117.70952371635069],\r\n  'Scott Hall': [34.104311246807875, -117.70661596406609],\r\n  TBD: null\r\n};\r\n\r\nexport const claremontRegion: Region = {\r\n  latitude: 34.1,\r\n  longitude: -117.71,\r\n  latitudeDelta: 0.015,\r\n  longitudeDelta: 0.015\r\n};\r\n\r\nexport const americaRegion: Region = {\r\n  latitude: 30.116386,\r\n  longitude: -97.299591,\r\n  latitudeDelta: 80,\r\n  longitudeDelta: 80\r\n};\r\n\r\nexport function removeNumbersAndSpaces(name: string): string {\r\n  let final = '';\r\n  for (const char of name) {\r\n    if (char.match(/[a-z]/i) || char === ' ') {\r\n      final += char;\r\n    }\r\n  }\r\n  return final.trim();\r\n}\r\n","import { Autocomplete, AutocompleteItem } from '@ui-kitten/components';\r\nimport { useEffect, useState } from 'react';\r\n\r\nimport { selectDarkMode, selectUserKey } from '../app/appDataSlice';\r\nimport { useAppSelector } from '../app/hooks';\r\nimport { base_URL } from '../features/notifications/constants';\r\n\r\n/**\r\n * Renders a dropdown with the names filtered as user types\r\n * @param setHasChosen set function of a useState which contains a boolean determining whether a user has been chosen\r\n * @param setRecipient set function of a useState which contains is either: 1. a string containing the userName of the user when one has been chosen, 2. null when a user has not been chosen\r\n * @constructor\r\n */\r\nexport default function UserNameSelectionDropDown({\r\n  setHasChosen,\r\n  setRecipient,\r\n  placeholder\r\n}) {\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const [names, setNames] = useState([]); // filtered list of names\r\n  const [users, setUsers] = useState([]); // clean list of users\r\n  const [value, setValue] = useState(''); // typed name\r\n  const myStyles = {\r\n    modal: {\r\n      fontSize: 18,\r\n      paddingBottom: 20,\r\n      fontWeight: 'bold',\r\n      textAlign: 'center',\r\n      width: '100%',\r\n      color: darkMode ? 'rgb(255,255,255)' : 'rgb(0,0,0)'\r\n    },\r\n    backdrop: {\r\n      backgroundColor: darkMode ? 'rgba(141,141,141,0.5)' : 'rgba(0, 0, 0, 0.5)'\r\n    },\r\n    containerDrop: {\r\n      minWidth: 200,\r\n      paddingBottom: 15\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(`${base_URL}/users/userNamesAndNames`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then(async (data) => {\r\n      if (data.ok) {\r\n        const userList = await data.json();\r\n        setNames(\r\n          userList.map((user) => {\r\n            if (user) {\r\n              return `${user.realName} (${user.userName})`;\r\n            }\r\n          })\r\n        );\r\n        setUsers(userList);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  function renderEachDropItem() {\r\n    const final = [];\r\n    for (const option in names) {\r\n      final.push(<AutocompleteItem title={names[option]} key={option} />);\r\n    }\r\n    return final;\r\n  }\r\n\r\n  const onChangeText = (query) => {\r\n    setNames(\r\n      freshNames().filter(\r\n        (name) =>\r\n          name?.toLowerCase().includes(query.toLowerCase()) ||\r\n          userNameContainsString(name, query)\r\n      )\r\n    );\r\n    setValue(query);\r\n  };\r\n\r\n  function freshNames() {\r\n    return users.map((user) => {\r\n      if (user) {\r\n        return `${user.realName} (${user.userName})`;\r\n      }\r\n    });\r\n  }\r\n\r\n  const userNameContainsString = (name, query) => {\r\n    const user = users.find(\r\n      (auser) =>\r\n        auser?.userName.toLowerCase().includes(query.toLowerCase()) &&\r\n        auser?.realName === name\r\n    );\r\n    return user !== undefined;\r\n  };\r\n\r\n  function handleSelection(index) {\r\n    if (index === 0) {\r\n      setHasChosen(false);\r\n      setRecipient(null);\r\n      // @ts-ignore\r\n      setValue('');\r\n    } else {\r\n      setHasChosen(true);\r\n      setValue(names[index - 1]);\r\n      setRecipient(findUserNameFromName(names[index - 1]));\r\n    }\r\n  }\r\n\r\n  function findUserNameFromName(name) {\r\n    const firstPar = name.indexOf('(');\r\n    const secondPar = name.indexOf(')');\r\n    return name.slice(firstPar + 1, secondPar);\r\n  }\r\n\r\n  return (\r\n    <Autocomplete\r\n      style={myStyles.containerDrop}\r\n      value={value}\r\n      placeholder={placeholder ? 'Recipient' : null}\r\n      onChangeText={onChangeText}\r\n      onSelect={handleSelection}\r\n    >\r\n      <AutocompleteItem title={' '} />\r\n      {renderEachDropItem()}\r\n    </Autocomplete>\r\n  );\r\n}\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport { Card, Modal, Text } from '@ui-kitten/components';\r\nimport React, { useState } from 'react';\r\nimport { Alert, Button, Platform, TouchableOpacity, View } from 'react-native';\r\n\r\nimport {\r\n  selectDarkMode,\r\n  selectIsGuest,\r\n  selectUserKey\r\n} from '../../../app/appDataSlice';\r\nimport { useAppSelector } from '../../../app/hooks';\r\nimport ModalContainer from '../../../components/ModalContainer';\r\nimport UserNameSelectionDropDown from '../../../components/UserNameSelectionDropDown';\r\nimport { useGetUserInfoQuery } from '../../api/usersApi';\r\nimport { base_URL } from '../../notifications/constants';\r\n\r\nexport default function ExportModalClass({ classData }) {\r\n  const isGuest = useAppSelector(selectIsGuest);\r\n  const [showGuestModal, setShowGuestModal] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [showWebModal, setShowWebModal] = useState(false);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n\r\n  return (\r\n    <View\r\n      style={{\r\n        marginRight: '7%',\r\n        flexDirection: 'column-reverse'\r\n      }}\r\n    >\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          if (isGuest) {\r\n            setShowGuestModal(true);\r\n          } else if (Platform.OS === 'web') {\r\n            setShowWebModal(true);\r\n          } else {\r\n            setShowModal(true);\r\n          }\r\n        }}\r\n        style={{\r\n          alignItems: 'center'\r\n        }}\r\n      >\r\n        <View\r\n          style={{\r\n            height: 45,\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n            paddingLeft: 5\r\n          }}\r\n        >\r\n          <FontAwesome5\r\n            name=\"file-export\"\r\n            size={20}\r\n            color={darkMode ? 'white' : 'black'}\r\n          />\r\n        </View>\r\n        <Text style={{ marginTop: -10, fontSize: 10 }}>Share Class</Text>\r\n      </TouchableOpacity>\r\n      {showWebModal && (\r\n        <ModalContainer\r\n          title=\"Wait!\"\r\n          children={\r\n            <Text style={{ paddingHorizontal: 30 }}>\r\n              Sharing courses is not supported on the web. Download the app on\r\n              the App Store or Play Store to share courses.\r\n            </Text>\r\n          }\r\n          backDropVisible={showWebModal}\r\n          setBackDropVisible={setShowWebModal}\r\n        />\r\n      )}\r\n      {showGuestModal && (\r\n        <ModalContainer\r\n          title=\"Wait!\"\r\n          children={\r\n            <Text style={{ paddingHorizontal: 30 }}>\r\n              This feature is locked to our Guest Users. Please create a free\r\n              account with us to take advantage this feature.\r\n            </Text>\r\n          }\r\n          backDropVisible={showGuestModal}\r\n          setBackDropVisible={setShowGuestModal}\r\n        />\r\n      )}\r\n      {renderModal(setShowModal, showModal, classData)}\r\n    </View>\r\n  );\r\n}\r\n\r\nfunction renderModal(setShowModal, showModal, classData: any) {\r\n  const { data: userData } = useGetUserInfoQuery(useAppSelector(selectUserKey));\r\n\r\n  const [value, setValue] = useState('');\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const [recipient, setRecipient] = useState(null);\r\n  const [hasChosen, setHasChosen] = useState(false);\r\n\r\n  const myStyles = {\r\n    modal: {\r\n      fontSize: 18,\r\n      paddingBottom: 20,\r\n      fontWeight: 'bold',\r\n      textAlign: 'center',\r\n      width: '100%',\r\n      color: darkMode ? 'rgb(255,255,255)' : 'rgb(0,0,0)'\r\n    },\r\n    backdrop: {\r\n      backgroundColor: darkMode ? 'rgba(141,141,141,0.5)' : 'rgba(0, 0, 0, 0.5)'\r\n    },\r\n    containerDrop: {\r\n      minWidth: 200,\r\n      paddingBottom: 15\r\n    }\r\n  };\r\n\r\n  const exportClass = async (recipient) => {\r\n    try {\r\n      const status = await fetch(`${base_URL}/users/sendNotification`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          userKey\r\n        },\r\n        body: JSON.stringify({\r\n          recipients: [recipient],\r\n          text: JSON.stringify({\r\n            masterCourseCode: classData.masterCourseCode,\r\n            courseTerm: classData.courseTerm\r\n          }),\r\n          title: `${userData.realFirstName} shared a course`,\r\n          isCourseData: true\r\n        })\r\n      });\r\n      return status.ok;\r\n    } catch (e) {\r\n      console.warn(e);\r\n      return false;\r\n    }\r\n  };\r\n  return (\r\n    <Modal\r\n      visible={showModal}\r\n      backdropStyle={myStyles.backdrop}\r\n      style={{ width: '80%', height: '70%' }}\r\n      onBackdropPress={() => setShowModal(false)}\r\n    >\r\n      <Card disabled>\r\n        <Text style={myStyles.modal}>Share This Course</Text>\r\n        {UserNameSelectionDropDown({\r\n          setHasChosen,\r\n          setRecipient,\r\n          placeholder: true\r\n        })}\r\n        <View>\r\n          <Button\r\n            disabled={recipient === null}\r\n            title=\"Send\"\r\n            onPress={() => {\r\n              exportClass(recipient).then((returnValue) => {\r\n                setShowModal(false);\r\n                returnValue\r\n                  ? Alert.alert('Message Sent')\r\n                  : Alert.alert(\r\n                      'Error Sending Message',\r\n                      'Please Try Again Later'\r\n                    );\r\n              });\r\n            }}\r\n          />\r\n          <Button\r\n            title=\"Dismiss\"\r\n            onPress={() => {\r\n              setShowModal(false);\r\n              setHasChosen(false);\r\n              setValue('');\r\n              setRecipient(null);\r\n            }}\r\n          />\r\n        </View>\r\n      </Card>\r\n    </Modal>\r\n  );\r\n}\r\n","import {\r\n  Button,\r\n  Card,\r\n  Layout,\r\n  Modal,\r\n  Text,\r\n  useTheme,\r\n  withStyles\r\n} from '@ui-kitten/components';\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  Platform,\r\n  ScrollView,\r\n  StyleSheet,\r\n  TouchableOpacity\r\n} from 'react-native';\r\nimport openMap from 'react-native-open-maps';\r\n\r\nimport { FontAwesome, FontAwesome5 } from '@expo/vector-icons';\r\nimport {\r\n  selectDarkMode,\r\n  selectIsGuest,\r\n  selectUserKey\r\n} from '../../../app/appDataSlice';\r\nimport { useAppSelector } from '../../../app/hooks';\r\nimport ModalContainer from '../../../components/ModalContainer';\r\nimport { base_URL } from '../../../constants/admin';\r\nimport { locations, removeNumbersAndSpaces } from '../../../constants/map';\r\nimport {\r\n  useAddClassMutation,\r\n  useAddStarredClassMutation,\r\n  useIsAllowedToReviewQuery,\r\n  useRemoveClassMutation,\r\n  useRemoveStarredClassMutation\r\n} from '../../api/classPagesApi';\r\nimport { useGetUserInfoQuery } from '../../api/usersApi';\r\nimport ExportModalClass from './exportModalClass';\r\n\r\nfunction SingleClassPage({ eva, navigation, selectedClass = null }) {\r\n  const [removeStarredClass] = useRemoveStarredClassMutation();\r\n  const [showModal, setShowModal] = useState(false);\r\n  const scrollViewRef = useRef(null);\r\n  const [showCourseModal, setShowCourseModal] = useState(false);\r\n  const theme = useTheme();\r\n  const isGuest = useAppSelector(selectIsGuest);\r\n  const [courseModalChildren, setCourseModalChildren] = useState([]);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const { data: userData } = useGetUserInfoQuery(userKey, {\r\n    skip: !userKey\r\n  });\r\n  const [showGuestModal, setShowGuestModal] = useState(false);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const [professorReviewsObject, setProfessorReviewsObject] = useState({});\r\n  const [addStarredClass] = useAddStarredClassMutation();\r\n  const isHMC = useAppSelector((state) => state.appData.classPages.isHMC);\r\n  if (!selectedClass) {\r\n    selectedClass = useAppSelector(\r\n      (state) => state.appData.classPages.selectedClass\r\n    );\r\n  }\r\n  const daysOfWeek = [\r\n    'Monday',\r\n    'Tuesday',\r\n    'Wednesday',\r\n    'Thursday',\r\n    'Friday',\r\n    'Saturday',\r\n    'Sunday'\r\n  ];\r\n  const backgroundColor = darkMode ? eva.style.dark : eva.style.light;\r\n\r\n  const { data: isAllowedToReviewRes } = useIsAllowedToReviewQuery({\r\n    userKey,\r\n    masterCourseCode: selectedClass.masterCourseCode\r\n  });\r\n\r\n  function isStarred(courseCode: string) {\r\n    return userData.starredClasses.some(\r\n      (course) =>\r\n        course.courseCode === courseCode &&\r\n        course.courseTerm === selectedClass.courseTerm\r\n    );\r\n  }\r\n\r\n  function userHasCourse(courseCode: string): boolean {\r\n    return (\r\n      userData.addedClasses.classes[selectedClass.courseTerm] !== undefined &&\r\n      userData.addedClasses.classes[selectedClass.courseTerm][\r\n        courseCode.slice(0, -3)\r\n      ] !== undefined\r\n    );\r\n  }\r\n\r\n  const courseToggleChildren = (courseForToggle) => {\r\n    const final = [\r\n      <Layout>\r\n        <Button\r\n          style={{ marginVertical: 5 }}\r\n          children={\r\n            !userHasCourse(courseForToggle.courseCode)\r\n              ? 'Add Course to Schedule'\r\n              : 'Remove Course from Schedule'\r\n          }\r\n          onPress={() => {\r\n            toggleAddOrRemoveCourse(courseForToggle.courseCode);\r\n            setShowCourseModal(false);\r\n          }}\r\n        />\r\n        <Button\r\n          style={{ marginVertical: 5 }}\r\n          children={\r\n            !isStarred(courseForToggle.courseCode) ? 'Add Star' : 'Remove Star'\r\n          }\r\n          onPress={() => {\r\n            if (isGuest) {\r\n              setShowGuestModal(true);\r\n            } else {\r\n              toggleStarCourse(courseForToggle.courseCode);\r\n              setShowCourseModal(false);\r\n            }\r\n          }}\r\n        />\r\n      </Layout>\r\n    ];\r\n    setCourseModalChildren(final);\r\n    setShowCourseModal(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (scrollViewRef?.current) {\r\n      scrollViewRef.current.scrollTo({\r\n        y: 0,\r\n        animated: false\r\n      });\r\n    }\r\n    if (selectedClass) {\r\n      for (const time of selectedClass.times) {\r\n        getReviewsFromProfessor(time);\r\n      }\r\n    }\r\n  }, [selectedClass]);\r\n\r\n  async function getReviewsFromProfessor(time) {\r\n    const res = await fetch(\r\n      `${base_URL}/classes/reviews/getReviewsByProfessor` +\r\n        `?professorName=${time.professorName}&collegeName=${userData.collegeName}`,\r\n      {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          userKey\r\n        }\r\n      }\r\n    );\r\n    if (res.ok) {\r\n      const reviews = await res.json();\r\n      if (reviews.length > 0) {\r\n        const newObject = {\r\n          ...professorReviewsObject\r\n        };\r\n        newObject[time.professorName] = reviews;\r\n        setProfessorReviewsObject(newObject);\r\n      }\r\n    }\r\n  }\r\n\r\n  function buildTimeString(time) {\r\n    // Compatibility with new course data layout for multiple times per day\r\n    if (time.courseSchedule && time.courseSchedule.length > 0) {\r\n      time = time.courseSchedule[0];\r\n    }\r\n\r\n    if (!time.startTime || time.startTime === '' || time.startTime === null) {\r\n      return 'closed';\r\n    }\r\n    return `${convertTo12HourTime(time.startTime)} - ${convertTo12HourTime(\r\n      time.endTime\r\n    )}\\n`;\r\n  }\r\n\r\n  function convertTo12HourTime(time) {\r\n    if (time.length !== 5) {\r\n      time = `0${time}`;\r\n    }\r\n    let hours = time.slice(0, 2);\r\n    const minutes = time.slice(3, 5);\r\n    let ampm = Number.parseInt(hours) > 12 ? 'pm' : 'am';\r\n    hours %= 12;\r\n    if (hours === 0) {\r\n      hours = 12;\r\n      ampm = 'pm';\r\n    }\r\n    return `${hours}:${minutes}${ampm}`;\r\n  }\r\n\r\n  function getProfessorReviewsList() {\r\n    const final = [];\r\n    for (const professor of Object.keys(professorReviewsObject)) {\r\n      const reviews = professorReviewsObject[professor];\r\n      final.push(\r\n        <>\r\n          <Text style={styles.subHeader}>All Reviews: {professor}</Text>\r\n          {reviews.length === 0 ? (\r\n            <Text\r\n              style={{\r\n                alignSelf: 'center',\r\n                textAlign: 'center',\r\n                marginBottom: 10\r\n              }}\r\n            >\r\n              Something went wrong...\r\n            </Text>\r\n          ) : (\r\n            reviews.map((review, index) => (\r\n              <Card key={index} disabled>\r\n                <Text>{`${review.text}\\n\\nPosted: ${review.date}`}</Text>\r\n              </Card>\r\n            ))\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n    return final;\r\n  }\r\n\r\n  const averageGradeMSGModal = (\r\n    <Modal\r\n      visible={showModal}\r\n      backdropStyle={styles.backdrop}\r\n      style={{ width: '75%' }}\r\n      onBackdropPress={() => setShowModal(false)}\r\n    >\r\n      <Card disabled>\r\n        <Text style={{ fontSize: 15, paddingTop: 5, paddingBottom: 10 }}>\r\n          The Athena Network collects and aggregates the data anonymously\r\n          submitted by the Course Review process and calculates what the average\r\n          student's experience in this course will look like. Given that it is\r\n          based on voluntarily submitted data, this information is to be used as\r\n          a reference only. Please consult your advisor before making any\r\n          impactful decisions.\r\n        </Text>\r\n        <Button onPress={() => setShowModal(false)}>Dismiss</Button>\r\n      </Card>\r\n    </Modal>\r\n  );\r\n\r\n  if (!selectedClass.times) {\r\n    return null;\r\n  }\r\n\r\n  function getProfessorsList() {\r\n    const list = [];\r\n    for (const time of selectedClass.times) {\r\n      if (!list.includes(time.professorName)) {\r\n        list.push(time.professorName);\r\n      }\r\n    }\r\n    return list;\r\n  }\r\n\r\n  const [schedulePopup, setSchedulePopup] = useState(false);\r\n  const [allTheChildren, setAllTheChildren] = useState([]);\r\n\r\n  function toggleSchedulePopUp(time: any) {\r\n    const finalDays = {};\r\n    for (const realTime of time.courseSchedule) {\r\n      for (const day of daysOfWeek) {\r\n        if (realTime.daysOfTheWeek.includes(day)) {\r\n          const addition = `${convertTo12HourTime(\r\n            realTime.startTime\r\n          )} - ${convertTo12HourTime(realTime.endTime)}`;\r\n          if (finalDays[day]?.length > 0) {\r\n            finalDays[day].push(addition);\r\n          } else {\r\n            finalDays[day] = [addition];\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    setAllTheChildren(generateTable(finalDays));\r\n    setSchedulePopup(true);\r\n  }\r\n  const [addClass] = useAddClassMutation();\r\n  const [removeClass] = useRemoveClassMutation();\r\n  function toggleStarCourse(courseCode: string) {\r\n    try {\r\n      if (isStarred(courseCode)) {\r\n        removeStarredClass({\r\n          userKey,\r\n          courseCode,\r\n          courseTerm: selectedClass.courseTerm,\r\n          userName: userData.userName\r\n        }).unwrap();\r\n      } else {\r\n        addStarredClass({\r\n          userKey,\r\n          courseCode,\r\n          courseTerm: selectedClass.courseTerm,\r\n          userName: userData.userName\r\n        }).unwrap();\r\n      }\r\n    } catch (e) {\r\n      console.warn('Error starring class', e);\r\n    }\r\n  }\r\n\r\n  function toggleAddOrRemoveCourse(courseCode: string) {\r\n    if (userHasCourse(courseCode)) {\r\n      removeClass({\r\n        userKey,\r\n        courseCode,\r\n        courseTerm: selectedClass.courseTerm,\r\n        userName: userData.userName,\r\n        masterCourseCode: courseCode.slice(0, -3)\r\n      }).unwrap();\r\n    } else {\r\n      addClass({\r\n        userKey,\r\n        courseCode,\r\n        courseTerm: selectedClass.courseTerm,\r\n        userName: userData.userName,\r\n        masterCourseCode: courseCode.slice(0, -3)\r\n      }).unwrap();\r\n    }\r\n  }\r\n  function generateTable(daysObject: any): any {\r\n    const daysActive = Object.keys(daysObject);\r\n    const stringArrays = Object.values(daysObject);\r\n    return (\r\n      <Layout style={{ flexDirection: 'row' }}>\r\n        <Layout>\r\n          {daysActive.map((value) => {\r\n            return (\r\n              <Layout>\r\n                <Text\r\n                  style={{\r\n                    height: 75,\r\n                    borderWidth: 1,\r\n                    borderColor: 'black',\r\n                    padding: 10\r\n                  }}\r\n                >\r\n                  {value}\r\n                </Text>\r\n              </Layout>\r\n            );\r\n          })}\r\n        </Layout>\r\n        <Layout>\r\n          {stringArrays.map((value: string[]) => {\r\n            return (\r\n              <Layout>\r\n                <Text\r\n                  style={{\r\n                    height: 75,\r\n                    borderWidth: 1,\r\n                    borderColor: 'black',\r\n                    padding: 10\r\n                  }}\r\n                >\r\n                  {value.join('\\n')}\r\n                </Text>\r\n              </Layout>\r\n            );\r\n          })}\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <LinearGradient\r\n      colors={\r\n        darkMode\r\n          ? [theme['color-basic-1100'], theme['color-basic-1100']]\r\n          : [theme['color-primary-500'], theme['color-success-500']]\r\n      }\r\n      style={{\r\n        width: '100%',\r\n        margin: 0,\r\n        alignItems: 'center',\r\n        flex: 1\r\n      }}\r\n      start={{ x: 0, y: 0 }}\r\n      end={{ x: 1, y: 0.4 }}\r\n    >\r\n      {showGuestModal && (\r\n        <ModalContainer\r\n          title=\"Wait!\"\r\n          children={\r\n            <Text style={{ paddingHorizontal: 30 }}>\r\n              This feature is locked to our Guest Users. Please create a free\r\n              account with us to take advantage this feature.\r\n            </Text>\r\n          }\r\n          backDropVisible={showGuestModal}\r\n          setBackDropVisible={setShowGuestModal}\r\n        />\r\n      )}\r\n      <ScrollView\r\n        contentContainerStyle={{ alignSelf: 'center', maxWidth: 700 }}\r\n        style={backgroundColor}\r\n        showsVerticalScrollIndicator={false}\r\n        ref={scrollViewRef}\r\n      >\r\n        {userData.starredClasses.some((course) =>\r\n          selectedClass.times.some(\r\n            (time: { courseCode: any; courseTerm: any }) =>\r\n              time.courseCode === course.courseCode &&\r\n              selectedClass.courseTerm === course.courseTerm\r\n          )\r\n        ) ? (\r\n          <Layout\r\n            style={{\r\n              flexDirection: 'row',\r\n              justifyContent: 'space-between',\r\n              alignContent: 'center',\r\n              backgroundColor\r\n            }}\r\n          >\r\n            <FontAwesome\r\n              style={{ marginLeft: 10, marginTop: 10 }}\r\n              name=\"star\"\r\n              color=\"gold\"\r\n              size={20}\r\n            />\r\n            <ExportModalClass classData={undefined} />\r\n          </Layout>\r\n        ) : (\r\n          <Layout\r\n            style={{\r\n              flexDirection: 'row',\r\n              justifyContent: 'space-between',\r\n              alignContent: 'center',\r\n              backgroundColor\r\n            }}\r\n          >\r\n            <FontAwesome5\r\n              style={{ marginLeft: 10, marginTop: 10 }}\r\n              name=\"star\"\r\n              color=\"gold\"\r\n              size={20}\r\n            />\r\n            <ExportModalClass classData={undefined} />\r\n          </Layout>\r\n        )}\r\n\r\n        <Layout style={[{ alignItems: 'center' }, backgroundColor]}>\r\n          <Text style={styles.title}>{selectedClass.courseName}</Text>\r\n          <Text style={{ paddingTop: 30 }}>\r\n            {selectedClass.masterCourseCode}\r\n          </Text>\r\n\r\n          <Text style={styles.subtitle}>\r\n            {`${selectedClass.courseTerm} \\u2022 credits: ${\r\n              isHMC ? selectedClass.creditWeightHM : selectedClass.creditWeight\r\n            }`}\r\n          </Text>\r\n          {selectedClass.timeSpentOutOfClass && (\r\n            <Layout\r\n              style={[\r\n                {\r\n                  flexDirection: 'row',\r\n                  alignItems: 'flex-start',\r\n                  paddingRight: 5\r\n                },\r\n                backgroundColor\r\n              ]}\r\n            >\r\n              <Text style={styles.subtitle}>Time Spent Per Week</Text>\r\n              <Text style={{ fontSize: 12, lineHeight: 13 }}>i</Text>\r\n              <Text style={styles.subtitle}>\r\n                : {selectedClass.timeSpentOutOfClass} hours\r\n              </Text>\r\n            </Layout>\r\n          )}\r\n          {selectedClass.averageGrade && (\r\n            <Layout\r\n              style={[\r\n                {\r\n                  flexDirection: 'row',\r\n                  alignItems: 'flex-start',\r\n                  paddingRight: 5\r\n                },\r\n                backgroundColor\r\n              ]}\r\n            >\r\n              <Text style={styles.subtitle}>Average Grade</Text>\r\n              <Text style={{ fontSize: 12, lineHeight: 13 }}>i</Text>\r\n              <Text style={styles.subtitle}>\r\n                : {selectedClass.averageGrade}\r\n              </Text>\r\n            </Layout>\r\n          )}\r\n          {selectedClass.difficulty && (\r\n            <Layout\r\n              style={[\r\n                {\r\n                  flexDirection: 'row',\r\n                  alignItems: 'flex-start',\r\n                  paddingRight: 5\r\n                },\r\n                backgroundColor\r\n              ]}\r\n            >\r\n              <Text style={styles.subtitle}>Estimated Difficulty</Text>\r\n              <Text style={{ fontSize: 12, lineHeight: 13 }}>i</Text>\r\n              <Text style={styles.subtitle}>\r\n                : {selectedClass.difficulty} / 5\r\n              </Text>\r\n            </Layout>\r\n          )}\r\n          {selectedClass.rating && (\r\n            <Layout\r\n              style={[\r\n                {\r\n                  flexDirection: 'row',\r\n                  alignItems: 'flex-start',\r\n                  paddingRight: 5\r\n                },\r\n                backgroundColor\r\n              ]}\r\n            >\r\n              <Text style={styles.subtitle}>Average Rating</Text>\r\n              <Text style={{ fontSize: 12, lineHeight: 13 }}>i</Text>\r\n              <Text style={styles.subtitle}>:{selectedClass.rating} / 5</Text>\r\n            </Layout>\r\n          )}\r\n        </Layout>\r\n        <Layout style={backgroundColor}>\r\n          <Text style={styles.courseDescription}>{selectedClass.summary}</Text>\r\n        </Layout>\r\n        <Layout style={{ ...backgroundColor, ...styles.boxed }}>\r\n          <Text style={{ fontSize: 15, fontWeight: 'bold' }}>\r\n            Other Stated Prerequisites:\r\n          </Text>\r\n          <Text style={{ fontSize: 15 }}>\r\n            {selectedClass.prerequisites !== ''\r\n              ? selectedClass.prerequisites\r\n              : 'none'}\r\n          </Text>\r\n\r\n          <Text style={{ fontSize: 15, fontWeight: 'bold' }}>\r\n            Other Stated Corequisites:\r\n          </Text>\r\n          <Text style={{ fontSize: 15 }}>\r\n            {selectedClass.corequisites !== ''\r\n              ? selectedClass.corequisites\r\n              : 'none'}\r\n          </Text>\r\n        </Layout>\r\n        <Layout style={[{ alignItems: 'flex-end' }, backgroundColor]}>\r\n          {(selectedClass.timeSpentOutOfClass ||\r\n            selectedClass.averageGrade ||\r\n            selectedClass.difficulty ||\r\n            selectedClass.rating) && (\r\n            <TouchableOpacity onPress={() => setShowModal(!showModal)}>\r\n              <Layout\r\n                style={[\r\n                  {\r\n                    flexDirection: 'row',\r\n                    alignItems: 'flex-start',\r\n                    paddingRight: 5\r\n                  },\r\n                  backgroundColor\r\n                ]}\r\n              >\r\n                <Text style={{ fontSize: 12, lineHeight: 13 }}>i</Text>\r\n                <Text style={styles.disclaimer}>How Do We Estimate This?</Text>\r\n              </Layout>\r\n            </TouchableOpacity>\r\n          )}\r\n        </Layout>\r\n        <Layout style={{ backgroundColor }}>\r\n          {selectedClass.times.length > 0 && (\r\n            <Layout style={{ backgroundColor }}>\r\n              <Text style={styles.subHeader}>Sections</Text>\r\n              <Layout style={[styles.section, backgroundColor]}>\r\n                <Text style={styles.headerText}>Course Code</Text>\r\n                <Layout\r\n                  style={{\r\n                    flex: 1,\r\n                    flexDirection: 'row',\r\n                    justifyContent: 'flex-start',\r\n                    backgroundColor\r\n                  }}\r\n                >\r\n                  <Text style={{ fontWeight: 'bold', fontSize: 13 }}>\r\n                    ST / SA\r\n                  </Text>\r\n                  <Text style={{ fontWeight: '725', fontSize: 13 }}>\r\n                    {' '}\r\n                    (PERM)\r\n                  </Text>\r\n                </Layout>\r\n                <Text style={styles.headerText}>Professor</Text>\r\n                <Text style={styles.headerText}>Time</Text>\r\n                <Text style={styles.headerText}>Location</Text>\r\n              </Layout>\r\n            </Layout>\r\n          )}\r\n          {selectedClass.times.map((time) => {\r\n            return (\r\n              <Layout\r\n                key={time.courseCode}\r\n                style={{ backgroundColor, ...styles.section }}\r\n              >\r\n                {userData.starredClasses.some(\r\n                  (course) =>\r\n                    course.courseTerm === selectedClass.courseTerm &&\r\n                    course.courseCode === time.courseCode\r\n                ) && (\r\n                  <FontAwesome\r\n                    style={{ marginRight: 5 }}\r\n                    name=\"star\"\r\n                    color=\"gold\"\r\n                    size={12}\r\n                  />\r\n                )}\r\n                <TouchableOpacity\r\n                  style={{ flex: 1 }}\r\n                  onPress={() => {\r\n                    courseToggleChildren(time);\r\n                  }}\r\n                >\r\n                  <Text\r\n                    style={{\r\n                      ...styles.sectionText,\r\n                      color: 'rgba(55,81,211,0.84)',\r\n                      textDecorationLine: 'underline'\r\n                    }}\r\n                  >\r\n                    {time.courseCode}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n                <Layout\r\n                  style={{ flex: 1, flexDirection: 'row', backgroundColor }}\r\n                >\r\n                  <Text>\r\n                    {time.seatsFilled} /{time.seatsFilled + time.seatsAvailable}\r\n                    {'  '}\r\n                  </Text>\r\n                  <Text style={{ fontWeight: 'bold' }}>\r\n                    ({time.permCount ? time.permCount : 0})\r\n                  </Text>\r\n                </Layout>\r\n                <Text style={styles.sectionText}>{time.professorName}</Text>\r\n                <Layout style={{ backgroundColor, ...styles.sectionText }}>\r\n                  {time?.courseSchedule?.length > 1 ? (\r\n                    <TouchableOpacity\r\n                      onPress={() => toggleSchedulePopUp(time)}\r\n                      disabled={!(time?.courseSchedule?.length > 1)}\r\n                    >\r\n                      <Text\r\n                        style={{\r\n                          ...styles.sectionText,\r\n                          color: 'rgba(55,81,211,0.84)',\r\n                          textDecorationLine: 'underline'\r\n                        }}\r\n                      >\r\n                        {Platform.OS === 'web' ? 'Click' : 'Press'} for\r\n                        {'\\n'}\r\n                        schedule\r\n                      </Text>\r\n                    </TouchableOpacity>\r\n                  ) : (\r\n                    <Text style={styles.sectionText}>\r\n                      {buildTimeString(time)}\r\n                      {time?.courseSchedule?.length > 0\r\n                        ? time.courseSchedule[0].daysOfTheWeek.join(', ')\r\n                        : time.daysOfTheWeek.join(', ')}\r\n                    </Text>\r\n                  )}\r\n                </Layout>\r\n                <TouchableOpacity\r\n                  disabled={\r\n                    !locations[\r\n                      removeNumbersAndSpaces(\r\n                        time.courseSchedule[0].classLocation\r\n                      )\r\n                    ]\r\n                  }\r\n                  style={{ flex: 1 }}\r\n                  onPress={() => {\r\n                    openMap({\r\n                      waypoints: [],\r\n                      provider: 'google',\r\n                      query: locations[\r\n                        removeNumbersAndSpaces(\r\n                          time.courseSchedule[0].classLocation\r\n                        )\r\n                      ]\r\n                        .map((number) => number.toString())\r\n                        .join(', '),\r\n                      zoom: 18\r\n                    });\r\n                  }}\r\n                >\r\n                  <Text\r\n                    style={\r\n                      locations[\r\n                        removeNumbersAndSpaces(\r\n                          time.courseSchedule[0].classLocation\r\n                        )\r\n                      ]\r\n                        ? {\r\n                            ...styles.sectionText,\r\n                            color: 'rgba(55,81,211,0.84)',\r\n                            textDecorationLine: 'underline'\r\n                          }\r\n                        : { flex: 1 }\r\n                    }\r\n                  >\r\n                    {time.courseSchedule[0].classLocation\r\n                      ? time.courseSchedule[0].classLocation\r\n                      : 'TBD'}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              </Layout>\r\n            );\r\n          })}\r\n          <ModalContainer\r\n            backDropVisible={showCourseModal}\r\n            setBackDropVisible={setShowCourseModal}\r\n            title=\"Add/Remove Course\"\r\n            children={courseModalChildren}\r\n          />\r\n          {averageGradeMSGModal}\r\n          <ModalContainer\r\n            children={allTheChildren}\r\n            backDropVisible={schedulePopup}\r\n            setBackDropVisible={setSchedulePopup}\r\n            title=\"Course Time Schedule\"\r\n          />\r\n        </Layout>\r\n        {isAllowedToReviewRes?.isAllowed ? (\r\n          <Button\r\n            style={{ margin: 10 }}\r\n            onPress={() => {\r\n              navigation.navigate('PostReview', {\r\n                professorList: getProfessorsList()\r\n              });\r\n            }}\r\n          >\r\n            Post Review\r\n          </Button>\r\n        ) : null}\r\n        <Text style={styles.subHeader}>Class Reviews</Text>\r\n        {selectedClass.reviews.length === 0 ? (\r\n          <Text\r\n            style={{\r\n              alignSelf: 'center',\r\n              textAlign: 'center',\r\n              marginBottom: 10\r\n            }}\r\n          >\r\n            No Class Reviews yet\r\n          </Text>\r\n        ) : (\r\n          selectedClass.reviews.map((review, index) => (\r\n            <Card key={index} disabled>\r\n              <Text>{`${review.text}\\n\\nPosted: ${review.date}`}</Text>\r\n              {review.professor && (\r\n                <Text>{`Taught By: ${review.professor}`}</Text>\r\n              )}\r\n            </Card>\r\n          ))\r\n        )}\r\n        {Object.keys(professorReviewsObject).length !== 0\r\n          ? getProfessorReviewsList()\r\n          : null}\r\n      </ScrollView>\r\n    </LinearGradient>\r\n  );\r\n}\r\n\r\nexport default withStyles(SingleClassPage, (theme) => ({\r\n  dark: {\r\n    backgroundColor: theme['color-basic-900']\r\n  },\r\n  light: {\r\n    backgroundColor: theme['color-basic-200']\r\n  }\r\n}));\r\n\r\nconst styles = StyleSheet.create({\r\n  title: {\r\n    fontSize: 20,\r\n    marginTop: 20,\r\n    fontWeight: 'bold'\r\n  },\r\n  subtitle: {\r\n    fontSize: 16\r\n  },\r\n  courseOpen: {\r\n    backgroundColor: 'green',\r\n    color: '#fff',\r\n    padding: 5,\r\n    marginRight: 10\r\n  },\r\n  courseClosed: {\r\n    backgroundColor: 'red',\r\n    color: '#fff',\r\n    padding: 5,\r\n    borderRadius: 5\r\n  },\r\n  header: {\r\n    alignItems: 'center'\r\n  },\r\n  details: {\r\n    flexDirection: 'row',\r\n    padding: 10,\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  courseDescription: {\r\n    paddingRight: 20,\r\n    paddingLeft: 20,\r\n    paddingTop: 10,\r\n    paddingBottom: 5,\r\n    fontSize: 17\r\n  },\r\n  BodyContainer: {\r\n    borderTopWidth: 1,\r\n    borderTopColor: 'black',\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-evenly',\r\n    padding: 10,\r\n    paddingTop: 20,\r\n    paddingBottom: 20\r\n  },\r\n  boxed: {\r\n    alignItems: 'center',\r\n    margin: 8,\r\n    borderColor: 'black',\r\n    borderWidth: 1,\r\n    padding: 7\r\n  },\r\n  documentStyle: {\r\n    width: 150,\r\n    height: 190,\r\n    paddingTop: 100\r\n  },\r\n  imageLabel: {\r\n    fontSize: 12,\r\n    color: 'black',\r\n    padding: 10,\r\n    textAlign: 'center'\r\n  },\r\n  schedule: {\r\n    paddingLeft: 20,\r\n    paddingTop: 10\r\n  },\r\n  graphImage: {\r\n    width: '100%',\r\n    aspectRatio: 1,\r\n    resizeMode: 'contain'\r\n  },\r\n  grade: {\r\n    fontSize: 50,\r\n    fontWeight: 'bold',\r\n    color: 'green'\r\n  },\r\n  reviewText: {\r\n    fontSize: 16,\r\n    fontStyle: 'italic'\r\n  },\r\n  reviewBox: {\r\n    width: '95%',\r\n    padding: 10,\r\n    borderWidth: 1,\r\n    borderColor: 'black',\r\n    borderRadius: 5,\r\n    marginBottom: 10\r\n  },\r\n  section: {\r\n    flexDirection: 'row',\r\n    paddingLeft: 5,\r\n    borderBottomWidth: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  headerText: {\r\n    fontWeight: 'bold',\r\n    fontSize: 13,\r\n    flex: 1\r\n  },\r\n  sectionText: {\r\n    flex: 1\r\n  },\r\n  disclaimer: {\r\n    fontSize: 14,\r\n    fontStyle: 'italic'\r\n  },\r\n  backdrop: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\r\n  },\r\n  input: {\r\n    height: 50,\r\n    margin: 12,\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  containerDrop: {\r\n    height: 42,\r\n    margin: 12,\r\n    borderWidth: 1\r\n  },\r\n  indentedInput: {\r\n    height: 50,\r\n    marginVertical: 12,\r\n    borderWidth: 1,\r\n    padding: 10,\r\n    marginRight: 12,\r\n    marginLeft: 30\r\n  },\r\n  text: {\r\n    fontSize: 16,\r\n    lineHeight: 21,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  },\r\n  subHeader: {\r\n    fontSize: 20,\r\n    paddingLeft: 20,\r\n    paddingBottom: 20,\r\n    paddingTop: 20,\r\n    fontWeight: 'bold'\r\n  }\r\n});\r\n","import {\r\n  IndexPath,\r\n  Layout,\r\n  Select,\r\n  SelectItem,\r\n  Text,\r\n  useTheme,\r\n  Button,\r\n  Spinner,\r\n  Input\r\n} from '@ui-kitten/components';\r\nimport { useState } from 'react';\r\nimport { Alert, StyleSheet, ScrollView } from 'react-native';\r\n\r\nimport { selectUserKey } from '../../../app/appDataSlice';\r\nimport { useAppSelector } from '../../../app/hooks';\r\nimport { NEW_REVIEW_FIELDS as fields } from '../../../constants/classPages';\r\nimport { useSendReviewMutation } from '../../api/classPagesApi';\r\nimport ModalContainer from '../../../components/ModalContainer';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nexport default function NewReview({\r\n  route: {\r\n    params: { professorList }\r\n  }\r\n}) {\r\n  const navigation = useNavigation();\r\n  const [body, setBody] = useState({});\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const darkMode = useAppSelector((state) => state.appData.secure.darkMode);\r\n  const [showConfirmationModal, setShowConfirmationModal] = useState(false);\r\n  const [showErrorModal, setShowErrorModal] = useState(false);\r\n  const selectedClass = useAppSelector(\r\n    (state) => state.appData.classPages.selectedClass\r\n  );\r\n  const [sendReview, { isLoading }] = useSendReviewMutation();\r\n\r\n  const theme = useTheme();\r\n\r\n  const backgroundColor = darkMode\r\n    ? theme['color-basic-900']\r\n    : theme['color-basic-200'];\r\n\r\n  const color = darkMode ? theme['color-basic-200'] : theme['color-basic-900'];\r\n\r\n  const handleReviewSubmitted = async () => {\r\n    try {\r\n      await sendReview({\r\n        body: {\r\n          ...body,\r\n          masterCourseCode: selectedClass.masterCourseCode\r\n        },\r\n        userKey\r\n      }).unwrap();\r\n      setShowConfirmationModal(true);\r\n    } catch (error) {\r\n      setShowErrorModal(true);\r\n      console.warn('Error submitting review: ', error);\r\n    }\r\n  };\r\n\r\n  function renderTheFieldsNecessary(fields) {\r\n    const changeValue = (theValue, valueToChange) => {\r\n      const newBody = body;\r\n      for (const aspect in newBody) {\r\n        if (\r\n          newBody[aspect] === null ||\r\n          newBody[aspect] === undefined ||\r\n          newBody[aspect] === ''\r\n        ) {\r\n          delete newBody[aspect];\r\n        }\r\n      }\r\n      if (theValue !== undefined) {\r\n        newBody[valueToChange] = theValue;\r\n      } else if (newBody[valueToChange]) {\r\n        delete newBody[valueToChange];\r\n      }\r\n      setBody(newBody);\r\n    };\r\n    const renderFilterParameters = (fields) => {\r\n      if (fields.length === 0) {\r\n        return null;\r\n      }\r\n      return (\r\n        <Layout style={{ flexDirection: 'row', backgroundColor }}>\r\n          <Text\r\n            style={{\r\n              fontSize: 15,\r\n              paddingLeft: 12,\r\n              paddingBottom: 5,\r\n              paddingTop: 5,\r\n              alignContent: 'center',\r\n              fontWeight: 'bold'\r\n            }}\r\n          >\r\n            Review Details\r\n          </Text>\r\n        </Layout>\r\n      );\r\n    };\r\n    const final = [];\r\n\r\n    const renderDropDown = (field) => {\r\n      const [selectedIndex, setSelectedIndex] = useState(new IndexPath(0));\r\n      const [hasChosen, setHasChosen] = useState(false);\r\n\r\n      if (field.label === 'Professor') {\r\n        field.options = professorList.map((professorName: String) => {\r\n          return {\r\n            label: professorName,\r\n            id: professorName\r\n          };\r\n        });\r\n      }\r\n\r\n      function currentValue() {\r\n        return (\r\n          <Text key=\"gal;fkdjsl;f\">\r\n            {!hasChosen\r\n              ? `Choose ${field.label}${field.mandatory ? ' (mandatory)' : ''}`\r\n              : field.options[selectedIndex.row - 1].label}{' '}\r\n          </Text>\r\n        );\r\n      }\r\n\r\n      function handleSelection(index) {\r\n        setSelectedIndex(index);\r\n        changeValue(\r\n          index.row === 0 ? undefined : field.options[index.row - 1].id,\r\n          field.id\r\n        );\r\n        if (index.row === 0) {\r\n          setHasChosen(false);\r\n        } else {\r\n          setHasChosen(true);\r\n        }\r\n      }\r\n\r\n      return (\r\n        <Select\r\n          style={{ ...styles.containerDrop, backgroundColor }}\r\n          value={currentValue}\r\n          selectedIndex={selectedIndex}\r\n          onSelect={handleSelection}\r\n        >\r\n          <SelectItem title={' '} />\r\n          {field.options.map(({ label }, index) => (\r\n            <SelectItem title={label} key={index} />\r\n          ))}\r\n        </Select>\r\n      );\r\n    };\r\n    final.push(\r\n      <Input\r\n        key=\"lfjdsa;lfaj\"\r\n        autoCapitalize=\"sentences\"\r\n        onChangeText={(theValue) => changeValue(theValue, 'text')}\r\n        style={{ ...styles.inputBig, backgroundColor, color }}\r\n        multiline\r\n        placeholderTextColor={darkMode ? theme['color-basic-500'] : 'gray'}\r\n        placeholder=\"Review Text (mandatory)\"\r\n      />\r\n    );\r\n    for (let i = 0; i < fields.length; i++) {\r\n      const { type } = fields[i];\r\n      if (type === 'String') {\r\n        final.push(\r\n          <Input\r\n            key={i}\r\n            autoCapitalize=\"words\"\r\n            clearButtonMode=\"always\"\r\n            onChangeText={(theValue) => changeValue(theValue, fields[i].id)}\r\n            style={{ ...styles.input, backgroundColor, color }}\r\n            placeholderTextColor={darkMode ? theme['color-basic-500'] : 'gray'}\r\n            placeholder={\r\n              fields[i].mandatory\r\n                ? `${fields[i].label} (mandatory)`\r\n                : fields[i].label\r\n            }\r\n          />\r\n        );\r\n      } else if (type === 'DropDown') {\r\n        final.push(renderDropDown(fields[i]));\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Layout style={{ backgroundColor }}>\r\n        {renderFilterParameters(fields)}\r\n        <Layout style={{ backgroundColor }}>{final}</Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  const successChildren = (\r\n    <Layout style={{ marginHorizontal: 15, justifyContent: 'center' }}>\r\n      <Text>\r\n        {`Your review of \"${selectedClass.courseName}\" has been submitted and is\r\n          now pending approval.\\n\\nThank You!`}\r\n      </Text>\r\n      <Button\r\n        onPress={() => {\r\n          navigation.goBack();\r\n        }}\r\n      >\r\n        Okay\r\n      </Button>\r\n    </Layout>\r\n  );\r\n\r\n  const errorChildren = (\r\n    <Layout style={{ marginHorizontal: 15, justifyContent: 'center' }}>\r\n      <Text>{`Your review encountered an error, please try again later`}</Text>\r\n      <Button\r\n        onPress={() => {\r\n          navigation.goBack();\r\n        }}\r\n      >\r\n        Okay\r\n      </Button>\r\n    </Layout>\r\n  );\r\n\r\n  return (\r\n    <ScrollView style={{ backgroundColor }}>\r\n      <ModalContainer\r\n        backDropVisible={showConfirmationModal}\r\n        setBackDropVisible={setShowConfirmationModal}\r\n        title={'Review Submitted!'}\r\n        children={successChildren}\r\n      />\r\n      <ModalContainer\r\n        backDropVisible={showErrorModal}\r\n        setBackDropVisible={setShowErrorModal}\r\n        title={'Error Submitting Review'}\r\n        children={errorChildren}\r\n      />\r\n      <Layout style={{ backgroundColor, ...styles.container }}>\r\n        <Layout style={{ backgroundColor }}>\r\n          {renderTheFieldsNecessary(fields)}\r\n        </Layout>\r\n        <Button style={{ margin: 12 }} onPress={handleReviewSubmitted}>\r\n          Post Review\r\n        </Button>\r\n      </Layout>\r\n      {isLoading ? (\r\n        <Layout\r\n          style={{\r\n            backgroundColor: 'transparent',\r\n            position: 'absolute',\r\n            right: '50%',\r\n            top: '50%'\r\n          }}\r\n        >\r\n          <Spinner />\r\n        </Layout>\r\n      ) : null}\r\n    </ScrollView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  input: {\r\n    height: 50,\r\n    margin: 12,\r\n    padding: 10,\r\n    borderColor: '#B3B3B3',\r\n    borderRadius: 5,\r\n    borderWidth: 1\r\n  },\r\n  inputBig: {\r\n    height: 200,\r\n    margin: 12,\r\n    padding: 10,\r\n    borderColor: '#B3B3B3',\r\n    borderRadius: 5,\r\n    borderWidth: 1\r\n  },\r\n  containerDrop: {\r\n    height: 42,\r\n    margin: 12\r\n  },\r\n  indentedInput: {\r\n    height: 50,\r\n    marginVertical: 12,\r\n    padding: 10,\r\n    marginRight: 12,\r\n    marginLeft: 30\r\n  },\r\n  text: {\r\n    fontSize: 16,\r\n    lineHeight: 21,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25\r\n  },\r\n  container: {\r\n    flex: 1\r\n    // alignItems: 'center',\r\n  },\r\n  header: {\r\n    marginTop: 20,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: '100%'\r\n  },\r\n  address: {\r\n    alignItems: 'center',\r\n    margin: 10,\r\n    padding: 10\r\n  },\r\n  video: {\r\n    marginTop: 20,\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  title: {\r\n    fontSize: 26,\r\n    marginLeft: 10\r\n  },\r\n  logo: {\r\n    width: '100%',\r\n    height: 100\r\n  },\r\n  couponContainer: {\r\n    width: '100%',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginTop: 20,\r\n    marginBottom: 20\r\n  },\r\n  coupon: {\r\n    width: 400,\r\n    height: 267\r\n  },\r\n  imageGallery: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    margin: 10,\r\n    marginBottom: 0\r\n  },\r\n  imageStyle: {\r\n    width: 150,\r\n    height: 150,\r\n    paddingTop: 100,\r\n    margin: 5\r\n  },\r\n  headerText: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold'\r\n  }\r\n});\r\n","import { createNativeStackNavigator } from '@react-navigation/native-stack';\r\n\r\nimport InfoPage from './InfoPage';\r\nimport PostReview from './PostReview';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function SingleClassPage({ bottomSheetRef }) {\r\n  return (\r\n    <Stack.Navigator>\r\n      <Stack.Screen\r\n        name=\"InfoPage\"\r\n        component={InfoPage}\r\n        options={{ title: 'ClassPages' }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"PostReview\"\r\n        component={PostReview}\r\n        options={{ title: 'Post Review' }}\r\n      />\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n","import { Divider, Layout, Text, useTheme } from '@ui-kitten/components';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { FlatList, Platform, TouchableOpacity } from 'react-native';\r\nimport { Entypo, FontAwesome, FontAwesome5 } from '@expo/vector-icons';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport { useGetUserInfoQuery } from '../api/usersApi';\r\nimport { selectUserKey } from '../../app/appDataSlice';\r\nimport {\r\n  useRemoveClassMutation,\r\n  useRemoveStarredClassMutation\r\n} from '../api/classPagesApi';\r\nimport { classSelected } from './classPagesSlice';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { BottomSheetMethods } from '@gorhom/bottom-sheet/lib/typescript/types';\r\n\r\ntype StarredClassesProps = {\r\n  setAddedClassesVisible: (visible: boolean) => void;\r\n  courseTerm: string;\r\n  darkMode: boolean;\r\n  bottomSheetRef: React.MutableRefObject<BottomSheetMethods>;\r\n};\r\nexport default function StarredClasses({\r\n  setAddedClassesVisible,\r\n  courseTerm,\r\n  darkMode,\r\n  bottomSheetRef\r\n}: StarredClassesProps) {\r\n  const isWeb = Platform.OS === 'web';\r\n  const navigation = useNavigation();\r\n  const dispatch = useAppDispatch();\r\n  const theme = useTheme();\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const [starredCourses, setStarredCourses] = useState([]);\r\n  const { data: userData } = useGetUserInfoQuery(userKey, {\r\n    skip: !userKey\r\n  });\r\n  const allClassesList = useAppSelector(\r\n    (state) => state.appData.classPages.classes\r\n  );\r\n  const [removeStarredClass] = useRemoveStarredClassMutation();\r\n\r\n  useEffect(() => {\r\n    setStarredCourses(userData.starredClasses);\r\n  }, [userData]);\r\n\r\n  const handleRemoveStarredClass = (courseCode: string) => {\r\n    try {\r\n      removeStarredClass({\r\n        userKey,\r\n        courseCode,\r\n        courseTerm,\r\n        userName: userData.userName,\r\n        masterCourseCode: courseCode.slice(0, -3)\r\n      }).unwrap();\r\n    } catch (e) {\r\n      console.warn('Add class error: ', e);\r\n    }\r\n  };\r\n\r\n  function handleClassSelected(courseCode: string) {\r\n    dispatch(classSelected(courseCode));\r\n    setAddedClassesVisible(false);\r\n    if (Platform.OS === 'web') {\r\n      navigation.navigate('SingleClassPage');\r\n    } else {\r\n      bottomSheetRef.current?.snapToIndex(0);\r\n    }\r\n  }\r\n\r\n  function renderItem({ item: course }) {\r\n    const courseData = allClassesList[course.courseCode.slice(0, -3)];\r\n    return (\r\n      <Layout\r\n        style={{\r\n          flexDirection: 'row',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          paddingVertical: 7,\r\n          backgroundColor: darkMode\r\n            ? theme['color-basic-900']\r\n            : theme['color-basic-100']\r\n        }}\r\n      >\r\n        <Layout\r\n          style={{ backgroundColor: 'transparent', flexDirection: 'row' }}\r\n        >\r\n          <Layout\r\n            style={{\r\n              backgroundColor: 'transparent',\r\n              justifyContent: 'center',\r\n              marginRight: isWeb ? 10 : 5\r\n            }}\r\n          >\r\n            <FontAwesome name=\"star\" color=\"gold\" size={15} />\r\n          </Layout>\r\n          <Layout\r\n            style={{ flexDirection: 'column', backgroundColor: 'transparent' }}\r\n          >\r\n            <TouchableOpacity\r\n              onPress={() => {\r\n                handleClassSelected(course.courseCode.slice(0, -3));\r\n              }}\r\n            >\r\n              <Text category=\"s1\">{courseData.courseName}</Text>\r\n              <Text category=\"p2\">{course.courseCode}</Text>\r\n            </TouchableOpacity>\r\n          </Layout>\r\n        </Layout>\r\n\r\n        <TouchableOpacity\r\n          onPress={() => handleRemoveStarredClass(course.courseCode)}\r\n        >\r\n          <Entypo name=\"cross\" size={28} color=\"red\" />\r\n        </TouchableOpacity>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Layout\r\n      style={{\r\n        flex: Platform.OS === 'web' ? undefined : 1,\r\n        paddingBottom: 10,\r\n        backgroundColor: darkMode\r\n          ? theme['color-basic-900']\r\n          : theme['color-basic-100']\r\n      }}\r\n    >\r\n      <Text category=\"h5\" style={{ textAlign: 'center', marginBottom: 10 }}>\r\n        Starred Classes\r\n      </Text>\r\n      <FlatList\r\n        contentContainerStyle={{ width: 300 }}\r\n        automaticallyAdjustsScrollIndicatorInsets\r\n        indicatorStyle={darkMode ? 'white' : 'black'}\r\n        showsVerticalScrollIndicator\r\n        ItemSeparatorComponent={() => <Divider />}\r\n        data={\r\n          starredCourses.length > 0\r\n            ? starredCourses.filter(\r\n                (course) => course.courseTerm === courseTerm\r\n              )\r\n            : []\r\n        }\r\n        renderItem={renderItem}\r\n      />\r\n    </Layout>\r\n  );\r\n}\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport BottomSheet from '@gorhom/bottom-sheet/lib/typescript/components/bottomSheet/BottomSheet';\r\nimport {\r\n  Button,\r\n  Layout,\r\n  List,\r\n  Spinner,\r\n  Text,\r\n  useTheme\r\n} from '@ui-kitten/components';\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  Keyboard,\r\n  LayoutAnimation,\r\n  Platform,\r\n  RefreshControl,\r\n  TouchableOpacity\r\n} from 'react-native';\r\n\r\nimport { selectDarkMode, selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport Message from '../../components/Message';\r\nimport ModalContainer from '../../components/ModalContainer';\r\nimport SearchBar from '../../components/SearchBar';\r\nimport { RENDERED_RESULTS_LIMIT } from '../../constants/classPages';\r\nimport { showToast } from '../../functions';\r\nimport {\r\n  useAddClassMutation,\r\n  useAddMultipleClassesMutation,\r\n  useLazyGetAllClassesQuery,\r\n  useRemoveClassMutation,\r\n  useSwapCoursePriorityMutation\r\n} from '../api/classPagesApi';\r\nimport { useGetUserInfoQuery, useLazyGetUserInfoQuery } from '../api/usersApi';\r\nimport AddedClasses from './AddedClasses';\r\nimport Item from './ClassListItem';\r\nimport FilterClasses from './FilterClasses';\r\nimport SingleClassPage from './SingleClassPage';\r\nimport StarredClasses from './StarredClasses';\r\nimport {\r\n  classSelected,\r\n  endOfListReached,\r\n  resetClasses,\r\n  searchTermUpdated,\r\n  selectClassesList,\r\n  suggestedClassesDimissed\r\n} from './classPagesSlice';\r\n\r\nexport function CurrentTermLabel({\r\n  navigation,\r\n  currentSection,\r\n  style = {},\r\n  textStyle = {},\r\n  disabled = false\r\n}) {\r\n  return (\r\n    <TouchableOpacity\r\n      disabled={disabled}\r\n      style={style}\r\n      onPress={() => navigation.navigate('SelectTerm')}\r\n    >\r\n      <Text category=\"label\" style={textStyle}>\r\n        {`Term: ${currentSection}`}\r\n      </Text>\r\n    </TouchableOpacity>\r\n  );\r\n}\r\n\r\nexport default function ClassesList({ navigation }) {\r\n  const [menuOpen, setMenuOpen] = useState(null);\r\n  const [addedClassesVisible, setAddedClassesVisible] = useState(false);\r\n  const [filtersMenuVisible, setFiltersMenuVisible] = useState(false);\r\n  const [listRef, setListRef] = useState(null);\r\n\r\n  const [addClass] = useAddClassMutation();\r\n  const [addMultipleClasses] = useAddMultipleClassesMutation();\r\n  const [removeClass] = useRemoveClassMutation();\r\n  const [swapAddedClasses] = useSwapCoursePriorityMutation();\r\n  const [fetchUserInfo] = useLazyGetUserInfoQuery();\r\n  const [getClasses, { isLoading: classListLoading, isError }] =\r\n    useLazyGetAllClassesQuery();\r\n  const currentSection = useAppSelector(\r\n    (state) => state.appData.classPages.currentSection\r\n  );\r\n\r\n  // Selectors\r\n  const filters = useAppSelector((state) => state.appData.classPages.filters);\r\n  const isMobile = useAppSelector((state) => state.appData.secure.isMobile);\r\n  const classes = useAppSelector(selectClassesList);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const page = useAppSelector((state) => state.appData.classPages.page);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const searchTerm = useAppSelector(\r\n    (state) => state.appData.classPages.searchTerm\r\n  );\r\n  const renderedClasses = useAppSelector(\r\n    (state) => state.appData.classPages.renderedClasses\r\n  );\r\n  const suggestedClasses = useAppSelector(\r\n    (state) => state.appData.classPages.suggestedClasses\r\n  );\r\n\r\n  const { data: userData, isSuccess: userInfoSuccess } = useGetUserInfoQuery(\r\n    userKey,\r\n    { skip: !userKey }\r\n  );\r\n  const collegeName = userData?.collegeName || 'claremontColleges';\r\n\r\n  const userName = userData?.userName;\r\n  const orderedAddedClasses = userData?.addedClasses?.orderedClasses;\r\n  const addedClasses = userData?.addedClasses?.classes;\r\n  const length = userData?.addedClasses?.classes?.[currentSection]\r\n    ? Object.keys(userData.addedClasses.classes?.[currentSection]).length\r\n    : 0;\r\n\r\n  // Other Hooks\r\n  const theme = useTheme();\r\n  const dispatch = useAppDispatch();\r\n  const bottomSheetRef = useRef<BottomSheet>(null);\r\n\r\n  useEffect(() => {\r\n    fetchClasses();\r\n  }, []);\r\n\r\n  const fetchClasses = async () => {\r\n    if (Object.keys(classes).length === 0) {\r\n      try {\r\n        await getClasses({\r\n          userKey,\r\n          collegeName,\r\n          courseTerm: currentSection\r\n        }).unwrap();\r\n      } catch (e) {\r\n        console.warn('Error getting classes: ', e);\r\n      }\r\n    } else {\r\n      dispatch(resetClasses());\r\n    }\r\n  };\r\n\r\n  const isClassAdded = (courseCode: string, masterCourseCode: string) => {\r\n    return (\r\n      currentSection in addedClasses &&\r\n      masterCourseCode in addedClasses[currentSection] &&\r\n      addedClasses[currentSection][masterCourseCode].includes(courseCode)\r\n    );\r\n  };\r\n\r\n  const handleRefresh = () => {\r\n    fetchUserInfo(userKey);\r\n    fetchClasses();\r\n  };\r\n\r\n  const handleSearch = (searchPhrase: string) => {\r\n    if (listRef) {\r\n      listRef.scrollToOffset({ animated: true, offset: 0 });\r\n    }\r\n    dispatch(searchTermUpdated(searchPhrase));\r\n  };\r\n\r\n  const handleClassSelected = (courseCode: string) => {\r\n    dispatch(classSelected(courseCode));\r\n    if (Platform.OS === 'web') {\r\n      navigation.navigate('SingleClassPage');\r\n    } else {\r\n      bottomSheetRef.current?.snapToIndex(0);\r\n    }\r\n  };\r\n\r\n  const handleAddClass = (courseCode: string, masterCourseCode: string) => {\r\n    try {\r\n      addClass({\r\n        userKey,\r\n        courseCode,\r\n        courseTerm: currentSection,\r\n        userName,\r\n        masterCourseCode\r\n      }).unwrap();\r\n    } catch (e) {\r\n      console.warn('Add class error: ', e);\r\n    }\r\n  };\r\n\r\n  const handleRemoveClass = (courseCode: string, masterCourseCode: string) => {\r\n    try {\r\n      removeClass({\r\n        userKey,\r\n        courseCode,\r\n        courseTerm: currentSection,\r\n        userName,\r\n        masterCourseCode\r\n      }).unwrap();\r\n    } catch (e) {\r\n      console.warn('Add class error: ', e);\r\n    }\r\n  };\r\n\r\n  const handleMassImport = async () => {\r\n    const courseCodes = [\r\n      ...searchTerm.matchAll(/\\b[A-Z]+\\d+[A-Z]*\\s?[A-Z]+-\\d+\\b/g)\r\n    ];\r\n    if (!courseCodes[0]) {\r\n      showToast('No course codes found in search bar', 'maroon');\r\n      return;\r\n    }\r\n    const courseCodePairs = courseCodes.reduce((accumulator, courseCode) => {\r\n      const matches = courseCode[0].match(/(\\D{3,4})(\\d+[A-Z]?[A-Z]?)(.+)/);\r\n\r\n      if (!matches || matches.length !== 4) {\r\n        // Skip this course code\r\n        return accumulator;\r\n      }\r\n\r\n      const collegeParts = matches[3].split('-'); // Ex: [\"PO\", \"01\"]\r\n      const masterCourseCode = `${matches[1].trim()} ${matches[2].trim()} ${collegeParts[0].trim()}`;\r\n      const newCourseCode = `${matches[1].trim()} ${matches[2].trim()} ${matches[3].trim()}`;\r\n      if (isClassAdded(newCourseCode, masterCourseCode)) {\r\n        return accumulator;\r\n      }\r\n      return [...accumulator, { masterCourseCode, courseCode: newCourseCode }];\r\n    }, []);\r\n\r\n    if (courseCodePairs.length === 0) {\r\n      showToast('No new course codes found in search bar', 'maroon');\r\n      return;\r\n    }\r\n\r\n    const message = `Added ${courseCodePairs.length} class(es) to ${currentSection}`;\r\n\r\n    try {\r\n      await addMultipleClasses({\r\n        userKey,\r\n        courseCodePairs,\r\n        courseTerm: currentSection,\r\n        userName\r\n      }).unwrap();\r\n      showToast(message, 'green');\r\n      handleRefresh();\r\n    } catch (e) {\r\n      console.warn('Mass import error: ', e);\r\n      showToast('Error adding classes', 'maroon');\r\n    }\r\n  };\r\n\r\n  const handleSwapAddedClasses = async (from: number, to: number) => {\r\n    if (from === to) {\r\n      return;\r\n    }\r\n    try {\r\n      await swapAddedClasses({\r\n        firstPosition: from,\r\n        secondPosition: to,\r\n        userKey,\r\n        termToUpdate: currentSection,\r\n        userName: userData.userName\r\n      }).unwrap();\r\n    } catch (e) {\r\n      console.warn('Error swapping classes: ', e);\r\n    }\r\n  };\r\n\r\n  const renderItem = ({ item: [masterCourseCode, courseInfo] }) => {\r\n    // check if course is in addedClasses set and set to true if it is\r\n    const inItem = new Array(courseInfo.times.length);\r\n    let inItemSize = 0;\r\n    const schedule = courseInfo.times.map((time) => {\r\n      if (isClassAdded(time.courseCode, masterCourseCode)) {\r\n        inItem[inItemSize++] = time.courseCode;\r\n        return { ...time, added: true };\r\n      }\r\n      return { ...time, added: false };\r\n    });\r\n\r\n    return (\r\n      <Item\r\n        courseName={courseInfo.courseName}\r\n        masterCourseCode={masterCourseCode}\r\n        schedule={schedule}\r\n        menuOpen={menuOpen}\r\n        setIsMenuOpen={setMenuOpen}\r\n        darkMode={darkMode}\r\n        handleClassSelected={handleClassSelected}\r\n        handleAddClass={handleAddClass}\r\n        handleRemoveClass={handleRemoveClass}\r\n        inItem={inItem}\r\n      />\r\n    );\r\n  };\r\n\r\n  const accessoryLeft = (\r\n    <Layout style={{ flexDirection: 'row', backgroundColor: 'transparent' }}>\r\n      <TouchableOpacity\r\n        onPress={() => setAddedClassesVisible(!addedClassesVisible)}\r\n        disabled={!classes || Object.keys(classes).length === 0}\r\n        style={{ justifyContent: 'center', marginRight: 10 }}\r\n      >\r\n        <FontAwesome5\r\n          name=\"list-ul\"\r\n          size={24}\r\n          color={darkMode ? theme['color-basic-500'] : theme['color-basic-200']}\r\n        />\r\n        {length > 0 ? (\r\n          <Layout\r\n            style={{\r\n              position: 'absolute',\r\n              backgroundColor: darkMode ? 'red' : '#fff',\r\n              borderRadius: 10,\r\n              paddingHorizontal: 3,\r\n              right: -7,\r\n              top: -3\r\n            }}\r\n          >\r\n            <Text>{length}</Text>\r\n          </Layout>\r\n        ) : null}\r\n      </TouchableOpacity>\r\n      <TouchableOpacity\r\n        style={{ justifyContent: 'center', marginRight: 10 }}\r\n        onPress={() => setFiltersMenuVisible(!filtersMenuVisible)}\r\n      >\r\n        <FontAwesome5\r\n          name={filtersMenuVisible ? 'chevron-up' : 'chevron-down'}\r\n          size={24}\r\n          color={darkMode ? theme['color-basic-500'] : theme['color-basic-200']}\r\n        />\r\n      </TouchableOpacity>\r\n    </Layout>\r\n  );\r\n\r\n  const renderFilteredCollegesList = () => {\r\n    const filteredColleges = Object.keys(filters.colleges).filter(\r\n      (c) => filters.colleges[c]\r\n    );\r\n\r\n    if (filteredColleges.length < 5) {\r\n      return (\r\n        <Text\r\n          category=\"label\"\r\n          style={{ fontStyle: 'italic', marginTop: 5, color: '#fff' }}\r\n        >\r\n          {`Colleges: ${filteredColleges.join(', ')}`}\r\n        </Text>\r\n      );\r\n    }\r\n    return <Layout style={{ backgroundColor: 'transparent', marginTop: 20 }} />;\r\n  };\r\n\r\n  const dismissSuggestions = () => {\r\n    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\r\n    dispatch(suggestedClassesDimissed());\r\n  };\r\n\r\n  // Decide what content to render\r\n  let content: keyof JSX.IntrinsicElements | JSX.Element;\r\n\r\n  if (classListLoading || !userInfoSuccess) {\r\n    content = <Message title=\"Loading Classes\" item={<Spinner />} />;\r\n  } else if (isError) {\r\n    content = (\r\n      <Message\r\n        title=\"Error Loading Classes\"\r\n        item={<Button onPress={fetchClasses}>Refresh</Button>}\r\n      />\r\n    );\r\n  } else {\r\n    content = (\r\n      <List\r\n        style={{ backgroundColor: 'transparent' }}\r\n        contentContainerStyle={{ paddingBottom: 20 }}\r\n        ListHeaderComponent={\r\n          Object.entries(suggestedClasses).length > 0 &&\r\n          searchTerm.length === 0 && (\r\n            <List\r\n              ListHeaderComponent={\r\n                <Layout\r\n                  style={{\r\n                    marginLeft: 20,\r\n                    marginRight: 25,\r\n                    backgroundColor: 'transparent',\r\n                    flexDirection: 'row',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                  }}\r\n                >\r\n                  <Text category=\"label\" style={{ color: '#fff' }}>\r\n                    Suggested Electives\r\n                  </Text>\r\n                  <TouchableOpacity onPress={dismissSuggestions}>\r\n                    <FontAwesome5 name=\"times\" size={24} color=\"#fff\" />\r\n                  </TouchableOpacity>\r\n                </Layout>\r\n              }\r\n              style={{\r\n                backgroundColor: 'rgba(0,0,0,.2)',\r\n                borderRadius: 20,\r\n                margin: 10,\r\n                paddingBottom: 10,\r\n                paddingTop: 3\r\n              }}\r\n              contentContainerStyle={{ paddingBottom: 100 }}\r\n              data={Object.entries(suggestedClasses)}\r\n              renderItem={renderItem}\r\n              keyExtractor={([courseCode, _]) => courseCode}\r\n              onScroll={Keyboard.dismiss}\r\n              scrollEventThrottle={16}\r\n            />\r\n          )\r\n        }\r\n        data={Object.entries(renderedClasses).slice(\r\n          0,\r\n          RENDERED_RESULTS_LIMIT * page\r\n        )}\r\n        renderItem={renderItem}\r\n        keyExtractor={([courseCode, _]) => courseCode}\r\n        maxToRenderPerBatch={10}\r\n        ListEmptyComponent={\r\n          <Message\r\n            title=\"No Classes Found\"\r\n            item={<Button onPress={fetchClasses}>Refresh</Button>}\r\n          />\r\n        }\r\n        initialNumToRender={10}\r\n        showsVerticalScrollIndicator={Platform.OS === 'web'}\r\n        // ListHeaderComponent={() => <Layout style={{minHeight: 67, opacity: 0}}/>}\r\n        onEndReachedThreshold={0.5}\r\n        onEndReached={() => dispatch(endOfListReached())}\r\n        refreshControl={\r\n          <RefreshControl\r\n            refreshing={classListLoading}\r\n            onRefresh={handleRefresh}\r\n            title=\"Pull to refresh\"\r\n            tintColor={theme['color-basic-100']}\r\n            titleColor={theme['color-basic-100']}\r\n          />\r\n        }\r\n        ref={(ref) => {\r\n          setListRef(ref);\r\n        }}\r\n        onScroll={Keyboard.dismiss}\r\n        scrollEventThrottle={16}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Layout style={{ flex: 1 }}>\r\n      <LinearGradient\r\n        colors={\r\n          darkMode\r\n            ? [theme['color-basic-1100'], theme['color-basic-1100']]\r\n            : [theme['color-primary-500'], theme['color-success-500']]\r\n        }\r\n        style={{ width: '100%', margin: 0, flex: 1 }}\r\n        start={{ x: 0, y: 0 }}\r\n        end={{ x: 1, y: 0.4 }}\r\n      >\r\n        <LinearGradient\r\n          colors={[\r\n            // 'rgba(219,76,113,1)',\r\n            // 'rgba(219,76,113,00)',\r\n\r\n            'rgba(225,78,106,0)',\r\n            'rgba(225,78,106,0)'\r\n            // 'rgba(225,78,106,.6)',\r\n            // 'rgba(225,78,106,0)',\r\n          ]}\r\n          locations={[0, 1]}\r\n          style={{\r\n            zIndex: 1,\r\n            width: '100%',\r\n            paddingHorizontal: 20,\r\n            paddingTop: 14\r\n          }}\r\n        >\r\n          {isMobile && (\r\n            <CurrentTermLabel\r\n              navigation={navigation}\r\n              currentSection={currentSection}\r\n              textStyle={{ color: '#fff', paddingBottom: 5, marginLeft: 80 }}\r\n            />\r\n          )}\r\n          <SearchBar\r\n            accessoryLeft={accessoryLeft}\r\n            searchTerm={searchTerm}\r\n            onChangeText={handleSearch}\r\n            inputProps={{ autoCorrect: false }}\r\n            placeholder=\"Search classes...\"\r\n            alwaysShowCancelButton={Platform.OS === 'web'}\r\n            cancelButtonAction={\r\n              Platform.OS === 'web' ? handleRefresh : () => undefined\r\n            }\r\n          />\r\n          {searchTerm?.length > 30 ? (\r\n            <TouchableOpacity\r\n              style={{ marginLeft: 60, marginTop: 5 }}\r\n              onPress={handleMassImport}\r\n            >\r\n              <Text style={{ color: '#fff' }}>\r\n                <FontAwesome5 name=\"file-import\" color=\"#fff\" />\r\n                {` Import Full Schedule`}\r\n              </Text>\r\n            </TouchableOpacity>\r\n          ) : null}\r\n          {renderFilteredCollegesList()}\r\n        </LinearGradient>\r\n\r\n        {content}\r\n      </LinearGradient>\r\n\r\n      <ModalContainer\r\n        setBackDropVisible={setAddedClassesVisible}\r\n        backDropVisible={addedClassesVisible}\r\n        title=\"Added Classes\"\r\n        modalStyle={{ maxWidth: 400 }}\r\n      >\r\n        {orderedAddedClasses && currentSection ? (\r\n          <Layout\r\n            style={{\r\n              backgroundColor: 'transparent',\r\n              flex: Platform.OS === 'web' ? undefined : 1\r\n            }}\r\n          >\r\n            <AddedClasses\r\n              setAddedClassesVisible={setAddedClassesVisible}\r\n              addedClasses={orderedAddedClasses[currentSection] || []}\r\n              handleRemoveClass={handleRemoveClass}\r\n              darkMode={darkMode}\r\n              handleSwapAddedClasses={handleSwapAddedClasses}\r\n              bottomSheetRef={bottomSheetRef}\r\n            />\r\n            {userData.starredClasses.length > 0 && (\r\n              <StarredClasses\r\n                bottomSheetRef={bottomSheetRef}\r\n                setAddedClassesVisible={setAddedClassesVisible}\r\n                courseTerm={currentSection}\r\n                darkMode={darkMode}\r\n              />\r\n            )}\r\n          </Layout>\r\n        ) : (\r\n          <Layout\r\n            style={{\r\n              flex: 1,\r\n              alignItems: 'center',\r\n              borderRadius: 20,\r\n              paddingTop: 50\r\n            }}\r\n          >\r\n            <Text>Loading</Text>\r\n            <Spinner />\r\n          </Layout>\r\n        )}\r\n      </ModalContainer>\r\n\r\n      <ModalContainer\r\n        setBackDropVisible={setFiltersMenuVisible}\r\n        backDropVisible={filtersMenuVisible}\r\n        title=\"Filters\"\r\n      >\r\n        <FilterClasses\r\n          setFiltersMenuVisible={setFiltersMenuVisible}\r\n          darkMode={darkMode}\r\n        />\r\n      </ModalContainer>\r\n\r\n      {Platform.OS !== 'web' && (\r\n        <SingleClassPage bottomSheetRef={bottomSheetRef} />\r\n      )}\r\n    </Layout>\r\n  );\r\n}\r\n","import { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport React from 'react';\r\n\r\nimport ClassesList from '../../classPages/ClassesList';\r\nimport SingleClassPage from '../../classPages/SingleClassPage';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function ClassListPage() {\r\n  return (\r\n    <Stack.Navigator>\r\n      <Stack.Screen\r\n        name=\"ClassesList\"\r\n        component={ClassesList}\r\n        options={{\r\n          headerShown: false,\r\n          title: ''\r\n        }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"SingleClassPage\"\r\n        component={SingleClassPage}\r\n        options={{\r\n          headerShown: false\r\n        }}\r\n      />\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n","import { Class } from '../../app/types';\r\n\r\nexport default class CalendarFunctions {\r\n  convertTo12HourTime(time) {\r\n    if (time.length !== 5) {\r\n      time = `0${time}`;\r\n    }\r\n    let hours = time.slice(0, 2);\r\n    const minutes = time.slice(3, 5);\r\n    let ampm = Number.parseInt(hours) > 12 ? 'pm' : 'am';\r\n    hours %= 12;\r\n    if (hours === 0) {\r\n      hours = 12;\r\n      ampm = 'pm';\r\n    }\r\n    return `${hours}:${minutes}${ampm}`;\r\n  }\r\n\r\n  getColor(string: string) {\r\n    let final = 0;\r\n    for (let charIndex = 0; charIndex < string.length; charIndex++) {\r\n      final += string.charCodeAt(charIndex);\r\n    }\r\n    final -= Number(final.toString()[0]) * 10 ** (final.toString().length - 1);\r\n    final /= 10 ** final.toString().length;\r\n    return `hsl(${180 * final + 90},${30 + 65 * final}%,${50 + 15 * final}%)`;\r\n  }\r\n\r\n  stringToColour(str: string) {\r\n    return this.getColor(str);\r\n  }\r\n\r\n  getMinutesDiff(startTime, endTime, minuteHeight) {\r\n    if (endTime > startTime) {\r\n      return (endTime - startTime) * minuteHeight;\r\n    }\r\n    if (startTime === endTime) {\r\n      return 0;\r\n    }\r\n    return (startTime - endTime) * -minuteHeight;\r\n  }\r\n\r\n  getFullClassData(courseCode: string, allClassData: any): Class {\r\n    const APIdata = allClassData;\r\n    const generalCourseCode = courseCode.split('-').slice(0, -1).join('-');\r\n    return APIdata[generalCourseCode];\r\n  }\r\n}\r\n","import React from 'react';\r\nimport {\r\n  Dimensions,\r\n  Platform,\r\n  Text,\r\n  TouchableOpacity,\r\n  View\r\n} from 'react-native';\r\n\r\nimport CalendarFunctions from './CalendarFunctions';\r\n\r\nexport default function renderItem(\r\n  masterClassInfo,\r\n  meetingTime,\r\n  courseCode,\r\n  handleClassSelected = (string: string) => {},\r\n  setMenuCourseCode: any,\r\n  disableLongPress: boolean = false,\r\n  extraTransparency: boolean = false\r\n) {\r\n  const calendarFun = new CalendarFunctions();\r\n  const universalHeight = (Dimensions.get('window').height - 50) / 12;\r\n  const minuteHeight = universalHeight / 60;\r\n\r\n  const [startHour, startMinute] = meetingTime.startTime.split(':');\r\n  const [endHour, endMinute] = meetingTime.endTime.split(':');\r\n  const color = calendarFun.stringToColour(masterClassInfo.masterCourseCode);\r\n  const code = courseCode.split(' ');\r\n\r\n  return (\r\n    <TouchableOpacity\r\n      key={Math.random()}\r\n      style={{\r\n          //@ts-ignore\r\n        backgroundColor: extraTransparency ? 'rgba(0, 0, 0, 0.5)' : color,\r\n        top: universalHeight * startHour + startMinute * minuteHeight,\r\n        height:\r\n          universalHeight * (endHour - startHour) +\r\n          calendarFun.getMinutesDiff(startMinute, endMinute, minuteHeight),\r\n        width: '100%',\r\n        position: 'absolute',\r\n        margin: 0,\r\n        justifyContent: 'center'\r\n      }}\r\n      onPress={() => {\r\n        handleClassSelected(masterClassInfo.masterCourseCode);\r\n      }}\r\n      onLongPress={() => {\r\n          if (!disableLongPress) {\r\n              setMenuCourseCode({ key: courseCode });\r\n          }\r\n      }}\r\n    >\r\n      {Platform.OS !== 'web' && (\r\n        <Text\r\n          adjustsFontSizeToFit\r\n          numberOfLines={5}\r\n          style={{\r\n            color: parseInt(color.slice(1), 16) > 9079434 ? 'black' : 'white',\r\n            fontSize: 11,\r\n            marginHorizontal: 3,\r\n            textAlign: 'center'\r\n          }}\r\n        >\r\n          {code[0]} {code[1]}\r\n          {'\\n'}\r\n          {code[2]}\r\n          {meetingTime.classLocation\r\n            ? `\\n(${meetingTime.classLocation})`\r\n            : null}\r\n        </Text>\r\n      )}\r\n      {Platform.OS === 'web' && (\r\n        <View style={{ flexDirection: 'column' }}>\r\n          <Text\r\n            style={{\r\n              color: parseInt(color.slice(1), 16) > 9079434 ? 'black' : 'white',\r\n              fontSize: Dimensions.get('window').width / 115,\r\n              fontWeight: 'bold',\r\n              marginHorizontal: 3,\r\n              textAlign: 'center'\r\n            }}\r\n          >\r\n            {code[0]} {code[1]} {code[2]}\r\n          </Text>\r\n          <Text\r\n            style={{\r\n              color: parseInt(color.slice(1), 16) > 9079434 ? 'black' : 'white',\r\n              fontSize: Dimensions.get('window').width / 125,\r\n              marginHorizontal: 3,\r\n              textAlign: 'center',\r\n              marginTop: 5\r\n            }}\r\n          >\r\n            {meetingTime.classLocation\r\n              ? `(${meetingTime.classLocation})`\r\n              : null}\r\n          </Text>\r\n        </View>\r\n      )}\r\n    </TouchableOpacity>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Dimensions, Text, TouchableOpacity } from 'react-native';\r\nimport Toast from 'react-native-root-toast';\r\n\r\nimport CalendarFunctions from './CalendarFunctions';\r\n\r\nexport default function renderCustomEvent(\r\n  event,\r\n  userData,\r\n  userKey,\r\n  editUser,\r\n  setMenuEvent,\r\n  disableLongPress: boolean = false,\r\n  extraTransparency = false\r\n) {\r\n  const universalHeight = (Dimensions.get('window').height - 50) / 12;\r\n  const minuteHeight = universalHeight / 60;\r\n  const calendarFun = new CalendarFunctions();\r\n  const [startHour, startMinute] = event.startTime.split(':');\r\n  const [endHour, endMinute] = event.endTime.split(':');\r\n  const color = calendarFun.stringToColour(event.name);\r\n\r\n  function removeEvent(event: any) {\r\n    editUser({\r\n      userKey,\r\n      userName: userData.userName,\r\n      fields: JSON.stringify({\r\n        removeCustomEvent: {\r\n          name: event.name,\r\n          startTime: event.startTime,\r\n          endTime: event.endTime,\r\n          days: event.days\r\n        }\r\n      })\r\n    })\r\n      .unwrap()\r\n      .catch(() => {\r\n        Toast.show('Failed to remove event.\\nPlease try again later', {\r\n          duration: Toast.durations.SHORT,\r\n          opacity: 1,\r\n          position: -100,\r\n          backgroundColor: 'grey',\r\n          shadow: false\r\n      });\r\n      });\r\n  }\r\n\r\n  return (\r\n    <TouchableOpacity\r\n      onLongPress={() => {\r\n        if (!disableLongPress) {\r\n          setMenuEvent({ key: event.name, event: event });\r\n        }\r\n        // Alert.alert(\r\n        //   event.name,\r\n        //   `${calendarFun.convertTo12HourTime(\r\n        //     event.startTime\r\n        //   )} - ${calendarFun.convertTo12HourTime(event.endTime)}`,\r\n        //   [\r\n        //     {\r\n        //       text: 'Remove',\r\n        //       onPress: () => {\r\n        //         removeEvent(event);\r\n        //       }\r\n        //     },\r\n        //     {\r\n        //       text: 'Back',\r\n        //       onPress: () => {},\r\n        //       style: 'cancel'\r\n        //     }\r\n        //   ],\r\n        //   { cancelable: true }\r\n        // );\r\n      }}\r\n      key={event.name + event.days}\r\n      style={{\r\n        backgroundColor: extraTransparency ? 'rgba(0, 0, 0, 0.5)' : color,\r\n        top: universalHeight * startHour + startMinute * minuteHeight,\r\n        height:\r\n          universalHeight * (endHour - startHour) +\r\n          calendarFun.getMinutesDiff(startMinute, endMinute, minuteHeight),\r\n        width: '100%',\r\n        position: 'absolute',\r\n        justifyContent: 'center'\r\n      }}\r\n    >\r\n      <Text\r\n        adjustsFontSizeToFit\r\n        numberOfLines={endHour - startHour + 2}\r\n        style={{ color: 'white', textAlign: 'center' }}\r\n      >\r\n        {event.name}\r\n      </Text>\r\n    </TouchableOpacity>\r\n  );\r\n}\r\n","import { Entypo } from '@expo/vector-icons';\r\nimport BottomSheet from '@gorhom/bottom-sheet/lib/typescript/components/bottomSheet/BottomSheet';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { Button, useTheme } from '@ui-kitten/components';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  Dimensions,\r\n  PanResponder,\r\n  Platform,\r\n  ScrollView,\r\n  Text,\r\n  View,\r\n  useWindowDimensions, TouchableOpacity\r\n} from 'react-native';\r\nimport Animated from 'react-native-reanimated';\r\nimport { selectDarkMode, selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport { CustomEvent } from '../../app/types';\r\nimport ModalContainer from '../../components/ModalContainer';\r\nimport { getMasterCourseCodeFromCourseCode, showToast } from '../../functions';\r\nimport { useRemoveClassMutation } from '../api/classPagesApi';\r\nimport { useEditUserMutation, useGetUserInfoQuery } from '../api/usersApi';\r\nimport { CurrentTermLabel } from '../classPages/ClassesList';\r\nimport SingleClassPage from '../classPages/SingleClassPage';\r\nimport {\r\n  classSelected,\r\n  selectClassesList\r\n} from '../classPages/classPagesSlice';\r\nimport ClassListPage from '../combinedCalender/classList';\r\nimport { base_URL } from '../notifications/constants';\r\nimport CalendarFunctions from './CalendarFunctions';\r\nimport renderItem from './ScheduledItem';\r\nimport renderCustomEvent from './customEvent';\r\n\r\n// LogBox.ignoreAllLogs();\r\nconst DIVIDER_WIDTH = 15;\r\nconst WINDOW_MIN_WIDTH = 200;\r\n\r\nexport default function CalendarRender({\r\n  route: {\r\n    params: { overrideData }\r\n  }\r\n}) {\r\n  const [ showOverlay, setShowOverlay ] = useState(false)\r\n  const isWeb = Platform.OS === 'web';\r\n  const theme = useTheme();\r\n  const [editUser] = useEditUserMutation();\r\n  const [removeClass] = useRemoveClassMutation();\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const isThreeDay = useAppSelector(\r\n    (state) => state.appData.calendar.isThreeDay\r\n  );\r\n  const isMobile = useAppSelector((state) => state.appData.secure.isMobile);\r\n  const navigation = useNavigation();\r\n\r\n  const topBar = useRef(null);\r\n  const verticalRef = useRef(null);\r\n  const [currentTime, setCurrentTime] = useState(new Date());\r\n  const [startingOffset, setStartingOffset] = useState({\r\n    x: 0,\r\n    y: isWeb ? 500 : 525\r\n  });\r\n  const dimensions = useWindowDimensions();\r\n  const [rightWidth, setRightWidth] = useState(\r\n    (2 * (dimensions.width - DIVIDER_WIDTH - 100)) / 7\r\n  );\r\n  const [menuCourseCode, setMenuCourseCode] = useState<\r\n    { key: string } | boolean\r\n  >(false);\r\n  const [menuCustomEvent, setMenuCustomEvent] = useState<\r\n    { key: string; event: CustomEvent } | boolean\r\n  >(false);\r\n  const leftWidth = dimensions.width - DIVIDER_WIDTH;\r\n\r\n  const _panResponder = useRef(getPanResponder());\r\n  const dispatch = useAppDispatch();\r\n  const bottomSheetRef = useRef<BottomSheet>(null);\r\n  const darkMode: boolean = useAppSelector(selectDarkMode);\r\n  const calendarFun = new CalendarFunctions();\r\n  const [isDividerClicked, setIsDividerClicked] = useState(false);\r\n  const universalHeight = (Dimensions.get('window').height - 50) / 12;\r\n  const threeDayWidth = (Dimensions.get('window').width - 75) / 3;\r\n  const fiveDayWidth = isMobile\r\n    ? (Dimensions.get('window').width - 75) / 5\r\n    : (Dimensions.get('window').width - 75) / 7;\r\n  const [classes, setClasses] = useState({\r\n    Monday: [],\r\n    Tuesday: [],\r\n    Wednesday: [],\r\n    Thursday: [],\r\n    Friday: [],\r\n    Saturday: [],\r\n    Sunday: []\r\n  });\r\n  const days = [\r\n    { day: 'Mon', id: 'Monday' },\r\n    { day: 'Tues', id: 'Tuesday' },\r\n    { day: 'Wed', id: 'Wednesday' },\r\n    { day: 'Thurs', id: 'Thursday' },\r\n    { day: 'Fri', id: 'Friday' },\r\n    { day: 'Sat', id: 'Saturday' },\r\n    { day: 'Sun', id: 'Sunday' }\r\n  ];\r\n  const times = [\r\n    '12:00 AM',\r\n    '1:00 AM',\r\n    '2:00 AM',\r\n    '3:00 AM',\r\n    '4:00 AM',\r\n    '5:00 AM',\r\n    '6:00 AM',\r\n    '7:00 AM',\r\n    '8:00 AM',\r\n    '9:00 AM',\r\n    '10:00 AM',\r\n    '11:00 AM',\r\n    '12:00 PM',\r\n    '1:00 PM',\r\n    '2:00 PM',\r\n    '3:00 PM',\r\n    '4:00 PM',\r\n    '5:00 PM',\r\n    '6:00 PM',\r\n    '7:00 PM',\r\n    '8:00 PM',\r\n    '9:00 PM',\r\n    '10:00 PM',\r\n    '11:00 PM'\r\n  ];\r\n\r\n  const { data: userData } = useGetUserInfoQuery(userKey);\r\n  const orderedAddedClasses = useAppSelector(\r\n    (state) => state.appData.classPages.orderedAddedClasses\r\n  );\r\n  const allClassData = useAppSelector(selectClassesList);\r\n  const [overrideClassesToRender, setOverrideClassesToRender] = useState([]);\r\n  const currentSection = useAppSelector(\r\n    (state) => state.appData.classPages.currentSection\r\n  );\r\n\r\n  const today = new Date().getDay() !== 0 ? new Date().getDay() - 1 : 6;\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (overrideData.length !== 0) {\r\n        getOverrideCourseData().then(() => {});\r\n      }\r\n    } catch (e) {\r\n      console.warn(e);\r\n    }\r\n    if (isWeb) {\r\n      verticalRef.current?.scrollTo({\r\n        y: Dimensions.get('screen').height / 1.9\r\n      });\r\n    }\r\n\r\n    // Recalculate time\r\n    setInterval(() => {\r\n      setCurrentTime(new Date());\r\n    }, 1000000);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    _panResponder.current = getPanResponder();\r\n  }, [dimensions.width]);\r\n\r\n  async function getOverrideCourseData() {\r\n    const stringOverrideData = JSON.stringify(\r\n      overrideData.map((course) => {\r\n        return course.courseCode.slice(0, -3);\r\n      })\r\n    );\r\n    const response = await fetch(\r\n      `${base_URL}/classes/claremontColleges?listOfCourses=${stringOverrideData}&courseTerm=${overrideData[0].courseTerm}`,\r\n      {\r\n        headers: {\r\n          userKey,\r\n          'content-type': 'application/json'\r\n        },\r\n        method: 'GET'\r\n      }\r\n    );\r\n    setOverrideClassesToRender(await response.json());\r\n  }\r\n\r\n  const renderCustomEvents = (elem, extraTransparency = false, disableInteractions = false) => {\r\n    const finalRender = [];\r\n    if (!userData.customEvents) {\r\n      return null;\r\n    }\r\n    for (const event of userData.customEvents) {\r\n      if (event.days.includes(elem.id)) {\r\n        finalRender.push(\r\n          renderCustomEvent(\r\n            event,\r\n            userData,\r\n            userKey,\r\n            editUser,\r\n            setMenuCustomEvent,\r\n              disableInteractions,\r\n              extraTransparency\r\n          )\r\n        );\r\n      } else if (\r\n        event.date &&\r\n        eventIsThisDay(elem.id, new Date(event.date)) &&\r\n        showThisWeek(new Date(event.date))\r\n      ) {\r\n        finalRender.push(\r\n          renderCustomEvent(\r\n            event,\r\n            userData,\r\n            userKey,\r\n            editUser,\r\n            setMenuCustomEvent,\r\n              disableInteractions,\r\n              extraTransparency\r\n          )\r\n        );\r\n      }\r\n    }\r\n    return finalRender;\r\n  };\r\n\r\n  function getPanResponder() {\r\n    return PanResponder.create({\r\n      // @ts-ignore\r\n      onMoveShouldSetResponderCapture: () => true,\r\n      onMoveShouldSetPanResponderCapture: () => true,\r\n\r\n      onPanResponderGrant: (e, gestureState) => {\r\n        setIsDividerClicked(true);\r\n      },\r\n\r\n      onPanResponderMove: (e, gestureState) => {\r\n        const newRight =\r\n          gestureState.moveX > dimensions.width - 100\r\n            ? 100\r\n            : dimensions.width - gestureState.moveX;\r\n\r\n        if (newRight > WINDOW_MIN_WIDTH || rightWidth === 0) {\r\n          setRightWidth(newRight);\r\n        } else {\r\n          setRightWidth(0);\r\n        }\r\n      },\r\n\r\n      onPanResponderRelease: (e, gestureState) => {\r\n        setIsDividerClicked(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  function eventIsThisDay(dayString: string, date: Date) {\r\n    const dayOfWeek = adjustDays(date.getDay());\r\n    return dayString === days[dayOfWeek].id;\r\n  }\r\n\r\n  function adjustDays(dayOfWeek) {\r\n    if (dayOfWeek === 0) {\r\n      dayOfWeek = 6;\r\n    } else {\r\n      dayOfWeek -= 1;\r\n    }\r\n    return dayOfWeek;\r\n  }\r\n\r\n  function getMs(hours, minutes, seconds) {\r\n    let final = 0;\r\n    final += hours * 3600000;\r\n    final += minutes * 60000;\r\n    final += seconds * 1000;\r\n    return final;\r\n  }\r\n\r\n  function showThisWeek(dateOfEvent: Date) {\r\n    const currentDate = new Date();\r\n    const currentDayOfWeek = adjustDays(currentDate.getDay());\r\n    const startOfWeek = new Date(\r\n      currentDate.valueOf() -\r\n        currentDayOfWeek * 86400000 -\r\n        getMs(\r\n          currentDate.getHours(),\r\n          currentDate.getMinutes(),\r\n          currentDate.getSeconds()\r\n        )\r\n    );\r\n    const endOfWeek = new Date(\r\n      currentDate.valueOf() +\r\n        (6 - currentDayOfWeek) * 86400000 +\r\n        getMs(\r\n          23 - currentDate.getHours(),\r\n          59 - currentDate.getMinutes(),\r\n          59 - currentDate.getSeconds()\r\n        )\r\n    );\r\n    return !(\r\n      dateOfEvent.valueOf() > endOfWeek.valueOf() ||\r\n      dateOfEvent.valueOf() < startOfWeek.valueOf()\r\n    );\r\n  }\r\n\r\n  const handleClassSelected = (courseCode: string) => {\r\n    dispatch(classSelected(courseCode));\r\n    if (Platform.OS === 'web') {\r\n      // @ts-ignore\r\n      navigation.navigate('SingleClassPage');\r\n    } else {\r\n      bottomSheetRef.current?.snapToIndex(0);\r\n    }\r\n  };\r\n\r\n  const handleRemoveClass = () => {\r\n    if (typeof menuCourseCode !== 'object') {\r\n      return;\r\n    }\r\n    const masterCourseCode = getMasterCourseCodeFromCourseCode(\r\n      menuCourseCode.key\r\n    );\r\n    try {\r\n      removeClass({\r\n        userKey,\r\n        courseCode: menuCourseCode.key,\r\n        courseTerm: currentSection,\r\n        userName: userData.userName,\r\n        masterCourseCode\r\n      }).unwrap();\r\n      setMenuCourseCode(false);\r\n    } catch (e) {\r\n      console.warn('Add class error: ', e);\r\n      showToast('Failed to remove class', 'red');\r\n    }\r\n  };\r\n\r\n  function renderOverlayOption() {\r\n    return (\r\n        <TouchableOpacity\r\n            style={{\r\n              borderWidth:1,\r\n              borderColor:'rgba(0,0,0,0.2)',\r\n              alignItems:'center',\r\n              justifyContent:'center',\r\n              position: 'absolute',\r\n              bottom: 50,\r\n              right: isWeb ? undefined : 25,\r\n              left: isWeb ? 100 : undefined,\r\n              width:100,\r\n              height:100,\r\n              backgroundColor:'rgba(149,56,182,0.59)',\r\n              borderRadius:50,\r\n            }}\r\n            onPress={() => {\r\n              setShowOverlay(!showOverlay)\r\n            }}\r\n        >\r\n          <Text>{(showOverlay ? 'Disable' : 'Enable') + '\\n'}Overlay</Text>\r\n        </TouchableOpacity>\r\n    )\r\n  }\r\n\r\n  const handleRemoveCustomEvent = () => {\r\n    if (typeof menuCustomEvent !== 'object') {\r\n      return;\r\n    }\r\n    const event = menuCustomEvent.event;\r\n    editUser({\r\n      userKey,\r\n      userName: userData.userName,\r\n      fields: JSON.stringify({\r\n        removeCustomEvent: {\r\n          name: event.name,\r\n          startTime: event.startTime,\r\n          endTime: event.endTime,\r\n          days: event.days\r\n        }\r\n      })\r\n    })\r\n      .unwrap()\r\n      .then(() => {\r\n        setMenuCustomEvent(false);\r\n      })\r\n      .catch((e) => {\r\n        showToast('Failed to remove event', 'red');\r\n        console.warn(\"Couldn't remove custom event: \", e);\r\n      });\r\n  };\r\n\r\n  function renderDashes() {\r\n    const final = [];\r\n    for (let i = 0; i < 24; i++) {\r\n      final.push(\r\n        <View\r\n          key={i}\r\n          style={{\r\n            width: (isThreeDay ? threeDayWidth : fiveDayWidth) * 0.73016,\r\n            marginLeft: (isThreeDay ? threeDayWidth : fiveDayWidth) * 0.14286,\r\n            top: universalHeight * i,\r\n            position: 'absolute',\r\n            height: universalHeight,\r\n            borderBottomWidth: Platform.OS === 'web' ? 1.2 : 0.7,\r\n            borderBottomColor: darkMode ? 'rgb(68,68,68)' : 'rgb(204,204,204)'\r\n          }}\r\n        />\r\n      );\r\n    }\r\n    return final;\r\n  }\r\n\r\n  const renderClasses = (elem, extraTransparency = false, disableInteractions = false) => {\r\n    const classes = [];\r\n    Object.keys(orderedAddedClasses).map((term) => {\r\n      if (term === currentSection) {\r\n        // @ts-ignore\r\n        orderedAddedClasses[term].toReversed().map((courseCode) => {\r\n          try {\r\n            const data = calendarFun.getFullClassData(courseCode, allClassData);\r\n            if (!data) return <View></View> // catch for somehow missing data; usually cached issue or missing term information; not sure\r\n            const data2 = data.times.find(\r\n              (time) => time.courseCode === courseCode\r\n            );\r\n            for (const meetingTime of data2.courseSchedule) {\r\n              for (const day in meetingTime.daysOfTheWeek) {\r\n                if (meetingTime.daysOfTheWeek[day] === elem.id) {\r\n                  classes.push(\r\n                    renderItem(\r\n                      data,\r\n                      meetingTime,\r\n                      courseCode,\r\n                      handleClassSelected,\r\n                      setMenuCourseCode,\r\n                        disableInteractions,\r\n                         extraTransparency\r\n                    )\r\n                  );\r\n                }\r\n              }\r\n            }\r\n          } catch (e) {\r\n            console.warn(e);\r\n          }\r\n        });\r\n      }\r\n    });\r\n    return classes;\r\n  };\r\n\r\n  function renderClassesForOverride(elem) {\r\n    const classes = [];\r\n    if (overrideClassesToRender.length > 0) {\r\n      for (const courseCode of overrideData.map((course) => {\r\n        return course.courseCode;\r\n      })) {\r\n        try {\r\n          const data = overrideClassesToRender.find((course) =>\r\n            course.times.some(\r\n              (courseTime) => courseTime.courseCode === courseCode\r\n            )\r\n          );\r\n          const data2 = data.times.find(\r\n            (time) => time.courseCode === courseCode\r\n          );\r\n          for (const meetingTime of data2.courseSchedule) {\r\n            for (const day in meetingTime.daysOfTheWeek) {\r\n              if (meetingTime.daysOfTheWeek[day] === elem.id) {\r\n                classes.push(\r\n                  renderItem(\r\n                    data,\r\n                    meetingTime,\r\n                    courseCode,\r\n                    handleClassSelected,\r\n                    setMenuCourseCode,\r\n                    true\r\n                  )\r\n                );\r\n              }\r\n            }\r\n          }\r\n        } catch (e) {\r\n          console.warn(e);\r\n        }\r\n      }\r\n    }\r\n    return classes;\r\n  }\r\n\r\n  function renderDeleteModal(\r\n    event: { key: string; [key: string]: any } | boolean,\r\n    onRemove: () => void,\r\n    onCancel: () => void\r\n  ) {\r\n    return (\r\n      <ModalContainer\r\n        backDropVisible={!!event}\r\n        title={typeof event === 'object' ? event.key : ''}\r\n        setBackDropVisible={onCancel}\r\n        modalStyle={{ maxHeight: 200 }}\r\n        modalProps={{ animationOut: 'fadeOut' }}\r\n      >\r\n        <View\r\n          style={{\r\n            flex: 1,\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            borderRadius: 20,\r\n            backgroundColor: darkMode\r\n              ? theme['color-basic-900']\r\n              : theme['color-basic-100']\r\n          }}\r\n        >\r\n          <Button style={{ marginBottom: 10 }} onPress={onRemove}>\r\n            Remove\r\n          </Button>\r\n          <Button appearance=\"outline\" onPress={onCancel}>\r\n            Cancel\r\n          </Button>\r\n        </View>\r\n      </ModalContainer>\r\n    );\r\n  }\r\n\r\n  function masterRender(elem) {\r\n    if (overrideClassesToRender.length !== 0) {\r\n      if (showOverlay) {\r\n        return (\r\n          <View>\r\n            {renderClassesForOverride(elem)}\r\n            {userData?.addedClasses && renderClasses(elem, true, true)}\r\n            {userData?.addedClasses && renderCustomEvents(elem, true, true)}\r\n          </View>\r\n        )\r\n      } else {\r\n        return (\r\n          <View>\r\n            {renderClassesForOverride(elem)}\r\n          </View>\r\n        )\r\n      }\r\n    }\r\n    return (\r\n      <View>\r\n        {userData?.addedClasses && renderClasses(elem)}\r\n        {userData?.addedClasses && renderCustomEvents(elem)}\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View\r\n      style={{\r\n        flex: 1,\r\n        backgroundColor: darkMode ? null : 'white',\r\n        flexDirection: 'row',\r\n        borderRadius: 10\r\n      }}\r\n    >\r\n      <Animated.View\r\n        style={[\r\n          { flex: 1 },\r\n          !isMobile && { minWidth: WINDOW_MIN_WIDTH, width: leftWidth }\r\n        ]}\r\n      >\r\n        {/* Times */}\r\n        {overrideData.length === 0 && (\r\n          <CurrentTermLabel\r\n            navigation={navigation}\r\n            currentSection={currentSection}\r\n            style={{ margin: 10 }}\r\n          />\r\n        )}\r\n        <ScrollView\r\n          horizontal\r\n          snapToInterval={isThreeDay ? threeDayWidth : fiveDayWidth}\r\n          showsHorizontalScrollIndicator={false}\r\n          style={{ marginLeft: 75, height: isWeb ? 43 : undefined }}\r\n          ref={topBar}\r\n        >\r\n          <View style={{ flexDirection: 'row' }}>\r\n            {days.map((elem, index) => {\r\n              return (\r\n                <View key={index}>\r\n                  <View\r\n                    style={{\r\n                      borderColor: darkMode ? '#7a7a7a' : '#525252',\r\n                      borderBottomWidth: 1,\r\n                      width: '100%',\r\n                      borderRadius: index === today ? 5 : 0,\r\n                      backgroundColor:\r\n                        index === today ? theme['color-success-400'] : null\r\n                    }}\r\n                  >\r\n                    <Animated.Text\r\n                      style={{\r\n                        textAlign: 'center',\r\n                        width: isThreeDay ? threeDayWidth : fiveDayWidth,\r\n                        color:\r\n                          index === today\r\n                            ? 'white'\r\n                            : darkMode\r\n                            ? 'white'\r\n                            : 'black'\r\n                      }}\r\n                    >\r\n                      {elem.day}\r\n                    </Animated.Text>\r\n                  </View>\r\n                </View>\r\n              );\r\n            })}\r\n          </View>\r\n        </ScrollView>\r\n        <ScrollView\r\n          contentOffset={startingOffset}\r\n          showsVerticalScrollIndicator={isWeb}\r\n          bounces={false}\r\n          ref={verticalRef}\r\n        >\r\n          <View style={{ flexDirection: 'row' }}>\r\n            <View style={{ justifyContent: 'space-around' }}>\r\n              {times.map((time, index) => {\r\n                return (\r\n                  <Text\r\n                    key={index}\r\n                    style={{\r\n                      height: universalHeight,\r\n                      width: 75,\r\n                      borderWidth: 1,\r\n                      borderColor: darkMode ? '#7a7a7a' : '#525252',\r\n                      textAlign: 'center',\r\n                      color: darkMode ? '#7a7a7a' : '#525252'\r\n                    }}\r\n                  >\r\n                    {time}\r\n                  </Text>\r\n                );\r\n              })}\r\n            </View>\r\n            {/* Classes */}\r\n            <ScrollView\r\n              horizontal\r\n              snapToInterval={isThreeDay ? threeDayWidth : fiveDayWidth}\r\n              decelerationRate=\"normal\"\r\n              showsHorizontalScrollIndicator={isWeb}\r\n              bounces={false}\r\n              scrollEventThrottle={1}\r\n              onScroll={(e) =>\r\n                topBar.current.scrollTo({\r\n                  x: e.nativeEvent.contentOffset.x,\r\n                  animated: false,\r\n                  useNativeDriver: true\r\n                })\r\n              }\r\n              onMomentumScrollBegin={(e) =>\r\n                topBar.current.scrollTo({\r\n                  x: e.nativeEvent.contentOffset.x,\r\n                  animated: false,\r\n                  useNativeDriver: true\r\n                })\r\n              }\r\n            >\r\n              <View style={{ flexDirection: 'row' }}>\r\n                {days.map((elem, index) => {\r\n                  return (\r\n                    <View key={index}>\r\n                      {renderDashes()}\r\n                      {/* Current Time Indicator */}\r\n                      {index === today && (\r\n                        <View\r\n                          style={{\r\n                            top:\r\n                              universalHeight * new Date().getHours() +\r\n                              new Date().getMinutes() * (universalHeight / 60),\r\n                            position: 'absolute',\r\n                            height: 2,\r\n                            width: '100%',\r\n                            backgroundColor: 'red',\r\n                            justifyContent: 'center',\r\n                            zIndex: 10\r\n                          }}\r\n                        >\r\n                          <View\r\n                            style={{\r\n                              width: 10,\r\n                              height: 10,\r\n                              backgroundColor: 'red',\r\n                              borderRadius: 5,\r\n                              position: 'relative',\r\n                              right: 4\r\n                            }}\r\n                          />\r\n                        </View>\r\n                      )}\r\n\r\n                      <View\r\n                        key={elem.day}\r\n                        style={{\r\n                          width: isThreeDay ? threeDayWidth : fiveDayWidth\r\n                        }}\r\n                      >\r\n                        {masterRender(elem)}\r\n                      </View>\r\n                      <View\r\n                        style={{\r\n                          height: '100%',\r\n                          width: 1,\r\n                          backgroundColor: darkMode ? '#7a7a7a' : '#525252'\r\n                        }}\r\n                      />\r\n                    </View>\r\n                  );\r\n                })}\r\n              </View>\r\n            </ScrollView>\r\n          </View>\r\n        </ScrollView>\r\n        {Platform.OS !== 'web' && Object.entries(overrideData).length === 0 && (\r\n          <SingleClassPage bottomSheetRef={bottomSheetRef} />\r\n        )}\r\n      </Animated.View>\r\n      {!isMobile && (\r\n        <View\r\n          style={[\r\n            {\r\n              width: DIVIDER_WIDTH,\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            },\r\n            isDividerClicked\r\n              ? { backgroundColor: '#666' }\r\n              : { backgroundColor: '#e2e2e2' }\r\n          ]}\r\n          {..._panResponder.current.panHandlers}\r\n        >\r\n          <Entypo name=\"dots-three-vertical\" size={20} />\r\n        </View>\r\n      )}\r\n      <Animated.View style={!isMobile && { width: rightWidth }}>\r\n        {!isMobile && <ClassListPage />}\r\n      </Animated.View>\r\n      {renderDeleteModal(menuCourseCode, handleRemoveClass, () => {\r\n        setMenuCourseCode(false);\r\n      })}\r\n      {renderDeleteModal(menuCustomEvent, handleRemoveCustomEvent, () => {\r\n        setMenuCustomEvent(false);\r\n      })}\r\n      {overrideData.length > 0 && renderOverlayOption()}\r\n    </View>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { LogBox } from 'react-native';\r\n\r\nimport CalendarRender from './CalendarRender';\r\n\r\nLogBox.ignoreAllLogs();\r\n\r\nexport default function CalendarPage({ navigation }) {\r\n  return (\r\n    <CalendarRender\r\n      route={{\r\n        params: {\r\n          overrideData: []\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nconst myStyles = {\r\n  input: {\r\n    height: 50,\r\n    margin: 12,\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  indentedInput: {\r\n    height: 50,\r\n    marginVertical: 12,\r\n    borderWidth: 1,\r\n    padding: 10,\r\n    marginRight: 12,\r\n    marginLeft: 30\r\n  },\r\n  text: {\r\n    fontSize: 16,\r\n    lineHeight: 21,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  },\r\n  button: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 32,\r\n    borderRadius: 4,\r\n    elevation: 3,\r\n    backgroundColor: 'black'\r\n  },\r\n  timeButton: {\r\n    width: 100,\r\n    height: 50,\r\n    marginHorizontal: 40,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    borderRadius: 4,\r\n    backgroundColor: '#c45269'\r\n  },\r\n  timeText: {\r\n    fontSize: 16,\r\n    lineHeight: 21,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  },\r\n  actualTimeText: {\r\n    fontSize: 13,\r\n    lineHeight: 18,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  }\r\n};\r\n\r\nconst sponsorPageStyles = {\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: 'white'\r\n    // alignItems: 'center',\r\n  },\r\n  header: {\r\n    marginTop: 20,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: '100%'\r\n  },\r\n  address: {\r\n    alignItems: 'center',\r\n    margin: 10,\r\n    borderColor: 'black',\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  video: {\r\n    marginTop: 20,\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  title: {\r\n    fontSize: 26,\r\n    marginLeft: 10\r\n  },\r\n  logo: {\r\n    width: '100%',\r\n    height: 100\r\n  },\r\n  description: {\r\n    borderWidth: 1,\r\n    margin: 10,\r\n    borderColor: '#5d5c5c',\r\n    borderRadius: 5,\r\n    width: '95%',\r\n    padding: 10,\r\n    backgroundColor: 'rgba(178,166,166,0.22)'\r\n  },\r\n  couponContainer: {\r\n    width: '100%',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginTop: 20,\r\n    marginBottom: 20\r\n  },\r\n  coupon: {\r\n    width: 400,\r\n    height: 267\r\n  },\r\n  imageGallery: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    margin: 10,\r\n    marginBottom: 0\r\n  },\r\n  imageStyle: {\r\n    width: 150,\r\n    height: 150,\r\n    paddingTop: 100,\r\n    margin: 5\r\n  },\r\n  headerText: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold'\r\n  }\r\n};\r\n","import { Layout } from '@ui-kitten/components';\r\nimport React from 'react';\r\n\r\nexport default function WrapItems({ childStyle, children, ...LayoutProps }) {\r\n  return (\r\n    <Layout {...LayoutProps}>\r\n      {React.Children.map(children, (child) => (\r\n        <Layout style={childStyle}>{child}</Layout>\r\n      ))}\r\n    </Layout>\r\n  );\r\n}\r\n","import DateTimePicker from '@react-native-community/datetimepicker';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport {\r\n  Button,\r\n  Text,\r\n  CheckBox,\r\n  Input,\r\n  Layout,\r\n  Select,\r\n  SelectItem\r\n} from '@ui-kitten/components';\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  Keyboard,\r\n  Platform,\r\n  TouchableOpacity,\r\n  TouchableWithoutFeedback,\r\n  View\r\n} from 'react-native';\r\nimport Toast from 'react-native-root-toast';\r\nimport Loader from 'react-native-three-dots-loader';\r\n\r\nimport { selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport WrapItems from '../../components/WrapItems';\r\nimport { useEditUserMutation, useGetUserInfoQuery } from '../api/usersApi';\r\n\r\nexport default function CreateCustomEvent() {\r\n  const [editUser] = useEditUserMutation();\r\n  const [showDots, setShowDots] = useState(false);\r\n  const navigation = useNavigation();\r\n  const dateToUse = new Date();\r\n  const [selectedDate, setSelectedDate] = useState(dateToUse);\r\n  const [isOneDay, setIsOneDay] = useState(false);\r\n  const [allValuesPopulated, setAllValuesPopulated] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState([]);\r\n  const [daysArray, setDaysArray] = useState([]);\r\n  const [startTime, setStartTime] = useState(new Date());\r\n  const [endTime, setEndTime] = useState(new Date());\r\n  const [eventTitle, setEventTitle] = useState('');\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const { data: userData } = useGetUserInfoQuery(userKey, {\r\n    skip: !userKey\r\n  });\r\n\r\n  const daysOfWeek = [\r\n    'Monday',\r\n    'Tuesday',\r\n    'Wednesday',\r\n    'Thursday',\r\n    'Friday',\r\n    'Saturday',\r\n    'Sunday'\r\n  ];\r\n\r\n  useEffect(() => {\r\n    setAllValuesPopulated(\r\n      (isOneDay\r\n        ? selectedDate.toISOString() !== dateToUse.toISOString()\r\n        : daysArray.length >= 1) &&\r\n        eventTitle !== '' &&\r\n        startTime < endTime\r\n    );\r\n  }, [daysArray, eventTitle, startTime, endTime, selectedDate, isOneDay]);\r\n\r\n  function addEvent() {\r\n    setShowDots(true);\r\n    editUser({\r\n      userKey,\r\n      userName: userData.userName,\r\n      fields: JSON.stringify({\r\n        addCustomEvent: {\r\n          name: eventTitle,\r\n          startTime: startTime.toTimeString().slice(0, 5),\r\n          endTime: endTime.toTimeString().slice(0, 5),\r\n          days: daysArray,\r\n          date:\r\n            selectedDate.toISOString() !== dateToUse.toISOString()\r\n              ? selectedDate.toISOString()\r\n              : null\r\n        }\r\n      })\r\n    })\r\n      .unwrap()\r\n      .then(async () => {\r\n        setTimeout(() => {\r\n          setShowDots(false);\r\n          navigation.goBack();\r\n        }, 2000);\r\n      })\r\n      .catch(() => {\r\n        setShowDots(false);\r\n        Toast.show('Failed to add event.\\nPlease try again later', {\r\n          duration: Toast.durations.LONG,\r\n          opacity: 1,\r\n          position: -100,\r\n          backgroundColor: 'grey',\r\n          shadow: false\r\n        });\r\n      });\r\n    /*\r\n        fetch(base_URL + '/users/' + userData.userName, {\r\n            method: 'PATCH',\r\n            body: JSON.stringify({\r\n                \"addCustomEvent\": {\r\n                    \"name\": eventTitle,\r\n                    \"startTime\": startTime.toTimeString().slice(0, 5),\r\n                    \"endTime\": endTime.toTimeString().slice(0, 5),\r\n                    \"days\": daysArray\r\n                },\r\n            }),\r\n            headers: {\r\n                'content-type': 'application/json',\r\n                userKey: userKey\r\n            }\r\n        }).then((res) => {\r\n            if (res.ok) {\r\n                navigation.goBack()\r\n            } else {\r\n                Toast.show(\r\n                    \"Failed to add event\\nStatus: \" + res.status,\r\n                    {\r\n                        duration: Toast.durations.LONG,\r\n                        opacity: 1,\r\n                        position: -100,\r\n                        backgroundColor: 'grey',\r\n                        shadow: false,\r\n                    }\r\n                );\r\n            }\r\n        }) */\r\n  }\r\n\r\n  // Needed because Android date picker uses a modal\r\n  const [showTimePickerAndroid, setShowTimePickerAndroid] = useState(false);\r\n\r\n  const timePickerOptions = useMemo(\r\n    () => ({\r\n      'Start Time': { time: startTime, setTime: setStartTime },\r\n      'End Time': { time: endTime, setTime: setEndTime }\r\n    }),\r\n    [startTime, setStartTime, endTime, setEndTime]\r\n  );\r\n\r\n  const formatAMPM = (date: Date) => {\r\n    let hours = date.getHours();\r\n    let minutes: string | number = date.getMinutes();\r\n    const ampm = hours >= 12 ? 'pm' : 'am';\r\n    hours %= 12;\r\n    hours = hours || 12;\r\n    minutes = minutes < 10 ? `0${minutes}` : minutes;\r\n    return `${hours}:${minutes} ${ampm}`;\r\n  };\r\n\r\n  const Title = (\r\n    <Layout\r\n      style={{\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-evenly',\r\n        alignItems: 'center',\r\n        marginTop: 15\r\n      }}\r\n    >\r\n      <Input\r\n        label=\"Title\"\r\n        disabled={showDots}\r\n        placeholder=\"Title of Event\"\r\n        value={eventTitle}\r\n        style={{ flex: 5 }}\r\n        onChangeText={(title) => {\r\n          setEventTitle(title);\r\n        }}\r\n      />\r\n    </Layout>\r\n  );\r\n\r\n  function TimePicker() {\r\n    if (Platform.OS === 'android') {\r\n      return (\r\n        <Layout\r\n          style={{\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-around'\r\n          }}\r\n        >\r\n          {Object.entries(timePickerOptions).map(\r\n            ([label, { time, setTime }], i) => (\r\n              <Layout key={i} style={{ alignItems: 'center' }}>\r\n                <Text category=\"label\" style={{ marginBottom: 5 }}>\r\n                  {label}\r\n                </Text>\r\n                <Button\r\n                  onPress={() => {\r\n                    setShowTimePickerAndroid(true);\r\n                  }}\r\n                >\r\n                  {formatAMPM(time)}\r\n                </Button>\r\n                {showTimePickerAndroid && (\r\n                  <DateTimePicker\r\n                    mode=\"time\"\r\n                    onChange={(change, date) => {\r\n                      setTime(date);\r\n                      setShowTimePickerAndroid(false);\r\n                    }}\r\n                    value={time}\r\n                  />\r\n                )}\r\n              </Layout>\r\n            )\r\n          )}\r\n        </Layout>\r\n      );\r\n    }\r\n    if (Platform.OS === 'ios') {\r\n      return (\r\n        <Layout\r\n          style={{\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-around'\r\n          }}\r\n        >\r\n          {Object.entries(timePickerOptions).map(\r\n            ([label, { time, setTime }], i) => (\r\n              <Layout key={i} style={{ alignItems: 'center' }}>\r\n                <Text category=\"label\" style={{ marginBottom: 5 }}>\r\n                  {label}\r\n                </Text>\r\n\r\n                <DateTimePicker\r\n                  mode=\"time\"\r\n                  onChange={(change, date) => {\r\n                    setTime(date);\r\n                  }}\r\n                  value={time}\r\n                />\r\n              </Layout>\r\n            )\r\n          )}\r\n        </Layout>\r\n      );\r\n    }\r\n  }\r\n\r\n  if (Platform.OS === 'web') {\r\n    return (\r\n      <Text>\r\n        Creating Events is not supported on the web. Download the app on the App\r\n        Store or Play Store to make a new Event.\r\n      </Text>\r\n    );\r\n  }\r\n\r\n  const renderMultiSelectDropDown = () => {\r\n    function renderEachDropItem() {\r\n      const final = [];\r\n      for (const option of daysOfWeek) {\r\n        final.push(<SelectItem title={option} />);\r\n      }\r\n      return final;\r\n    }\r\n    function toggleValue(index) {\r\n      setSelectedIndex(index);\r\n      const newSelection = index.map((littleIndex) => {\r\n        return daysOfWeek[littleIndex - 1];\r\n      });\r\n      setDaysArray(newSelection);\r\n    }\r\n    function calculateSelectedValues() {\r\n      const finalArray = selectedIndex.map((littleIndex) => {\r\n        return `${daysOfWeek[littleIndex - 1]}, `;\r\n      });\r\n      if (finalArray.length > 0) {\r\n        let finalObject = finalArray.at(-1);\r\n        finalObject = finalObject.replace(', ', '');\r\n        finalArray.splice(-1, 1);\r\n        finalArray.push(finalObject);\r\n        return finalArray;\r\n      }\r\n    }\r\n    return (\r\n      <Layout\r\n        style={{\r\n          flexDirection: 'row',\r\n          justifyContent: 'space-evenly',\r\n          alignItems: 'center',\r\n          marginTop: 15\r\n        }}\r\n        level=\"1\"\r\n      >\r\n        <Select\r\n          style={{ flex: 5 }}\r\n          multiSelect\r\n          label=\"Days\"\r\n          disabled={showDots}\r\n          value={daysArray.length > 0 ? calculateSelectedValues() : null}\r\n          selectedIndex={selectedIndex}\r\n          onSelect={(index) => toggleValue(index)}\r\n        >\r\n          {renderEachDropItem()}\r\n        </Select>\r\n      </Layout>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout style={{ flex: 1 }}>\r\n      <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\r\n        <WrapItems childStyle={{ marginVertical: 10, marginHorizontal: 15 }}>\r\n          {Title}\r\n          <TimePicker />\r\n          <CheckBox\r\n            style={{ alignSelf: 'center', marginTop: 20 }}\r\n            checked={isOneDay}\r\n            onChange={(nextChecked) => {\r\n              setDaysArray([]);\r\n              setSelectedIndex([]);\r\n              setSelectedDate(dateToUse);\r\n              setIsOneDay(nextChecked);\r\n            }}\r\n          >\r\n            One Time Event\r\n          </CheckBox>\r\n          {isOneDay ? (\r\n            <DateTimePicker\r\n              testID=\"datePicker\"\r\n              value={selectedDate}\r\n              mode=\"date\"\r\n              style={{ alignSelf: 'center', marginVertical: 15 }}\r\n              onChange={(event, date) => setSelectedDate(date)}\r\n            />\r\n          ) : (\r\n            renderMultiSelectDropDown()\r\n          )}\r\n          <TouchableOpacity\r\n            style={{\r\n              backgroundColor: allValuesPopulated\r\n                ? '#a245ee'\r\n                : 'rgba(162,69,238,0.34)',\r\n              width: '35%',\r\n              alignSelf: 'center',\r\n              height: 45,\r\n              borderRadius: 3,\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}\r\n            onPress={addEvent}\r\n            disabled={!allValuesPopulated || showDots}\r\n          >\r\n            <View>\r\n              <Text style={{ color: '#f2f0f1', fontSize: 15 }}>\r\n                Create Event\r\n              </Text>\r\n            </View>\r\n          </TouchableOpacity>\r\n          {showDots && (\r\n            <Loader\r\n              style={{\r\n                position: 'absolute',\r\n                marginTop: '30%',\r\n                marginHorizontal: 'auto'\r\n              }}\r\n            />\r\n          )}\r\n        </WrapItems>\r\n      </TouchableWithoutFeedback>\r\n    </Layout>\r\n  );\r\n}\r\n","import {\r\n  Autocomplete,\r\n  AutocompleteItem,\r\n  Card,\r\n  Modal\r\n} from '@ui-kitten/components';\r\nimport {\r\n  JSXElementConstructor,\r\n  ReactElement,\r\n  useEffect,\r\n  useState\r\n} from 'react';\r\nimport { Alert, Button, View, Text } from 'react-native';\r\n\r\nimport renderItem from './ScheduledItem';\r\nimport { selectDarkMode, selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport UserNameSelectionDropDown from '../../components/UserNameSelectionDropDown';\r\nimport { useGetCurrentSectionQuery } from '../api/classPagesApi';\r\nimport { useGetUserInfoQuery } from '../api/usersApi';\r\nimport { base_URL } from '../notifications/constants';\r\n\r\nexport default function renderModal(setShowModal, showModal) {\r\n  const { data: userData } = useGetUserInfoQuery(useAppSelector(selectUserKey));\r\n  const { data: currentSection } = useGetCurrentSectionQuery();\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const [names, setNames] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [value, setValue] = useState('');\r\n  const [hasChosen, setHasChosen] = useState(false);\r\n  const [recipient, setRecipient] = useState(null);\r\n\r\n  const myStyles = {\r\n    modal: {\r\n      fontSize: 18,\r\n      paddingBottom: 20,\r\n      fontWeight: 'bold',\r\n      textAlign: 'center',\r\n      width: '100%',\r\n      color: darkMode ? 'rgb(255,255,255)' : 'rgb(0,0,0)'\r\n    },\r\n    backdrop: {\r\n      backgroundColor: darkMode ? 'rgba(141,141,141,0.5)' : 'rgba(0, 0, 0, 0.5)'\r\n    },\r\n    containerDrop: {\r\n      minWidth: 200,\r\n      paddingBottom: 15\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(`${base_URL}/users/userNamesAndNames`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then(async (data) => {\r\n      if (data.ok) {\r\n        const userList = await data.json();\r\n        setNames(\r\n          userList.map((user) => {\r\n            if (user) {\r\n              return `${user.realName} (${user.userName})`;\r\n            }\r\n          })\r\n        );\r\n        setUsers(userList);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const exportSchedule = async (recipient) => {\r\n    function convert(addedClasses) {\r\n      const final = [];\r\n      Object.keys(addedClasses).map((term) => {\r\n        if (term === currentSection) {\r\n          Object.keys(addedClasses[term]).map((masterCourseCode) => {\r\n            for (const courseCode of addedClasses[term][masterCourseCode]) {\r\n              final.push({\r\n                courseCode,\r\n                courseTerm: currentSection\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n      return final;\r\n    }\r\n    const status = await fetch(`${base_URL}/users/sendNotification`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      },\r\n      body: JSON.stringify({\r\n        recipients: [recipient],\r\n        text: JSON.stringify(convert(userData.addedClasses?.classes)),\r\n        title: `${userData.realFirstName}'s Schedule (${currentSection})`,\r\n        isSchedule: true\r\n      })\r\n    });\r\n    return status.ok;\r\n  };\r\n  return (\r\n    <Modal\r\n      visible={showModal}\r\n      backdropStyle={myStyles.backdrop}\r\n      style={{ width: '80%', height: '70%' }}\r\n      onBackdropPress={() => setShowModal(false)}\r\n    >\r\n      <Card disabled>\r\n        <Text style={myStyles.modal}>Share Your Schedule</Text>\r\n        {UserNameSelectionDropDown({\r\n          setHasChosen,\r\n          setRecipient,\r\n          placeholder: false\r\n        })}\r\n        <View>\r\n          <Button\r\n            disabled={recipient === null}\r\n            title=\"Send\"\r\n            onPress={() => {\r\n              exportSchedule(recipient).then((returnValue) => {\r\n                setShowModal(false);\r\n                returnValue\r\n                  ? Alert.alert('Message Sent')\r\n                  : Alert.alert(\r\n                      'Error Sending Message',\r\n                      'Please Try Again Later'\r\n                    );\r\n              });\r\n            }}\r\n          />\r\n          <Button\r\n            title=\"Dismiss\"\r\n            onPress={() => {\r\n              setShowModal(false);\r\n            }}\r\n          />\r\n        </View>\r\n      </Card>\r\n    </Modal>\r\n  );\r\n}\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { Layout, Text, useTheme } from '@ui-kitten/components';\r\nimport React, { useState } from 'react';\r\nimport {\r\n  Dimensions,\r\n  Image,\r\n  Platform,\r\n  TouchableOpacity,\r\n  View\r\n} from 'react-native';\r\nimport Toggle from 'react-native-toggle-element';\r\n\r\nimport {\r\n  selectDarkMode,\r\n  selectIsGuest,\r\n  selectUserKey\r\n} from '../../app/appDataSlice';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport Header from '../../components/Header';\r\nimport ModalContainer from '../../components/ModalContainer';\r\nimport { exportToICal } from '../../functions';\r\nimport { useGetUserInfoQuery } from '../api/usersApi';\r\nimport SelectTerm from '../classPages/SelectTerm';\r\nimport { base_URL } from '../notifications/constants';\r\nimport CalendarPage from './CalendarPage';\r\nimport CreateCustomEvent from './CreateCustomEvent';\r\nimport { isThreeDaySet } from './calendarSlice';\r\nimport renderModal from './exportModal';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function Calendar() {\r\n  const navigation = useNavigation();\r\n  const isThreeDay = useAppSelector(\r\n    (state) => state.appData.calendar.isThreeDay\r\n  );\r\n  const theme = useTheme();\r\n  const dispatch = useAppDispatch();\r\n  const isGuest = useAppSelector(selectIsGuest);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const currentSection = useAppSelector(\r\n    (state) => state.appData.classPages.currentSection\r\n  );\r\n  const classes = useAppSelector((state) => state.appData.classPages.classes);\r\n  const { data: userData } = useGetUserInfoQuery(userKey);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [showGuestModal, setShowGuestModal] = useState(false);\r\n  const [showWebModal, setShowWebModal] = useState(false);\r\n  async function sendNotification(bodyTosend) {\r\n    await fetch(`${base_URL}/users/sendNotification`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      },\r\n      body: JSON.stringify(bodyTosend)\r\n    });\r\n  }\r\n  const accessoryLeft = (\r\n    <Image\r\n      style={{\r\n        height: 28,\r\n        width: 28,\r\n        alignItems: 'center'\r\n      }}\r\n      source={require('../../../assets/logos/app-logo-transparent.png')}\r\n    />\r\n  );\r\n\r\n  const title = (\r\n    <View\r\n      style={{\r\n        alignItems: 'center',\r\n        paddingRight: 20\r\n      }}\r\n    >\r\n      {Dimensions.get('window').width < 525 && (\r\n        <Toggle\r\n          leftComponent={\r\n            <FontAwesome5 name=\"compress-arrows-alt\" size={14} color=\"#fff\" />\r\n          }\r\n          rightComponent={\r\n            <FontAwesome5 name=\"expand-arrows-alt\" size={15} color=\"#fff\" />\r\n          }\r\n          trackBar={{\r\n            activeBackgroundColor: theme['color-primary-500'],\r\n            inActiveBackgroundColor: theme['color-primary-500'],\r\n            width: 60,\r\n            height: 23\r\n          }}\r\n          thumbButton={{\r\n            width: 30,\r\n            height: 30,\r\n            activeBackgroundColor: theme['color-primary-800'],\r\n            inActiveBackgroundColor: theme['color-primary-300'],\r\n            activeColor: theme['color-primary-100'],\r\n            inActiveColor: '#fff',\r\n            borderWidth: 5\r\n          }}\r\n          value={isThreeDay}\r\n          onPress={(bool) => dispatch(isThreeDaySet(bool))}\r\n          animationDuration={10}\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n  const accessoryRight = (\r\n    <View\r\n      style={{\r\n        paddingHorizontal: 0,\r\n        alignItems: 'center',\r\n        flexDirection: 'row'\r\n      }}\r\n    >\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          if (isGuest) {\r\n            setShowGuestModal(true);\r\n          } else {\r\n            // @ts-ignore\r\n            navigation.navigate('CreateCustomEvent');\r\n          }\r\n        }}\r\n        style={{\r\n          marginRight: 10,\r\n          alignItems: 'center'\r\n        }}\r\n      >\r\n        <View\r\n          style={{\r\n            height: 45,\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'flex-end'\r\n          }}\r\n        >\r\n          <FontAwesome5\r\n            name=\"plus\"\r\n            size={20}\r\n            color={darkMode ? 'white' : 'black'}\r\n          />\r\n          <Text style={{ paddingTop: 5, fontSize: 10 }}>Add Event</Text>\r\n        </View>\r\n      </TouchableOpacity>\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          if (Platform.OS === 'web') {\r\n            const times = Object.entries(\r\n              userData.addedClasses.classes[currentSection]\r\n            ).flatMap(([masterCourseCode, courseCodes]) => {\r\n              return courseCodes.flatMap((courseCode) => {\r\n                return classes[masterCourseCode].times.filter(\r\n                  (time) => time.courseCode === courseCode\r\n                );\r\n              });\r\n            });\r\n            const calendar = exportToICal(times);\r\n            console.log(calendar);\r\n          } else if (isGuest) {\r\n            setShowGuestModal(true);\r\n          } else {\r\n            setShowModal(true);\r\n            setShowWebModal(true);\r\n          }\r\n        }}\r\n        style={{\r\n          alignItems: 'center'\r\n        }}\r\n      >\r\n        <View\r\n          style={{\r\n            height: 45,\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'flex-end'\r\n          }}\r\n        >\r\n          <FontAwesome5\r\n            name=\"file-export\"\r\n            size={20}\r\n            color={darkMode ? 'white' : 'black'}\r\n          />\r\n          <Text style={{ paddingTop: 5, fontSize: 10 }}>Share Schedule</Text>\r\n        </View>\r\n      </TouchableOpacity>\r\n      {showGuestModal && (\r\n        <ModalContainer\r\n          title=\"Wait!\"\r\n          children={\r\n            <Text style={{ paddingHorizontal: 30 }}>\r\n              This feature is locked to our Guest Users. Please create a free\r\n              account with us to take advantage this feature.\r\n            </Text>\r\n          }\r\n          backDropVisible={showGuestModal}\r\n          setBackDropVisible={setShowGuestModal}\r\n        />\r\n      )}\r\n      {Platform.OS === 'web' && showWebModal && (\r\n        <ModalContainer\r\n          title=\"Wait!\"\r\n          children={\r\n            <Text style={{ paddingHorizontal: 30 }}>\r\n              Sharing schedules is not supported on the web. Download the app on\r\n              the App Store or Play Store to share schedules.\r\n            </Text>\r\n          }\r\n          backDropVisible={showWebModal}\r\n          setBackDropVisible={setShowWebModal}\r\n        />\r\n      )}\r\n      {Platform.OS !== 'web' && renderModal(setShowModal, showModal)}\r\n    </View>\r\n  );\r\n  return (\r\n    <Stack.Navigator>\r\n      <Stack.Screen\r\n        name=\"CalendarPage\"\r\n        component={CalendarPage}\r\n        options={{\r\n          header: () => {\r\n            return (\r\n              <Layout style={{ paddingBottom: 10 }}>\r\n                <Header\r\n                  center={title}\r\n                  accessoryRight={accessoryRight}\r\n                  accessoryLeft={accessoryLeft}\r\n                  title=\"Calendar\"\r\n                />\r\n              </Layout>\r\n            );\r\n          }\r\n        }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"CreateCustomEvent\"\r\n        component={CreateCustomEvent}\r\n        options={{ headerTitle: 'Add Event' }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"SelectTerm\"\r\n        component={SelectTerm}\r\n        options={{\r\n          title: 'Select Term',\r\n          headerShown: false,\r\n          animation: 'slide_from_bottom',\r\n          gestureDirection: 'vertical'\r\n        }}\r\n      />\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n","import Loader from 'react-native-three-dots-loader';\r\nimport {FontAwesome5, Ionicons} from '@expo/vector-icons';\r\nimport { useIsFocused, useNavigation } from '@react-navigation/native';\r\nimport {Layout, Text} from '@ui-kitten/components';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport React, { useEffect, useState } from 'react';\r\nimport {\r\n  Alert, Button,\r\n  Dimensions,\r\n  FlatList,\r\n  Image,\r\n  Keyboard,\r\n  KeyboardAvoidingView,\r\n  LogBox,\r\n  Platform,\r\n  SafeAreaView, ScrollView,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  View\r\n} from 'react-native';\r\nimport Toast from 'react-native-root-toast';\r\nimport { io } from 'socket.io-client';\r\nimport { selectUserKey } from '../../../app/appDataSlice';\r\n\r\nimport { useAppSelector } from '../../../app/hooks';\r\nimport SearchBar from '../../../components/SearchBar';\r\nimport { base_URL } from '../../../constants/admin';\r\nimport { useGetCurrentSectionQuery } from '../../api/classPagesApi';\r\nimport {useAddOrRemoveUserFromChatRoomMutation, useEditUserMutation, useGetUserInfoQuery} from '../../api/usersApi';\r\nimport ModalContainer from \"../../../components/ModalContainer\";\r\n\r\nexport default function SingleChatRoom({\r\n  route: {\r\n    params: { data }\r\n  }\r\n}) {\r\n  const [imagePickerStatus, requestImagePickerPermission] =\r\n    ImagePicker.useMediaLibraryPermissions();\r\n  const [cameraStatus, requestCameraPermission] =\r\n    ImagePicker.useCameraPermissions();\r\n  const [filter, setFilter] = useState('');\r\n  const [showSearch, setShowSearch] = useState(false);\r\n  const [photoSelected, setPhotoSelected] = useState({\r\n    date: null,\r\n    id: null,\r\n    contentImage: null\r\n  });\r\n  const [ addOrRemoveUser ] = useAddOrRemoveUserFromChatRoomMutation()\r\n  const [editUser] = useEditUserMutation();\r\n  const isCustomRoom = data.userList !== undefined\r\n  const [keyboardShown, setKeyboardShown] = useState(false);\r\n  const [retryNumber, setRetryNumber] = useState(0);\r\n  const [failedConnection, setFailedConnection] = useState(false);\r\n  const [hardDisableSend, setHardDisableSend] = useState(false);\r\n  const navigation = useNavigation();\r\n  const [ showUserList, setShowUserList ] = useState(false)\r\n  const [message, setMessage] = useState('');\r\n  const [filteredMessageList, setFilteredMessageList] = useState([]);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const { data: userData } = useGetUserInfoQuery(userKey, {\r\n    skip: !userKey\r\n  });\r\n  const { data: currentSection, isLoading: isCurrentSectionLoading } =\r\n    useGetCurrentSectionQuery();\r\n  const [messageList, setMessageList] = useState([]);\r\n  const socket = io(`${base_URL}/realTimeChat/${data.id}`, {\r\n    auth: {\r\n      userKey\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Bug with some component i guess cause i didn't use animated anything, yet expo has a seizure and spams warnings\r\n    LogBox.ignoreLogs(['Animated: `useNativeDriver`']);\r\n\r\n    // Keyboard listeners\r\n    const showListener = Keyboard.addListener('keyboardWillShow', () => {\r\n      setKeyboardShown(true);\r\n    });\r\n    const hideListener = Keyboard.addListener('keyboardWillHide', () => {\r\n      setKeyboardShown(false);\r\n    });\r\n\r\n    return () => {\r\n      showListener.remove();\r\n      hideListener.remove();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    navigation.setOptions({\r\n      headerTitle: data.title\r\n          ? data.title\r\n          : data.id === 'public'\r\n              ? 'Public'\r\n              : data.id === 'admin'\r\n                  ? 'Admin'\r\n                  : data.id,\r\n      headerRight: () => (\r\n          <Layout style={{ flexDirection: 'row', marginRight: 30 }}>\r\n            <TouchableOpacity\r\n                style={{ marginRight: isCustomRoom ? 25 : undefined }}\r\n                onPress={() => {\r\n                  setFilter('');\r\n                  setShowSearch(!showSearch);\r\n                }}\r\n            >\r\n              <FontAwesome5 name=\"search\" size={24} color=\"black\" />\r\n            </TouchableOpacity>\r\n            {isCustomRoom &&\r\n                <TouchableOpacity\r\n                    onPress={() => {\r\n                      setShowUserList(true);\r\n                    }}\r\n                >\r\n                  <Ionicons name=\"person\" size={24} color=\"black\" />\r\n                </TouchableOpacity>\r\n            }\r\n          </Layout>\r\n      )\r\n    });\r\n  }, [showSearch]);\r\n\r\n  useEffect(() => {\r\n    // maintenance\r\n\r\n    // socket logic\r\n    socket.connect();\r\n    const timer = setTimeout(() => {\r\n      socket.off('connect');\r\n      socket.off('newMessage');\r\n      socket.disconnect();\r\n      socket.close();\r\n      setFailedConnection(true);\r\n    }, 10000);\r\n    socket.on('connect', () => {\r\n      clearTimeout(timer);\r\n      getMessages();\r\n    });\r\n    return () => {\r\n      setLoaded(false);\r\n      socket.disconnect();\r\n      socket.off('connect');\r\n      socket.off('newMessage');\r\n    };\r\n  }, [useIsFocused(), retryNumber]);\r\n\r\n  // Add all new message changes here\r\n  useEffect(() => {\r\n    socket.on('imageMessageServer', (msg) => {\r\n      addMessage(msg);\r\n    });\r\n    socket.on('newMessage', (msg) => {\r\n      addMessage(msg);\r\n    });\r\n    socket.on('deleteMessage', (msg) => {\r\n      const index = messageList.findIndex((mess) => isEqualTo(mess, msg));\r\n      if (index !== -1) {\r\n        // @ts-ignore\r\n        setMessageList([...messageList].toSpliced(index, 1));\r\n      }\r\n    });\r\n    return () => {\r\n      socket.off('imageMessageServer');\r\n      socket.off('newMessage');\r\n      socket.off('deleteMessage');\r\n    };\r\n  }, [messageList]);\r\n\r\n  function getMessages() {\r\n    fetch(`${base_URL}/chatRooms/getMessages?roomId=${data.id}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then(async (data) => {\r\n      if (!data.ok) {\r\n        setFailedConnection(true);\r\n      } else {\r\n        data.json().then(async (array) => {\r\n          setMessageList(array);\r\n          setLoaded(true);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  function isUserBlocked(userName: string, dataToUse = userData) {\r\n    return dataToUse.blockedUsers.includes(userName)\r\n  }\r\n\r\n  useEffect(() => {\r\n    setFilteredMessageList(\r\n      messageList.filter((mess) =>\r\n        (mess.user + mess.message).toLowerCase().includes(filter.toLowerCase())\r\n      )\r\n    );\r\n  }, [filter]);\r\n\r\n  function addMessage(messageToAdd) {\r\n    const myMessage = messageList.find((mess) => isEqualTo(mess, messageToAdd));\r\n    if (myMessage) {\r\n      delete myMessage.isUnsent;\r\n      setMessageList(\r\n        [...messageList]\r\n          .filter((mess) => !isEqualTo(mess, messageToAdd))\r\n          .concat(myMessage)\r\n      );\r\n    } else {\r\n      setMessageList([...messageList].concat(messageToAdd));\r\n    }\r\n  }\r\n\r\n  function isEqualTo(message1, message2) {\r\n    try {\r\n      return message1.user === message2.user && message1.date === message2.date;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async function activateCamera() {\r\n    const date = new Date().toISOString();\r\n    const response = await requestCameraPermission();\r\n    if (response.granted || cameraStatus.granted) {\r\n      const result = await ImagePicker.launchCameraAsync({\r\n        mediaTypes: ImagePicker.MediaTypeOptions.Images\r\n      });\r\n      if (!result.canceled) {\r\n        setMessage('');\r\n        setPhotoSelected({\r\n          id: userData.userName + date + data.id + currentSection,\r\n          contentImage: result.assets[0],\r\n          date\r\n        });\r\n      }\r\n    } else {\r\n      Alert.alert(\r\n        \"Permission to access camera is required. Please enable it in your phone's settings.\"\r\n      );\r\n    }\r\n  }\r\n\r\n  async function selectPhoto() {\r\n    const date = new Date().toISOString();\r\n    const response = await requestImagePickerPermission();\r\n    if (response.granted || imagePickerStatus.granted) {\r\n      const result = await ImagePicker.launchImageLibraryAsync({\r\n        allowsEditing: false\r\n      });\r\n      if (!result.canceled) {\r\n        setMessage('');\r\n        setPhotoSelected({\r\n          id: userData.userName + date + data.id + currentSection,\r\n          contentImage: result.assets[0],\r\n          date\r\n        });\r\n      }\r\n    } else {\r\n      Alert.alert(\r\n        \"Permission to access camera roll is required. Please enable it in your phone's settings.\"\r\n      );\r\n    }\r\n  }\r\n\r\n  function deleteTheMessage(messageToDelete) {\r\n    if (messageToDelete.user === userData.userName) {\r\n      socket.emit('deleteMyMessage', messageToDelete);\r\n      setMessageList(\r\n        messageList.filter((mess) => !isEqualTo(mess, messageToDelete))\r\n      );\r\n      Toast.show('Message Deleted', {\r\n        duration: Toast.durations.SHORT,\r\n        opacity: 0.7,\r\n        position: Toast.positions.CENTER,\r\n        backgroundColor: 'grey',\r\n        shadow: false\r\n      });\r\n    }\r\n  }\r\n\r\n  async function sendNewMessage() {\r\n    setHardDisableSend(true); // basically a semaphore lol\r\n    if (message !== '') {\r\n      const newMessage = {\r\n        message,\r\n        date: new Date().toISOString(),\r\n        user: userData.userName,\r\n        isUnsent: true\r\n      };\r\n      setMessageList([...messageList].concat(newMessage));\r\n      delete newMessage.isUnsent;\r\n      socket.emit('newMessageClient', newMessage);\r\n      setMessage('');\r\n    }\r\n    if (photoSelected.id !== null) {\r\n      const { date } = photoSelected;\r\n      setMessageList(\r\n        [...messageList].concat({\r\n          isImage: true,\r\n          isUnsent: true,\r\n          message: photoSelected.contentImage.uri,\r\n          user: userData.userName,\r\n          date\r\n        })\r\n      );\r\n\r\n      const photo = photoSelected;\r\n      setPhotoSelected({ date: null, id: null, contentImage: null });\r\n\r\n      const formdata = new FormData();\r\n      formdata.append('picture', JSON.stringify({\r\n        // @ts-ignore\r\n        uri: photo.contentImage.uri,\r\n        name: 'picture',\r\n        type: 'image/jpg'\r\n      }).substring(1, -1));\r\n      formdata.append('id', photo.id);\r\n      formdata.append('date', date);\r\n      const res = await fetch(`${base_URL}/chatRooms/uploadImage`, {\r\n        method: 'POST',\r\n        redirect: 'follow',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          userKey\r\n        },\r\n        body: formdata\r\n      });\r\n      if (res.ok) {\r\n        const newMessage = {\r\n          date,\r\n          user: userData.userName,\r\n          message: photo.id\r\n        };\r\n        socket.emit('imageMessageClient', newMessage);\r\n      }\r\n    }\r\n    setHardDisableSend(false);\r\n  }\r\n\r\n  function handleLeaveChat() {\r\n    addOrRemoveUser({userKey, chatRoomId: data.id, userName: userData.userName}).then(() => navigation.goBack()).catch(() => {\r\n      setShowUserList(false)\r\n      Toast.show('Error leaving chat, try again later')\r\n    })\r\n  }\r\n\r\n  function deletionAlert(messageToDelete) {\r\n    if (messageToDelete.user === userData.userName) {\r\n      Alert.alert(\r\n        'Delete Message',\r\n        'This action cannot be undone',\r\n        [\r\n          {\r\n            text: 'Confirm',\r\n            onPress: () => {\r\n              deleteTheMessage(messageToDelete);\r\n            }\r\n          },\r\n          {\r\n            text: 'Cancel',\r\n            style: 'cancel'\r\n          }\r\n        ],\r\n        { cancelable: true }\r\n      );\r\n    }\r\n  }\r\n\r\n  const renderItem = ({ item }) => (\r\n    <TouchableOpacity\r\n      disabled={item?.isUnsent}\r\n      onLongPress={() => deletionAlert(item)}\r\n      style={{\r\n        opacity: item?.isUnsent ? 0.4 : 1,\r\n        flexDirection: 'row',\r\n        marginVertical: 5,\r\n        minHeight: item.isImage ? windowHeight * 0.25 : undefined,\r\n        width: '100%'\r\n      }}\r\n    >\r\n      <Text style={{ paddingRight: 10, fontWeight: 'bold' }}>{item.user}:</Text>\r\n      {item.isImage ? (\r\n        <Image\r\n          source={{ uri: item.message }}\r\n          style={{ flex: 1, resizeMode: 'contain' }}\r\n        />\r\n      ) : (\r\n        <Text style={{ flex: 1, flexWrap: 'wrap' }}>{item.message}</Text>\r\n      )}\r\n    </TouchableOpacity>\r\n  );\r\n  const windowHeight = Dimensions.get('screen').height;\r\n\r\n  return (\r\n    <SafeAreaView style={{ flex: 1 }}>\r\n      <KeyboardAvoidingView style={{ flex: 1 }}>\r\n        <View\r\n          style={[\r\n            styles.messagingScreen,\r\n            { paddingVertical: 5, paddingHorizontal: 10 }\r\n          ]}\r\n        >\r\n          {isCustomRoom && (\r\n              <ModalContainer\r\n                  backDropVisible={showUserList}\r\n                  setBackDropVisible={setShowUserList}\r\n                  title={'Users'}\r\n                  children={\r\n                    <ScrollView style={{ flex: 1, width: '80%' }}>\r\n                      {data.userList.toSorted().map((userName) => (\r\n                          <Layout\r\n                              style={{\r\n                                flexDirection: 'row',\r\n                                marginBottom: 15,\r\n                                justifyContent: 'space-between'\r\n                              }}\r\n                          >\r\n                            <Text\r\n                                style={{\r\n                                  fontSize: 17\r\n                                }}\r\n                            >\r\n                              {userName}\r\n                            </Text>\r\n                            <Layout style={{flexDirection: 'row'}}>\r\n                              { (userName !== userData.userName) &&\r\n                                  <TouchableOpacity\r\n                                      onPress={() => {\r\n                                        let body = {}\r\n                                        if (isUserBlocked(userName)) {\r\n                                          body = {\r\n                                            unblockUser: userName\r\n                                          }\r\n                                        } else {\r\n                                          body = {\r\n                                            blockUser: userName\r\n                                          }\r\n                                        }\r\n                                        editUser({\r\n                                          userKey,\r\n                                          userName: userData.userName,\r\n                                          fields: JSON.stringify(body)\r\n                                        })\r\n                                            .unwrap()\r\n                                            .then((response) => {\r\n                                              const newUserData = response.userData\r\n                                              Toast.show(isUserBlocked(userName, newUserData) ? 'User Blocked' : 'User un-Blocked', {\r\n                                                duration: Toast.durations.LONG,\r\n                                                opacity: 0.7,\r\n                                                position: Toast.positions.CENTER,\r\n                                                backgroundColor: 'black',\r\n                                                shadow: false\r\n                                              });\r\n                                              setShowUserList(false)\r\n                                            })\r\n                                            .catch((error) => console.warn(error));\r\n                                      }}\r\n                                  >\r\n                                    {\r\n                                      isUserBlocked(userName) ?\r\n                                          <Ionicons\r\n                                              name=\"add-circle\"\r\n                                              size={25}\r\n                                              color=\"black\"\r\n                                          /> :\r\n                                          <Ionicons\r\n                                              name=\"remove-circle\"\r\n                                              size={25}\r\n                                              color=\"black\"\r\n                                          />\r\n                                    }\r\n                                  </TouchableOpacity>\r\n                              }\r\n                            </Layout>\r\n                          </Layout>\r\n                      ))}\r\n                      <Layout style={{backgroundColor: 'transparent', alignContent: 'center'}}>\r\n                        <Button title={'Leave Chat'} onPress={handleLeaveChat}/>\r\n                      </Layout>\r\n                    </ScrollView>\r\n                  }\r\n              />\r\n          )}\r\n          {messageList.length > 0 ? (\r\n            <View style={{ flex: 1 }}>\r\n              {showSearch && (\r\n                <SearchBar\r\n                  searchTerm={filter}\r\n                  onChangeText={setFilter}\r\n                  inputProps={{ autoCorrect: false }}\r\n                  placeholder=\"Search\"\r\n                />\r\n              )}\r\n              <FlatList\r\n                style={{}}\r\n                data={\r\n                  filter === ''\r\n                    ? [...messageList].reverse()\r\n                    : [...filteredMessageList].reverse()\r\n                }\r\n                renderItem={renderItem}\r\n                keyExtractor={(item) => item?.date + item?.user}\r\n                inverted\r\n              />\r\n            </View>\r\n          ) : failedConnection ? (\r\n            <TouchableOpacity\r\n              onPress={() => {\r\n                setFailedConnection(false);\r\n                setRetryNumber(retryNumber + 1);\r\n              }}\r\n            >\r\n              <Text style={{ marginTop: '10%', textAlign: 'center' }}>\r\n                Connection Failed\r\n                {'\\n'}\r\n                Press to Reload\r\n              </Text>\r\n            </TouchableOpacity>\r\n          ) : loaded ? (\r\n            <Text style={{ textAlign: 'center' }}>No chats yet :/</Text>\r\n          ) : (\r\n            <View style={{ marginTop: '20%' }}>\r\n              <Loader />\r\n            </View>\r\n          )}\r\n        </View>\r\n\r\n        <View style={styles.messagingInputContainer}>\r\n          {!keyboardShown && (\r\n            <TouchableOpacity\r\n              onPress={activateCamera}\r\n              disabled={\r\n                hardDisableSend ||\r\n                !loaded ||\r\n                messageList.some((msg) => msg.isUnsent)\r\n              }\r\n              style={{\r\n                alignSelf: 'center',\r\n                paddingRight: 5\r\n              }}\r\n            >\r\n              <FontAwesome5\r\n                name=\"camera\"\r\n                size={20}\r\n                color={\r\n                  !hardDisableSend &&\r\n                  loaded &&\r\n                  !messageList.some((msg) => msg.isUnsent)\r\n                    ? 'black'\r\n                    : 'gray'\r\n                }\r\n              />\r\n            </TouchableOpacity>\r\n          )}\r\n          {!photoSelected.contentImage ? (\r\n            <View style={styles.messagingInput}>\r\n              <TextInput\r\n                placeholder=\"Begin Typing...\"\r\n                placeholderTextColor=\"gray\"\r\n                editable={loaded}\r\n                value={message}\r\n                multiline\r\n                onChangeText={(value) => setMessage(value)}\r\n              />\r\n            </View>\r\n          ) : (\r\n            <View\r\n              style={{\r\n                ...styles.messagingInput,\r\n                paddingHorizontal: 10,\r\n                height: 150\r\n              }}\r\n            >\r\n              <Image\r\n                source={{ uri: photoSelected.contentImage?.uri }}\r\n                style={{ flex: 1, borderRadius: 10 }}\r\n              />\r\n              <TouchableOpacity\r\n                onPress={() => {\r\n                  setPhotoSelected({\r\n                    id: null,\r\n                    contentImage: null,\r\n                    date: null\r\n                  });\r\n                }}\r\n                style={{ position: 'absolute', marginLeft: 15, marginTop: 10 }}\r\n              >\r\n                <FontAwesome5\r\n                  name=\"times\"\r\n                  size={25}\r\n                  color=\"#ff2e2e\"\r\n                  style={{}}\r\n                />\r\n              </TouchableOpacity>\r\n            </View>\r\n          )}\r\n          {(!keyboardShown && Platform.OS !== 'web') && (\r\n            <TouchableOpacity\r\n              onPress={selectPhoto}\r\n              disabled={\r\n                hardDisableSend ||\r\n                !loaded ||\r\n                messageList.some((msg) => msg.isUnsent)\r\n              }\r\n              style={{\r\n                width: '15%',\r\n                alignSelf: 'center',\r\n                paddingRight: 10,\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n              }}\r\n            >\r\n              <FontAwesome5\r\n                name=\"image\"\r\n                size={30}\r\n                color={\r\n                  !hardDisableSend &&\r\n                  loaded &&\r\n                  !messageList.some((msg) => msg.isUnsent)\r\n                    ? 'black'\r\n                    : 'gray'\r\n                }\r\n              />\r\n            </TouchableOpacity>\r\n          )}\r\n          <TouchableOpacity\r\n            style={{\r\n              ...styles.messagingButtonContainer,\r\n              backgroundColor:\r\n                !hardDisableSend &&\r\n                loaded &&\r\n                !messageList.some((msg) => msg.isUnsent)\r\n                  ? '#a245ee'\r\n                  : 'rgba(162,69,238,0.34)'\r\n            }}\r\n            onPress={sendNewMessage}\r\n            disabled={\r\n              hardDisableSend ||\r\n              !loaded ||\r\n              messageList.some((msg) => msg.isUnsent)\r\n            }\r\n          >\r\n            <View>\r\n              <Text style={{ color: '#f2f0f1', fontSize: 15 }}>Send</Text>\r\n            </View>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </KeyboardAvoidingView>\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  messagingScreen: {\r\n    flex: 1\r\n  },\r\n  messagingInputContainer: {\r\n    width: '100%',\r\n    backgroundColor: 'white',\r\n    paddingVertical: 15,\r\n    paddingHorizontal: 15,\r\n    justifyContent: 'center',\r\n    flexDirection: 'row'\r\n  },\r\n  messagingInput: {\r\n    borderWidth: 1,\r\n    padding: 10,\r\n    paddingHorizontal: 15,\r\n    flex: 1,\r\n    marginHorizontal: 10,\r\n    borderRadius: 20\r\n  },\r\n  messagingButtonContainer: {\r\n    width: '20%',\r\n    alignSelf: 'center',\r\n    height: 40,\r\n    borderRadius: 3,\r\n    alignItems: 'center',\r\n    justifyContent: 'center'\r\n  }\r\n};\r\n","import {Autocomplete, AutocompleteItem, Input, Layout} from \"@ui-kitten/components\";\r\nimport {Button, Text, TouchableOpacity} from \"react-native\";\r\nimport {useAppSelector} from \"../../app/hooks\";\r\nimport {selectDarkMode, selectUserKey} from \"../../app/appDataSlice\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {base_URL} from \"../notifications/constants\";\r\nimport {useCreateChatRoomMutation} from \"../api/usersApi\";\r\nimport {showToast} from \"../../functions\";\r\nimport {useNavigation} from \"@react-navigation/native\";\r\n\r\n\r\nexport default function CreateChatRoom() {\r\n    const [ isDisabled, setIsDisabled ] = useState(true)\r\n    const [ nameOfChatRoom, setNameOfChatRoom ] = useState('')\r\n    const navigation = useNavigation()\r\n    const [ createChatRoom ] = useCreateChatRoomMutation()\r\n    const userKey = useAppSelector(selectUserKey);\r\n    const darkMode = useAppSelector(selectDarkMode);\r\n    const [ recipients, setRecipients ] = useState([])\r\n    const [names, setNames] = useState([]); // filtered list of names\r\n    const [users, setUsers] = useState([]); // clean list of users\r\n    const [value, setValue] = useState(''); // typed name\r\n    const myStyles = {\r\n        modal: {\r\n            fontSize: 18,\r\n            paddingBottom: 20,\r\n            fontWeight: 'bold',\r\n            textAlign: 'center',\r\n            width: '100%',\r\n            color: darkMode ? 'rgb(255,255,255)' : 'rgb(0,0,0)'\r\n        },\r\n        backdrop: {\r\n            backgroundColor: darkMode ? 'rgba(141,141,141,0.5)' : 'rgba(0, 0, 0, 0.5)'\r\n        },\r\n        containerDrop: {\r\n            minWidth: 200,\r\n            paddingBottom: 15\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        setIsDisabled(nameOfChatRoom.length === 0 || recipients.length === 0)\r\n    }, [nameOfChatRoom, recipients]);\r\n\r\n    useEffect(() => {\r\n        fetch(`${base_URL}/users/userNamesAndNames`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                userKey\r\n            }\r\n        }).then(async (data) => {\r\n            if (data.ok) {\r\n                let userList = await data.json();\r\n                userList = userList.filter(user => {\r\n                    return user\r\n                })\r\n                setNames(\r\n                    userList.map((user) => {\r\n                        if (user) {\r\n                            return `${user.realName} (${user.userName})`;\r\n                        }\r\n                    })\r\n                );\r\n                setUsers(userList);\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    const onChangeText = (query) => {\r\n        setNames(\r\n            freshNames().filter(\r\n                (name) =>\r\n                    name?.toLowerCase().includes(query.toLowerCase()) ||\r\n                    userNameContainsString(name, query)\r\n            )\r\n        );\r\n        setValue(query);\r\n    };\r\n\r\n    function freshNames() {\r\n        return users.map((user) => {\r\n            if (user) {\r\n                return `${user.realName} (${user.userName})`;\r\n            }\r\n        });\r\n    }\r\n\r\n    const userNameContainsString = (name, query) => {\r\n        const user = users.find(\r\n            (auser) =>\r\n                auser?.userName.toLowerCase().includes(query.toLowerCase()) &&\r\n                auser?.realName === name\r\n        );\r\n        return user !== undefined;\r\n    };\r\n\r\n    function findUserNameFromName(name) {\r\n        const firstPar = name.indexOf('(');\r\n        const secondPar = name.indexOf(')');\r\n        return name.slice(firstPar + 1, secondPar);\r\n    }\r\n\r\n    function handleAddValue() {\r\n        const nameToAdd = findUserNameFromName(value)\r\n        if (!recipients.includes(nameToAdd)) {\r\n            setRecipients(recipients.concat([nameToAdd]));\r\n        }\r\n        setValue('')\r\n    }\r\n\r\n\r\n    return (\r\n        <Layout style={{width: \"90%\", alignItems: 'center', backgroundColor: 'transparent'}}>\r\n            <Layout style={{ marginTop: 20, marginLeft: 20, flexDirection: 'row',backgroundColor: 'transparent' }}>\r\n                <Input\r\n                    style={{minWidth: '100%'}}\r\n                    label={'Chatroom Name'}\r\n                    onChangeText={setNameOfChatRoom}\r\n                    value={nameOfChatRoom}\r\n                />\r\n            </Layout>\r\n            <Layout style={{ marginVertical: 20, marginLeft: 30, flexDirection: 'row',backgroundColor: 'transparent' }}>\r\n                <Input\r\n                    style={{minWidth: '85%'}}\r\n                    placeholder={'Added Users'}\r\n                    disabled={true}\r\n                    value={recipients.join(', ')}\r\n                />\r\n                <Layout style={{ alignSelf: 'flex-end', backgroundColor: 'transparent' }}>\r\n                    <Button\r\n                        color={'red'}\r\n                        onPress={() => setRecipients([])}\r\n                        title={'Clear'}\r\n                    />\r\n                </Layout>\r\n            </Layout>\r\n            <Layout style={{ flexDirection: 'row', marginTop: 10, marginLeft: 10, backgroundColor: 'transparent' }}>\r\n                <Autocomplete\r\n                    style={{minWidth: '85%'}}\r\n                    value={value}\r\n                    placeholder={'Add User'}\r\n                    onChangeText={onChangeText}\r\n                    onSelect={(index) => setValue(names[index])}\r\n                >\r\n                    {\r\n                        names.map((user, index) => {\r\n                            return (\r\n                                <AutocompleteItem title={user} key={index} />\r\n                            )\r\n                        })\r\n                    }\r\n                </Autocomplete>\r\n                <Layout style={{ alignSelf: 'flex-end', backgroundColor: 'transparent' }}>\r\n                    <Button\r\n                        color={'blue'}\r\n                        onPress={() => handleAddValue()}\r\n                        title={'Add'}\r\n                    />\r\n                </Layout>\r\n            </Layout>\r\n            <TouchableOpacity\r\n                disabled={isDisabled}\r\n                onPress={() => {\r\n                    createChatRoom({userKey, recipients, nameOfChatRoom}).unwrap().then((payload) => {\r\n                        showToast(\"Chatroom Created\")\r\n                        navigation.goBack()\r\n                    }).catch((e) => {\r\n                        showToast(\"Error, please try again later\")\r\n                        console.log(e);\r\n                    })\r\n                }}\r\n                style={{\r\n                    marginTop: 30,\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    paddingVertical: 12,\r\n                    paddingHorizontal: 32,\r\n                    borderRadius: 4,\r\n                    elevation: 3,\r\n                    backgroundColor: isDisabled ? 'rgba(227,39,39,0.49)' : '#e32727'\r\n                }}\r\n            >\r\n                <Text style={{\r\n                    fontSize: 16,\r\n                    lineHeight: 21,\r\n                    fontWeight: 'bold',\r\n                    letterSpacing: 0.25,\r\n                    color: 'white'\r\n                }}>Create Chat Room</Text>\r\n            </TouchableOpacity>\r\n        </Layout>\r\n    )\r\n}","import { FontAwesome, FontAwesome5 } from '@expo/vector-icons';\r\nimport {useFocusEffect, useIsFocused} from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { Layout, List, Select, SelectItem, Text } from '@ui-kitten/components';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  Image,\r\n  RefreshControl,\r\n  ScrollView,\r\n  StyleSheet,\r\n  TouchableOpacity\r\n} from 'react-native';\r\nimport {\r\n  useGetChatRoomsMutation,\r\n  useGetCollegeListQuery\r\n} from '../api/usersApi';\r\n\r\nimport {\r\n    selectDarkMode,\r\n    selectIsGuest,\r\n    selectUserKey, setIsGuest\r\n} from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport ModalContainer from '../../components/ModalContainer';\r\nimport { usersApiSlice } from '../api/usersApi';\r\nimport { CurrentTermLabel } from '../classPages/ClassesList';\r\nimport SelectTerm from '../classPages/SelectTerm';\r\nimport SingleChatRoom from './singleChatPage/SingleChatRoom';\r\nimport { render } from 'react-dom';\r\nimport UserNameMultiSelectionDropDown from '../../components/UserNameMultiSelectionDropDown';\r\nimport CreateChatRoom from \"./CreateChatRoom\";\r\n\r\nconst ChatRoomsNavigator = createNativeStackNavigator();\r\n\r\nexport default function ChatsRoomNavigation({ navigation }) {\r\n    const isGuest = useAppSelector(selectIsGuest)\r\n  const [showCreateChatModal, setShowCreateChatModal] = useState(false);\r\n  const [recipients, setRecipients] = useState([]);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const navigationHeader = (navigation) => (\r\n    <Layout\r\n      style={{\r\n        width: '100%',\r\n        justifyContent: 'space-between',\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        flex: 1,\r\n        backgroundColor: 'transparent'\r\n      }}\r\n    >\r\n      <Layout\r\n        style={{\r\n          paddingBottom: 5,\r\n          flexDirection: 'row',\r\n          alignContent: 'center',\r\n          flex: 1,\r\n          backgroundColor: 'transparent'\r\n        }}\r\n      >\r\n        <Image\r\n          style={{\r\n            height: 28,\r\n            width: 28\r\n          }}\r\n          source={require('../../../assets/logos/app-logo-transparent.png')}\r\n        />\r\n        <Text\r\n          style={{\r\n            paddingTop: 3,\r\n            paddingLeft: 10,\r\n            fontSize: 20,\r\n            fontWeight: '500',\r\n            color: darkMode ? '#fff' : '#000'\r\n          }}\r\n        >\r\n          Chats\r\n        </Text>\r\n      </Layout>\r\n      <Layout\r\n        style={{\r\n          alignSelf: 'flex-end',\r\n          paddingRight: 40,\r\n          paddingBottom: 10,\r\n          flexDirection: 'row',\r\n          backgroundColor: 'transparent'\r\n        }}\r\n      />\r\n    </Layout>\r\n  );\r\n\r\n  return (\r\n    <ChatRoomsNavigator.Navigator initialRouteName=\"Chats\">\r\n      <ChatRoomsNavigator.Screen\r\n        options={({ navigation }) => ({\r\n          title: 'Chats',\r\n          headerTitle: () => {\r\n            return navigationHeader(navigation);\r\n          },\r\n          headerRight: () => {\r\n              return (\r\n                  <Layout style={{ marginRight: 20 }}>\r\n                      { !isGuest &&\r\n                          <TouchableOpacity\r\n                              onPress={() => {\r\n                                  navigation.navigate('CreateChatRoom');\r\n                              }}\r\n                          >\r\n                              <FontAwesome5\r\n                                  size={24}\r\n                                  name={'plus'}\r\n                                  color={darkMode ? 'white' : 'black'}\r\n                              />\r\n                          </TouchableOpacity>\r\n                      }\r\n\r\n                  </Layout>\r\n              );\r\n          }\r\n        })}\r\n        name=\"Chats\"\r\n        component={Chats}\r\n      />\r\n      <ChatRoomsNavigator.Screen\r\n        name=\"SingleChatRoom\"\r\n        component={SingleChatRoom}\r\n        options={{ headerTitle: '' }}\r\n      />\r\n        <ChatRoomsNavigator.Screen\r\n            name=\"CreateChatRoom\"\r\n            component={CreateChatRoom}\r\n            options={{ headerTitle: 'Create Chat Room' }}\r\n        />\r\n      <ChatRoomsNavigator.Screen\r\n        name=\"SelectTerm\"\r\n        component={SelectTerm}\r\n        options={{\r\n          title: 'Select Term',\r\n          headerShown: false,\r\n          animation: 'slide_from_bottom',\r\n          gestureDirection: 'vertical'\r\n        }}\r\n      />\r\n    </ChatRoomsNavigator.Navigator>\r\n  );\r\n}\r\n\r\nfunction Chats({ navigation }) {\r\n  const [getChatRooms] = useGetChatRoomsMutation();\r\n  const [showGuestModal, setShowGuestModal] = useState(false);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const isGuest = useAppSelector(selectIsGuest);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [isMoving, setIsMoving] = useState(false);\r\n  const currentSection = useAppSelector(\r\n    (state) => state.appData.classPages.currentSection\r\n  );\r\n  const [availableChats, setAvailableChats] = useState([]);\r\n  const { data: userData } =\r\n    usersApiSlice.endpoints.getUserInfo.useQueryState(userKey);\r\n\r\n  function generateChatRooms() {\r\n    getChatRooms({ userKey })\r\n      .unwrap()\r\n      .then(async (payload) => {\r\n        const realPayload = JSON.parse(JSON.stringify(payload));\r\n        const chats = [];\r\n        if (userData.permissionLevel === 'admin') {\r\n          chats.push({\r\n            title: 'Admin Chatroom',\r\n            lastModifiedDate: '',\r\n            id: 'admin'\r\n          });\r\n        }\r\n        try {\r\n          for (const section of Object.entries(userData.addedClasses.classes)) {\r\n            if (section[0] === currentSection) {\r\n              for (const course of Object.values(section[1])) {\r\n                chats.push({\r\n                  title: course[0],\r\n                  lastModifiedDate: '',\r\n                  id: course[0].replace(' ', '')\r\n                });\r\n              }\r\n            }\r\n          }\r\n        } catch (e) {\r\n          console.warn(e.message);\r\n          setRefreshing(false);\r\n        }\r\n        setAvailableChats(chats.concat(realPayload.reverse()));\r\n        setTimeout(() => {\r\n          setRefreshing(false);\r\n        }, 300);\r\n      })\r\n      .catch((error) => {\r\n        console.warn(error);\r\n        setRefreshing(false);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    setRefreshing(true);\r\n    generateChatRooms();\r\n  }, [useIsFocused, currentSection]);\r\n\r\n  useFocusEffect(() => {\r\n      setRefreshing(true)\r\n      generateChatRooms()\r\n  })\r\n\r\n  const onRefresh = useCallback(() => {\r\n    setRefreshing(true);\r\n    generateChatRooms();\r\n  }, []);\r\n\r\n  const renderItem = (item) => {\r\n    return (\r\n      <Layout key={item?.id}>\r\n        <ScrollView>\r\n          <TouchableOpacity\r\n            style={{\r\n              alignItems: 'center',\r\n              alignSelf: 'center',\r\n              width: '95%',\r\n              borderRadius: 10,\r\n              marginLeft: 5,\r\n              marginRight: 5,\r\n              marginTop: 10\r\n            }}\r\n            onPress={() => {\r\n              if (isGuest) {\r\n                setShowGuestModal(true);\r\n              } else {\r\n                navigation.navigate('SingleChatRoom', {\r\n                  data: item\r\n                });\r\n              }\r\n            }}\r\n            key={item?.id}\r\n          >\r\n            <Layout\r\n              style={{\r\n                alignItems: 'center',\r\n                alignSelf: 'center',\r\n                width: '95%',\r\n                height: 75,\r\n                borderRadius: 10,\r\n                backgroundColor: darkMode ? '#333333' : '#ebebeb',\r\n                shadowColor: '#000',\r\n                shadowOffset: { width: 0, height: 1 },\r\n                shadowOpacity: 0.2,\r\n                shadowRadius: 2,\r\n                elevation: 1,\r\n                marginLeft: 5,\r\n                marginRight: 5,\r\n                marginTop: 10,\r\n                justifyContent: 'center'\r\n              }}\r\n            >\r\n              <Text\r\n                style={{\r\n                  fontWeight: 'bold',\r\n                  fontSize: 20\r\n                }}\r\n              >\r\n                {item?.title}\r\n              </Text>\r\n              {item?.lastModifiedDate ? (\r\n                <Text style={{ fontStyle: 'italic', fontSize: 12 }}>\r\n                  {item?.lastModifiedDate}\r\n                </Text>\r\n              ) : null}\r\n            </Layout>\r\n          </TouchableOpacity>\r\n        </ScrollView>\r\n        {showGuestModal && (\r\n          <ModalContainer\r\n            title=\"Wait!\"\r\n            children={\r\n              <Text style={{ paddingHorizontal: 30 }}>\r\n                This feature is locked to our Guest Users. Please create a free\r\n                account with us to take advantage this feature.\r\n              </Text>\r\n            }\r\n            backDropVisible={showGuestModal}\r\n            setBackDropVisible={setShowGuestModal}\r\n          />\r\n        )}\r\n      </Layout>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout style={{ flex: 1 }}>\r\n      <CurrentTermLabel\r\n        navigation={navigation}\r\n        currentSection={currentSection}\r\n        style={{ marginTop: 20, marginLeft: 20 }}\r\n      />\r\n      {availableChats.length === 0 ? (\r\n        <Layout style={{ alignItems: 'center' }}>\r\n          <Text\r\n            style={{\r\n              paddingTop: '25%',\r\n              paddingBottom: 10,\r\n              textAlign: 'center'\r\n            }}\r\n          >\r\n            No Available Chat Rooms\r\n          </Text>\r\n          <TouchableOpacity\r\n            onPress={() => {\r\n              onRefresh();\r\n            }}\r\n          >\r\n            <FontAwesome size={25} color=\"#1E90FF\" name=\"rotate-right\" />\r\n          </TouchableOpacity>\r\n        </Layout>\r\n      ) : null}\r\n      <ScrollView\r\n        refreshControl={\r\n          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\r\n        }\r\n      >\r\n        {availableChats.map((chat) => {\r\n          return renderItem(chat);\r\n        })}\r\n      </ScrollView>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nconst sponsorPageStyles = StyleSheet.create({\r\n  container: {\r\n    flex: 1\r\n    // alignItems: 'center',\r\n  },\r\n  header: {\r\n    marginTop: 20,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: '100%'\r\n  },\r\n  address: {\r\n    alignItems: 'center',\r\n    margin: 10,\r\n    borderColor: 'black',\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  video: {\r\n    marginTop: 20,\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  title: {\r\n    fontSize: 26,\r\n    marginLeft: 10\r\n  },\r\n  logo: {\r\n    width: '100%',\r\n    height: 100\r\n  },\r\n  description: {\r\n    flex: 1,\r\n    margin: 10,\r\n    borderRadius: 5,\r\n    width: '95%',\r\n    padding: 10\r\n  },\r\n  couponContainer: {\r\n    width: '100%',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginTop: 20,\r\n    marginBottom: 20\r\n  },\r\n  coupon: {\r\n    width: 400,\r\n    height: 267\r\n  },\r\n  imageGallery: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    margin: 10,\r\n    marginBottom: 0\r\n  },\r\n  imageStyle: {\r\n    width: 150,\r\n    height: 150,\r\n    paddingTop: 100,\r\n    margin: 5\r\n  },\r\n  headerText: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold'\r\n  }\r\n});\r\n\r\nconst myStyles = StyleSheet.create({\r\n  inputBig: {\r\n    height: 200,\r\n    margin: 12,\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  input: {\r\n    height: 50,\r\n    margin: 12,\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  indentedInput: {\r\n    height: 50,\r\n    marginVertical: 12,\r\n    borderWidth: 1,\r\n    padding: 10,\r\n    marginRight: 12,\r\n    marginLeft: 30\r\n  },\r\n  text: {\r\n    fontSize: 16,\r\n    lineHeight: 21,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25\r\n  },\r\n  button: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 32,\r\n    borderRadius: 4,\r\n    elevation: 3\r\n  },\r\n  timeButton: {\r\n    width: 100,\r\n    height: 50,\r\n    marginHorizontal: 40,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    borderRadius: 4\r\n  },\r\n  timeText: {\r\n    fontSize: 16,\r\n    lineHeight: 21,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  },\r\n  actualTimeText: {\r\n    fontSize: 13,\r\n    lineHeight: 18,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  },\r\n  timeStyle: {\r\n    flex: 0.3,\r\n    borderWidth: 2,\r\n    borderLeftColor: 'white'\r\n  }\r\n});\r\n\r\nconst listingStyles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center'\r\n  },\r\n  cardContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    alignSelf: 'center',\r\n    width: '95%',\r\n    height: 75,\r\n    borderRadius: 10,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderBottomWidth: 0,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 2,\r\n    elevation: 1,\r\n    marginLeft: 5,\r\n    marginRight: 5,\r\n    marginTop: 10\r\n  },\r\n  containerForNotifications: {\r\n    alignItems: 'center',\r\n    alignSelf: 'center',\r\n    width: '95%',\r\n    height: 75,\r\n    borderRadius: 10,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderBottomWidth: 0,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 2,\r\n    elevation: 1,\r\n    marginLeft: 5,\r\n    marginRight: 5,\r\n    marginTop: 10\r\n  },\r\n  text: {\r\n    flex: 1,\r\n    fontSize: 20,\r\n    textAlign: 'center',\r\n    marginTop: 5,\r\n    marginBottom: 5\r\n  },\r\n  image: {\r\n    width: '100%',\r\n    height: '100%',\r\n    borderRadius: 10\r\n  }\r\n});\r\n","import { TouchableOpacity } from '@gorhom/bottom-sheet';\r\nimport { Button, Card, Layout, Modal, Text } from '@ui-kitten/components';\r\nimport React, { useState } from 'react';\r\nimport { Platform, ScrollView, StyleSheet } from 'react-native';\r\n\r\nimport { selectDarkMode } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport ExportModalClass from '../classPages/SingleClassPage/exportModalClass';\r\n\r\nexport default function SingleClassPage({ selectedClass }) {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const filters = useAppSelector((state) => state.appData.classPages.filters);\r\n  const backgroundColor = darkMode\r\n    ? { backgroundColor: '#1F1F1F' }\r\n    : { backgroundColor: '#F5F5F5' };\r\n\r\n  function buildTimeString(time) {\r\n    if (!time.startTime || time.startTime === '' || time.startTime === null) {\r\n      return 'closed';\r\n    }\r\n    return `${convertTo12HourTime(time.startTime)} - ${convertTo12HourTime(\r\n      time.endTime\r\n    )}\\n`;\r\n  }\r\n\r\n  function convertTo12HourTime(time) {\r\n    if (time.length !== 5) {\r\n      time = `0${time}`;\r\n    }\r\n    let hours = time.slice(0, 2);\r\n    const minutes = time.slice(3, 5);\r\n    let ampm = Number.parseInt(hours) > 12 ? 'pm' : 'am';\r\n    hours %= 12;\r\n    if (hours === 0) {\r\n      hours = 12;\r\n      ampm = 'pm';\r\n    }\r\n    return `${hours}:${minutes}${ampm}`;\r\n  }\r\n\r\n  const averageGradeMSGModal = (\r\n    <Modal\r\n      visible={showModal}\r\n      backdropStyle={styles.backdrop}\r\n      style={{ width: '75%' }}\r\n      onBackdropPress={() => setShowModal(false)}\r\n    >\r\n      <Card disabled>\r\n        <Text style={{ fontSize: 15, paddingTop: 5, paddingBottom: 10 }}>\r\n          The Athena Network collects and aggregates the data anonymously\r\n          submitted by the Course Review process and calculates what the average\r\n          student's experience in this course will look like. Given that it is\r\n          based on voluntarily submitted data, this information is to be used as\r\n          a reference only. Please consult your advisor before making any\r\n          impactful decisions.\r\n        </Text>\r\n        <Button onPress={() => setShowModal(false)}>Dismiss</Button>\r\n      </Card>\r\n    </Modal>\r\n  );\r\n\r\n  if (!selectedClass?.times) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <ScrollView style={backgroundColor}>\r\n      <Layout style={[{ alignItems: 'center' }, backgroundColor]}>\r\n        {Platform.OS === 'web' && (\r\n          <ExportModalClass classData={selectedClass} />\r\n        )}\r\n        <Text style={styles.title}>{selectedClass.courseName}</Text>\r\n        <Text style={{ paddingTop: 30 }}>{selectedClass.masterCourseCode}</Text>\r\n\r\n        <Text style={styles.subtitle}>\r\n          {`${selectedClass.courseTerm} \\u2022 credits: ${\r\n            filters.isHMC\r\n              ? selectedClass.creditWeightHM\r\n              : selectedClass.creditWeight\r\n          }`}\r\n        </Text>\r\n        {selectedClass.timeSpentOutOfClass && (\r\n          <Layout\r\n            style={[\r\n              {\r\n                flexDirection: 'row',\r\n                alignItems: 'flex-start',\r\n                paddingRight: 5\r\n              },\r\n              backgroundColor\r\n            ]}\r\n          >\r\n            <Text style={styles.subtitle}>Time Spent Per Week</Text>\r\n            <Text style={{ fontSize: 12, lineHeight: 13 }}>i</Text>\r\n            <Text style={styles.subtitle}>\r\n              : {selectedClass.timeSpentOutOfClass} hours\r\n            </Text>\r\n          </Layout>\r\n        )}\r\n        {selectedClass.averageGrade && (\r\n          <Layout\r\n            style={[\r\n              {\r\n                flexDirection: 'row',\r\n                alignItems: 'flex-start',\r\n                paddingRight: 5\r\n              },\r\n              backgroundColor\r\n            ]}\r\n          >\r\n            <Text style={styles.subtitle}>Average Grade</Text>\r\n            <Text style={{ fontSize: 12, lineHeight: 13 }}>i</Text>\r\n            <Text style={styles.subtitle}>:{selectedClass.averageGrade}</Text>\r\n          </Layout>\r\n        )}\r\n        {selectedClass.difficulty && (\r\n          <Layout\r\n            style={[\r\n              {\r\n                flexDirection: 'row',\r\n                alignItems: 'flex-start',\r\n                paddingRight: 5\r\n              },\r\n              backgroundColor\r\n            ]}\r\n          >\r\n            <Text style={styles.subtitle}>Estimated Difficulty</Text>\r\n            <Text style={{ fontSize: 12, lineHeight: 13 }}>i</Text>\r\n            <Text style={styles.subtitle}>\r\n              : {selectedClass.difficulty} / 5\r\n            </Text>\r\n          </Layout>\r\n        )}\r\n        {selectedClass.rating && (\r\n          <Layout\r\n            style={[\r\n              {\r\n                flexDirection: 'row',\r\n                alignItems: 'flex-start',\r\n                paddingRight: 5\r\n              },\r\n              backgroundColor\r\n            ]}\r\n          >\r\n            <Text style={styles.subtitle}>Average Rating</Text>\r\n            <Text style={{ fontSize: 12, lineHeight: 13 }}>i</Text>\r\n            <Text style={styles.subtitle}>:{selectedClass.rating} / 5</Text>\r\n          </Layout>\r\n        )}\r\n      </Layout>\r\n      <Layout style={backgroundColor}>\r\n        <Text style={styles.courseDescription}>{selectedClass.summary}</Text>\r\n      </Layout>\r\n      <Layout style={{ ...backgroundColor, ...styles.boxed }}>\r\n        <Text style={{ fontSize: 15, fontWeight: 'bold' }}>\r\n          Other Stated Prerequisites:\r\n        </Text>\r\n        <Text style={{ fontSize: 15 }}>\r\n          {selectedClass.prerequisites !== ''\r\n            ? selectedClass.prerequisites\r\n            : 'none'}\r\n        </Text>\r\n\r\n        <Text style={{ fontSize: 15, fontWeight: 'bold' }}>\r\n          Other Stated Corequisites:\r\n        </Text>\r\n        <Text style={{ fontSize: 15 }}>\r\n          {selectedClass.corequisites !== ''\r\n            ? selectedClass.corequisites\r\n            : 'none'}\r\n        </Text>\r\n\r\n        <Text style={{ fontSize: 15, fontWeight: 'bold' }}>\r\n          Number of PERMs:\r\n        </Text>\r\n        <Text style={{ fontSize: 15 }}>\r\n          {selectedClass.permCount ? selectedClass.permCount.toString() : '0'}\r\n        </Text>\r\n      </Layout>\r\n      <Layout style={[{ alignItems: 'flex-end' }, backgroundColor]}>\r\n        {(selectedClass.timeSpentOutOfClass ||\r\n          selectedClass.averageGrade ||\r\n          selectedClass.difficulty ||\r\n          selectedClass.rating) && (\r\n          <TouchableOpacity onPress={() => setShowModal(!showModal)}>\r\n            <Layout\r\n              style={[\r\n                {\r\n                  flexDirection: 'row',\r\n                  alignItems: 'flex-start',\r\n                  paddingRight: 5\r\n                },\r\n                backgroundColor\r\n              ]}\r\n            >\r\n              <Text style={{ fontSize: 12, lineHeight: 13 }}>i</Text>\r\n              <Text style={styles.disclaimer}>How Do We Estimate This?</Text>\r\n            </Layout>\r\n          </TouchableOpacity>\r\n        )}\r\n      </Layout>\r\n      <Layout style={backgroundColor}>\r\n        {selectedClass.times.length > 0 && (\r\n          <Layout style={backgroundColor}>\r\n            <Text style={styles.subHeader}>Sections</Text>\r\n            <Layout style={[styles.section, backgroundColor]}>\r\n              <Text style={styles.headerText}>Course Code</Text>\r\n              <Text style={styles.headerText}>Seats</Text>\r\n              <Text style={styles.headerText}>Professor</Text>\r\n              <Text style={styles.headerText}>Time</Text>\r\n              <Text style={styles.headerText}>Location</Text>\r\n            </Layout>\r\n          </Layout>\r\n        )}\r\n        {selectedClass.times.flatMap((time) => {\r\n          return time.courseSchedule.map((schedule) => {\r\n            return (\r\n              <Layout\r\n                key={schedule.courseCode}\r\n                style={{ backgroundColor, ...styles.section }}\r\n              >\r\n                <Text style={styles.sectionText}>{time.courseCode}</Text>\r\n                <Text style={styles.sectionText}>\r\n                  {time.seatsFilled} /{time.seatsFilled + time.seatsAvailable}\r\n                </Text>\r\n                <Text style={styles.sectionText}>{time.professorName}</Text>\r\n                <Text style={styles.sectionText}>\r\n                  {buildTimeString(time)}\r\n                  {'\\n'}\r\n                  {schedule.daysOfTheWeek.join(', ')}\r\n                </Text>\r\n                <Text style={styles.sectionText}>\r\n                  {schedule.classLocation ? time.classLocation : 'TBD'}\r\n                </Text>\r\n              </Layout>\r\n            );\r\n          });\r\n        })}\r\n        {averageGradeMSGModal}\r\n      </Layout>\r\n      <Text style={styles.subHeader}>Reviews</Text>\r\n      {selectedClass.reviews.length === 0 ? (\r\n        <Text style={{ alignSelf: 'center', marginBottom: 10 }}>\r\n          No Reviews yet\r\n        </Text>\r\n      ) : (\r\n        selectedClass.reviews.map((review, index) => (\r\n          <Card key={index} disabled>\r\n            <Text>{`${review.text}\\n\\nPosted: ${review.date}`}</Text>\r\n            {review.professor && (\r\n              <Text>{`Taught By: ${review.professor}`}</Text>\r\n            )}\r\n          </Card>\r\n        ))\r\n      )}\r\n    </ScrollView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold'\r\n  },\r\n  subtitle: {\r\n    fontSize: 16\r\n  },\r\n  courseOpen: {\r\n    backgroundColor: 'green',\r\n    color: '#fff',\r\n    padding: 5,\r\n    marginRight: 10\r\n  },\r\n  courseClosed: {\r\n    backgroundColor: 'red',\r\n    color: '#fff',\r\n    padding: 5,\r\n    borderRadius: 5\r\n  },\r\n  header: {\r\n    alignItems: 'center'\r\n  },\r\n  details: {\r\n    flexDirection: 'row',\r\n    padding: 10,\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  courseDescription: {\r\n    paddingRight: 20,\r\n    paddingLeft: 20,\r\n    paddingTop: 10,\r\n    paddingBottom: 5,\r\n    fontSize: 17\r\n  },\r\n  BodyContainer: {\r\n    borderTopWidth: 1,\r\n    borderTopColor: 'black',\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-evenly',\r\n    padding: 10,\r\n    paddingTop: 20,\r\n    paddingBottom: 20\r\n  },\r\n  boxed: {\r\n    alignItems: 'center',\r\n    margin: 8,\r\n    borderColor: 'black',\r\n    borderWidth: 1,\r\n    padding: 7\r\n  },\r\n  documentStyle: {\r\n    width: 150,\r\n    height: 190,\r\n    paddingTop: 100\r\n  },\r\n  imageLabel: {\r\n    fontSize: 12,\r\n    color: 'black',\r\n    padding: 10,\r\n    textAlign: 'center'\r\n  },\r\n  schedule: {\r\n    paddingLeft: 20,\r\n    paddingTop: 10\r\n  },\r\n  graphImage: {\r\n    width: '100%',\r\n    aspectRatio: 1,\r\n    resizeMode: 'contain'\r\n  },\r\n  grade: {\r\n    fontSize: 50,\r\n    fontWeight: 'bold',\r\n    color: 'green'\r\n  },\r\n  reviewText: {\r\n    fontSize: 16,\r\n    fontStyle: 'italic'\r\n  },\r\n  reviewBox: {\r\n    width: '95%',\r\n    padding: 10,\r\n    borderWidth: 1,\r\n    borderColor: 'black',\r\n    borderRadius: 5,\r\n    marginBottom: 10\r\n  },\r\n  section: {\r\n    flexDirection: 'row',\r\n    paddingLeft: 5,\r\n    borderBottomWidth: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  headerText: {\r\n    fontWeight: 'bold',\r\n    fontSize: 13,\r\n    flex: 1\r\n  },\r\n  sectionText: {\r\n    flex: 1\r\n  },\r\n  disclaimer: {\r\n    fontSize: 14,\r\n    fontStyle: 'italic'\r\n  },\r\n  backdrop: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\r\n  },\r\n  input: {\r\n    height: 50,\r\n    margin: 12,\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  containerDrop: {\r\n    height: 42,\r\n    margin: 12,\r\n    borderWidth: 1\r\n  },\r\n  indentedInput: {\r\n    height: 50,\r\n    marginVertical: 12,\r\n    borderWidth: 1,\r\n    padding: 10,\r\n    marginRight: 12,\r\n    marginLeft: 30\r\n  },\r\n  text: {\r\n    fontSize: 16,\r\n    lineHeight: 21,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  },\r\n  subHeader: {\r\n    fontSize: 20,\r\n    paddingLeft: 20,\r\n    paddingBottom: 20,\r\n    paddingTop: 20,\r\n    fontWeight: 'bold'\r\n  }\r\n});\r\n","import { FontAwesome, FontAwesome5 } from '@expo/vector-icons';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { Button, Input, Layout, List, Text } from '@ui-kitten/components';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  Alert,\r\n  Dimensions,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  SafeAreaView,\r\n  ScrollView,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  TouchableWithoutFeedback,\r\n  View\r\n} from 'react-native';\r\nimport { SwipeRow } from 'react-native-swipe-list-view';\r\n\r\nimport { HeaderBackButton } from '@react-navigation/elements';\r\nimport {\r\n  selectDarkMode,\r\n  selectIsGuest,\r\n  selectUserKey\r\n} from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport BackButton from '../../components/BackButton';\r\nimport { base_URL } from './constants';\r\n\r\nimport ModalContainer from '../../components/ModalContainer';\r\nimport UserNameSelectionDropDown from '../../components/UserNameSelectionDropDown';\r\nimport { useGetCurrentSectionQuery } from '../api/classPagesApi';\r\nimport { selectClassesList } from '../classPages/classPagesSlice';\r\nimport SingleClassPage from './notificationSinglePage';\r\nimport CalendarRender from '../calendar/CalendarRender';\r\nimport Header from '../../components/Header';\r\n\r\nconst NotificationHomePage = createNativeStackNavigator();\r\n\r\nexport default function NotificationsNavigation({ navigation }) {\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [selectedIndex, setSelectedIndex] = React.useState([]);\r\n  const [hasChosen, setHasChosen] = useState(false);\r\n  const [users, setUsers] = useState([]);\r\n  const [showGuestModal, setShowGuestModal] = useState(false);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const isGuest = useAppSelector(selectIsGuest);\r\n\r\n  useEffect(() => {\r\n    refreshNotifications();\r\n    fetch(`${base_URL}/users/getUserNameList`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then(async (data) => {\r\n      if (data.ok) {\r\n        const newUsers = (await data.json()).map((userName) => {\r\n          return {\r\n            label: userName,\r\n            id: userName\r\n          };\r\n        });\r\n        setUsers(newUsers);\r\n      }\r\n    });\r\n  }, []);\r\n  async function refreshNotifications() {\r\n    fetch(`${base_URL}/users/getNotifications`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then((res) => {\r\n      res.text().then((notifications) => {\r\n        notifications = JSON.parse(notifications);\r\n        // @ts-ignore\r\n        setNotifications(notifications);\r\n      });\r\n    });\r\n  }\r\n  async function sendNotification(bodyTosend) {\r\n    await fetch(`${base_URL}/users/sendNotification`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      },\r\n      body: JSON.stringify(bodyTosend)\r\n    });\r\n  }\r\n  function createNotificationButton() {\r\n    navigation.navigate('CreateNotification');\r\n  }\r\n  function clearNotifications() {\r\n    fetch(`${base_URL}/users/clearNotifications`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then(() => {\r\n      refreshNotifications();\r\n    });\r\n  }\r\n  const navigationHeader = (navigation) => (\r\n    <Layout\r\n      style={{\r\n        width: '100%',\r\n        justifyContent: 'space-between',\r\n        flexDirection: 'row',\r\n        backgroundColor: 'transparent'\r\n      }}\r\n    >\r\n      {Platform.OS === 'ios' && <BackButton navigation={navigation} />}\r\n\r\n      <Layout\r\n        style={{\r\n          paddingBottom: 5,\r\n          flexDirection: 'row',\r\n          alignItems: 'center',\r\n          backgroundColor: 'transparent'\r\n        }}\r\n      >\r\n        {/* <Image\r\n          style={{\r\n            height: 28,\r\n            width: 28,\r\n          }}\r\n          source={require('../../../assets/logos/app-logo.png')}\r\n        /> */}\r\n        <Text\r\n          style={{\r\n            paddingTop: 3,\r\n            fontSize: 20,\r\n            fontWeight: '500',\r\n            color: darkMode ? '#fff' : '#000'\r\n          }}\r\n        >\r\n          Notifications\r\n        </Text>\r\n      </Layout>\r\n      <Layout\r\n        style={{\r\n          alignItems: 'flex-end',\r\n          paddingRight: 40,\r\n          paddingBottom: 10,\r\n          flexDirection: 'row',\r\n          backgroundColor: 'transparent'\r\n        }}\r\n      >\r\n        <TouchableOpacity\r\n          style={{\r\n            paddingLeft: 20,\r\n            marginRight: Platform.OS == 'android' ? 50 : 0\r\n          }}\r\n          onPress={() => {\r\n            if (isGuest) {\r\n              setShowGuestModal(true);\r\n            } else {\r\n              createNotificationButton();\r\n            }\r\n          }}\r\n        >\r\n          <FontAwesome5 size={25} color=\"#1E90FF\" name=\"plus\" />\r\n        </TouchableOpacity>\r\n        {showGuestModal && (\r\n          <ModalContainer\r\n            title=\"Wait!\"\r\n            children={\r\n              <Text style={{ paddingHorizontal: 30 }}>\r\n                This feature is locked to our Guest Users. Please create a free\r\n                account with us to take advantage this feature.\r\n              </Text>\r\n            }\r\n            backDropVisible={showGuestModal}\r\n            setBackDropVisible={setShowGuestModal}\r\n          />\r\n        )}\r\n        {/* <TouchableOpacity\r\n\r\n          onPress={() => {\r\n            Alert.alert(\r\n              'Caution',\r\n              'Are you sure you want to clear your notifications?\\nThis action cannot be undone.',\r\n              [\r\n                {\r\n                  text: 'No',\r\n                  style: 'cancel',\r\n                },\r\n                {\r\n                  text: 'Yes',\r\n                  onPress: async () => {\r\n                    clearNotifications();\r\n                  },\r\n                },\r\n              ]\r\n            );\r\n          }}>\r\n          <FontAwesome5 size={25} color={'#d71717'} name=\"times\" />\r\n        </TouchableOpacity>\r\n        /* <TouchableOpacity\r\n          style={{ paddingLeft: 20 }}\r\n          onPress={() => {\r\n            refreshNotifications();\r\n          }}>\r\n          <FontAwesome size={25} color={'#1E90FF'} name=\"rotate-right\" />\r\n        </TouchableOpacity> */}\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n  function Notifications({ navigation }) {\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [isMoving, setIsMoving] = useState(false);\r\n\r\n    const onRefresh = useCallback(() => {\r\n      setRefreshing(true);\r\n      refreshNotifications().then(() => {\r\n        setRefreshing(false);\r\n      });\r\n    }, []);\r\n    async function handleOnLeftSwipe(postId) {\r\n      const newNotifications = notifications.map((not) => {\r\n        if (not._id !== postId) {\r\n          return not;\r\n        }\r\n      });\r\n      setNotifications(newNotifications);\r\n      const res = await fetch(`${base_URL}/users/removeNotification`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          userKey\r\n        },\r\n        body: JSON.stringify({\r\n          id: postId\r\n        }),\r\n        redirect: 'follow'\r\n      });\r\n      if (res.ok) {\r\n        refreshNotifications();\r\n      } else {\r\n        console.warn(await res.json());\r\n      }\r\n      setIsOpen(false);\r\n      setIsMoving(false);\r\n    }\r\n\r\n    const renderItem = ({ item: notification }) => {\r\n      return (\r\n        <Layout>\r\n          {notification && (\r\n            // @ts-ignore\r\n            <SwipeRow\r\n              disableRightSwipe\r\n              onSwipeValueChange={(status) => {\r\n                if (status.value < -Dimensions.get('window').width * (1 / 3)) {\r\n                  if (!isOpen) {\r\n                    setIsOpen(true);\r\n                    handleOnLeftSwipe(notification._id);\r\n                  }\r\n                } else if (status.value < -5) {\r\n                  setIsMoving(true);\r\n                } else {\r\n                  setIsMoving(false);\r\n                }\r\n              }}\r\n              useNativeDriver\r\n            >\r\n              <Layout\r\n                style={{\r\n                  alignItems: 'flex-end',\r\n                  justifyContent: 'center',\r\n                  alignSelf: 'center',\r\n                  width: '95%',\r\n                  height: 75,\r\n                  borderRadius: 11,\r\n                  backgroundColor: '#ce0f0f',\r\n                  marginLeft: 5,\r\n                  paddingRight: 20,\r\n                  marginRight: 5,\r\n                  marginTop: 10\r\n                }}\r\n              >\r\n                <Text style={{ color: '#fff' }}>Delete</Text>\r\n              </Layout>\r\n              <TouchableWithoutFeedback\r\n                style={{\r\n                  alignItems: 'center',\r\n                  alignSelf: 'center',\r\n                  width: '95%',\r\n                  height: 75,\r\n                  borderRadius: 10,\r\n                  marginLeft: 5,\r\n                  marginRight: 5,\r\n                  marginTop: 10\r\n                }}\r\n                onPress={() => {\r\n                  navigation.navigate('SingleNotification', {\r\n                    data: notification\r\n                  });\r\n                }}\r\n                key={notification?._id}\r\n              >\r\n                <Layout\r\n                  style={{\r\n                    alignItems: 'center',\r\n                    alignSelf: 'center',\r\n                    width: '95%',\r\n                    height: 75,\r\n                    borderRadius: 10,\r\n                    backgroundColor: darkMode ? '#333333' : '#ebebeb',\r\n                    shadowColor: '#000',\r\n                    shadowOffset: { width: 0, height: 1 },\r\n                    shadowOpacity: 0.2,\r\n                    shadowRadius: 2,\r\n                    elevation: 1,\r\n                    marginLeft: 5,\r\n                    marginRight: 5,\r\n                    marginTop: 10\r\n                  }}\r\n                >\r\n                  <Text\r\n                    style={{\r\n                      paddingTop: 5,\r\n                      fontWeight: 'bold',\r\n                      fontSize: 20\r\n                    }}\r\n                  >\r\n                    {notification?.title}\r\n                  </Text>\r\n                  <Text style={{}}>\r\n                    From:\r\n                    {notification?.from}\r\n                  </Text>\r\n                  {notification?.creationDate ? (\r\n                    <Text style={{ fontStyle: 'italic', fontSize: 12 }}>\r\n                      {notification?.creationDate}\r\n                    </Text>\r\n                  ) : null}\r\n                </Layout>\r\n              </TouchableWithoutFeedback>\r\n            </SwipeRow>\r\n          )}\r\n        </Layout>\r\n      );\r\n    };\r\n\r\n    return (\r\n      <Layout style={{ flex: 1 }}>\r\n        {notifications.length === 0 ? (\r\n          <Layout style={{ alignItems: 'center' }}>\r\n            <Text\r\n              style={{\r\n                paddingTop: '25%',\r\n                paddingBottom: 10,\r\n                textAlign: 'center'\r\n              }}\r\n            >\r\n              No New Notifications\r\n            </Text>\r\n            <TouchableOpacity\r\n              onPress={() => {\r\n                refreshNotifications();\r\n              }}\r\n            >\r\n              <FontAwesome size={25} color=\"#1E90FF\" name=\"rotate-right\" />\r\n            </TouchableOpacity>\r\n          </Layout>\r\n        ) : null}\r\n        <List\r\n          style={{ backgroundColor: 'transparent' }}\r\n          contentContainerStyle={{ flex: 1 }}\r\n          data={notifications}\r\n          scrollEnabled={!isMoving}\r\n          renderItem={renderItem}\r\n          onRefresh={refreshNotifications}\r\n          refreshing={refreshing}\r\n        />\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  function getDateText(text) {\r\n    const spaceIndex = text.indexOf(' ');\r\n    const first = text.substring(0, spaceIndex);\r\n    const second = text.substring(spaceIndex + 1);\r\n    return `${second} |  ${first}`;\r\n  }\r\n\r\n  function SingleNotification({\r\n    route: {\r\n      params: { data }\r\n    }\r\n  }) {\r\n    navigation = useNavigation();\r\n    const { data: currentSection } = useGetCurrentSectionQuery();\r\n\r\n    if (data.isSchedule) {\r\n      return (\r\n        <CalendarRender\r\n          route={{\r\n            params: {\r\n              overrideData: JSON.parse(data.message)\r\n            }\r\n          }}\r\n        />\r\n      );\r\n    }\r\n    if (data.isCourseData) {\r\n      const allClassData = useAppSelector(selectClassesList);\r\n      const courseSimpleData = JSON.parse(data.message);\r\n      if (courseSimpleData.courseTerm === currentSection) {\r\n        return (\r\n          <SingleClassPage\r\n            selectedClass={allClassData[courseSimpleData.masterCourseCode]}\r\n          />\r\n        );\r\n      }\r\n      Alert.alert('This course contains outdated information');\r\n      navigation.goBack();\r\n      return null;\r\n    }\r\n    return (\r\n      <KeyboardAvoidingView\r\n        style={{ flex: 1 }}\r\n        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n      >\r\n        <ScrollView contentContainerStyle={{ flex: 1 }}>\r\n          <Layout style={sponsorPageStyles.container}>\r\n            <Layout\r\n              style={{ width: '100%', alignItems: 'center', marginTop: 20 }}\r\n            >\r\n              <Text style={sponsorPageStyles.title}>{data.title}</Text>\r\n            </Layout>\r\n\r\n            {data.from && (\r\n              <Layout style={sponsorPageStyles.address}>\r\n                <Layout style={{ flexDirection: 'row' }}>\r\n                  <Text style={{ fontSize: 15, fontWeight: 'bold' }}>\r\n                    From:\r\n                  </Text>\r\n                  <Text style={{ fontSize: 15 }}>{data.from}</Text>\r\n                </Layout>\r\n                <Layout style={{ flexDirection: 'row' }}>\r\n                  <Text style={{ fontSize: 15 }}>\r\n                    {getDateText(data.creationDate)}\r\n                  </Text>\r\n                </Layout>\r\n              </Layout>\r\n            )}\r\n            <Layout style={sponsorPageStyles.description}>\r\n              <Text>{data.message}</Text>\r\n            </Layout>\r\n            {data.repliable && (\r\n              <TouchableOpacity\r\n                onPress={() => {\r\n                  // TODO: reply\r\n                }}\r\n                style={myStyles.button}\r\n              >\r\n                <Text style={myStyles.text}>Reply</Text>\r\n              </TouchableOpacity>\r\n            )}\r\n          </Layout>\r\n        </ScrollView>\r\n      </KeyboardAvoidingView>\r\n    );\r\n  }\r\n  function CreateNotification({ navigation }) {\r\n    const [body, setBody] = useState({});\r\n    const [done, setDone] = useState(false);\r\n    const [recipient, setRecipient] = useState(null);\r\n    const [hasChosen, setHasChosen] = useState(false);\r\n\r\n    useEffect(() => {\r\n      changeValue(hasChosen ? [recipient] : null, 'recipients');\r\n    }, [recipient, hasChosen]);\r\n\r\n    function checkForDone(tempBody) {\r\n      if (tempBody.recipients && tempBody.title && tempBody.text) {\r\n        setDone(true);\r\n      } else {\r\n        setDone(false);\r\n      }\r\n    }\r\n\r\n    const changeValue = (theValue, valueToChange) => {\r\n      const newBody = body;\r\n      for (const aspect in newBody) {\r\n        if (\r\n          newBody[aspect] === null ||\r\n          newBody[aspect] === undefined ||\r\n          newBody[aspect] === ''\r\n        ) {\r\n          delete newBody[aspect];\r\n        }\r\n      }\r\n      if (theValue !== undefined) {\r\n        newBody[valueToChange] = theValue;\r\n      } else if (newBody[valueToChange]) {\r\n        delete newBody[valueToChange];\r\n      }\r\n      checkForDone(newBody);\r\n      setBody(newBody);\r\n    };\r\n\r\n    function renderInputFields() {\r\n      const renderHeader = () => {\r\n        return (\r\n          <Layout style={{ flexDirection: 'row' }}>\r\n            <Text\r\n              style={{\r\n                fontSize: 15,\r\n                paddingLeft: 12,\r\n                paddingBottom: 5,\r\n                paddingTop: 5,\r\n                alignContent: 'center',\r\n                fontWeight: 'bold'\r\n              }}\r\n            >\r\n              Send Message\r\n            </Text>\r\n          </Layout>\r\n        );\r\n      };\r\n      const final = [];\r\n      final.push(\r\n        <View\r\n          style={{\r\n            height: 50,\r\n            margin: 12,\r\n            padding: 10\r\n          }}\r\n        >\r\n          {UserNameSelectionDropDown({\r\n            setHasChosen,\r\n            setRecipient,\r\n            placeholder: true\r\n          })}\r\n        </View>\r\n      );\r\n      final.push(\r\n        <Input\r\n          autoCapitalize=\"words\"\r\n          onChangeText={(theValue) => changeValue(theValue, 'title')}\r\n          style={myStyles.input}\r\n          placeholderTextColor=\"gray\"\r\n          placeholder=\"Title\"\r\n        />\r\n      );\r\n      final.push(\r\n        <Input\r\n          autoCapitalize=\"sentences\"\r\n          onChangeText={(theValue) => changeValue(theValue, 'text')}\r\n          style={myStyles.inputBig}\r\n          multiline\r\n          textStyle={{ minHeight: 150 }}\r\n          placeholderTextColor=\"gray\"\r\n          placeholder=\"Body\"\r\n        />\r\n      );\r\n\r\n      return (\r\n        <Layout style={{ flex: 1 }}>\r\n          {renderHeader()}\r\n          {final}\r\n        </Layout>\r\n      );\r\n    }\r\n    return (\r\n      <SafeAreaView style={{ flex: 1 }}>\r\n        <KeyboardAvoidingView\r\n          style={{ flex: 1 }}\r\n          behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n        >\r\n          <ScrollView contentContainerStyle={{ flex: 1 }}>\r\n            <Layout style={sponsorPageStyles.container}>\r\n              <Layout style={sponsorPageStyles.description}>\r\n                {renderInputFields()}\r\n                <Button\r\n                  disabled={!done}\r\n                  onPress={async () => {\r\n                    await sendNotification(body);\r\n                    navigation.navigate('Notifications');\r\n                  }}\r\n                >\r\n                  <Text style={myStyles.text}>Send Message</Text>\r\n                </Button>\r\n              </Layout>\r\n            </Layout>\r\n          </ScrollView>\r\n        </KeyboardAvoidingView>\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n  return (\r\n    <NotificationHomePage.Navigator initialRouteName=\"Notifications & Messages\">\r\n      <NotificationHomePage.Screen\r\n        options={({ navigation }) => ({\r\n          header: () => (\r\n            <Layout>\r\n              <Header\r\n                title=\"\"\r\n                accessoryLeft={\r\n                  <Layout\r\n                    style={{ flexDirection: 'row', alignItems: 'center' }}\r\n                  >\r\n                    <HeaderBackButton\r\n                      onPress={navigation.goBack}\r\n                      label=\"Back\"\r\n                      labelVisible={Platform.OS === 'ios'}\r\n                    />\r\n                    <Text\r\n                      style={{\r\n                        marginLeft: Platform.OS === 'web' ? undefined : 50,\r\n                        paddingTop: 3,\r\n                        fontSize: 20,\r\n                        fontWeight: '500',\r\n                        color: darkMode ? '#fff' : '#000'\r\n                      }}\r\n                    >\r\n                      Notifications\r\n                    </Text>\r\n                  </Layout>\r\n                }\r\n                accessoryRight={\r\n                  <Layout>\r\n                    <TouchableOpacity\r\n                      style={{\r\n                        paddingLeft: 20,\r\n                        marginRight: Platform.OS == 'android' ? 50 : 0\r\n                      }}\r\n                      onPress={() => {\r\n                        if (isGuest) {\r\n                          setShowGuestModal(true);\r\n                        } else {\r\n                          createNotificationButton();\r\n                        }\r\n                      }}\r\n                    >\r\n                      <FontAwesome5 size={25} color=\"#1E90FF\" name=\"plus\" />\r\n                    </TouchableOpacity>\r\n                    {showGuestModal && (\r\n                      <ModalContainer\r\n                        title=\"Wait!\"\r\n                        children={\r\n                          <Text style={{ paddingHorizontal: 30 }}>\r\n                            This feature is locked to our Guest Users. Please\r\n                            create a free account with us to take advantage this\r\n                            feature.\r\n                          </Text>\r\n                        }\r\n                        backDropVisible={showGuestModal}\r\n                        setBackDropVisible={setShowGuestModal}\r\n                      />\r\n                    )}\r\n                  </Layout>\r\n                }\r\n              />\r\n            </Layout>\r\n          )\r\n        })}\r\n        name=\"Notifications\"\r\n        component={Notifications}\r\n      />\r\n      <NotificationHomePage.Screen\r\n        name=\"SingleNotification\"\r\n        component={SingleNotification}\r\n        options={{ headerTitle: '' }}\r\n      />\r\n      <NotificationHomePage.Screen\r\n        name=\"CreateNotification\"\r\n        component={CreateNotification}\r\n        options={{ headerTitle: '' }}\r\n      />\r\n    </NotificationHomePage.Navigator>\r\n  );\r\n}\r\n\r\nfunction convertTo12HourTime(time) {\r\n  if (time.length !== 5) {\r\n    time = `0${time}`;\r\n  }\r\n  let hours = time.slice(0, 2);\r\n  const minutes = time.slice(3, 5);\r\n  let ampm = Number.parseInt(hours) > 12 ? 'pm' : 'am';\r\n  hours %= 12;\r\n  if (hours === 0) {\r\n    hours = 12;\r\n    ampm = 'pm';\r\n  }\r\n  return `${hours}:${minutes}${ampm}`;\r\n}\r\n\r\nfunction getMinutesDiff(startTime, endTime) {\r\n  if (endTime > startTime) {\r\n    return (endTime - startTime) * 0.7;\r\n  }\r\n  if (startTime === endTime) {\r\n    return 0;\r\n  }\r\n  return (startTime - endTime) * -0.7;\r\n}\r\n\r\nconst sponsorPageStyles = StyleSheet.create({\r\n  container: {\r\n    flex: 1\r\n    // alignItems: 'center',\r\n  },\r\n  header: {\r\n    marginTop: 20,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: '100%'\r\n  },\r\n  address: {\r\n    alignItems: 'center',\r\n    margin: 10,\r\n    borderColor: 'black',\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  video: {\r\n    marginTop: 20,\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  title: {\r\n    fontSize: 26,\r\n    marginLeft: 10\r\n  },\r\n  logo: {\r\n    width: '100%',\r\n    height: 100\r\n  },\r\n  description: {\r\n    flex: 1,\r\n    margin: 10,\r\n    borderRadius: 5,\r\n    width: '95%',\r\n    padding: 10\r\n  },\r\n  couponContainer: {\r\n    width: '100%',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginTop: 20,\r\n    marginBottom: 20\r\n  },\r\n  coupon: {\r\n    width: 400,\r\n    height: 267\r\n  },\r\n  imageGallery: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    margin: 10,\r\n    marginBottom: 0\r\n  },\r\n  imageStyle: {\r\n    width: 150,\r\n    height: 150,\r\n    paddingTop: 100,\r\n    margin: 5\r\n  },\r\n  headerText: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold'\r\n  }\r\n});\r\n\r\nconst myStyles = StyleSheet.create({\r\n  inputBig: {\r\n    height: 200,\r\n    margin: 12,\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  input: {\r\n    height: 50,\r\n    margin: 12,\r\n    borderWidth: 1,\r\n    padding: 10\r\n  },\r\n  indentedInput: {\r\n    height: 50,\r\n    marginVertical: 12,\r\n    borderWidth: 1,\r\n    padding: 10,\r\n    marginRight: 12,\r\n    marginLeft: 30\r\n  },\r\n  text: {\r\n    fontSize: 16,\r\n    lineHeight: 21,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25\r\n  },\r\n  button: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 32,\r\n    borderRadius: 4,\r\n    elevation: 3\r\n  },\r\n  timeButton: {\r\n    width: 100,\r\n    height: 50,\r\n    marginHorizontal: 40,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    borderRadius: 4\r\n  },\r\n  timeText: {\r\n    fontSize: 16,\r\n    lineHeight: 21,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  },\r\n  actualTimeText: {\r\n    fontSize: 13,\r\n    lineHeight: 18,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 0.25,\r\n    color: 'white'\r\n  },\r\n  timeStyle: {\r\n    flex: 0.3,\r\n    borderWidth: 2,\r\n    borderLeftColor: 'white'\r\n  }\r\n});\r\n\r\nconst listingStyles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center'\r\n  },\r\n  cardContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    alignSelf: 'center',\r\n    width: '95%',\r\n    height: 75,\r\n    borderRadius: 10,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderBottomWidth: 0,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 2,\r\n    elevation: 1,\r\n    marginLeft: 5,\r\n    marginRight: 5,\r\n    marginTop: 10\r\n  },\r\n  containerForNotifications: {\r\n    alignItems: 'center',\r\n    alignSelf: 'center',\r\n    width: '95%',\r\n    height: 75,\r\n    borderRadius: 10,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderBottomWidth: 0,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 2,\r\n    elevation: 1,\r\n    marginLeft: 5,\r\n    marginRight: 5,\r\n    marginTop: 10\r\n  },\r\n  text: {\r\n    flex: 1,\r\n    fontSize: 20,\r\n    textAlign: 'center',\r\n    marginTop: 5,\r\n    marginBottom: 5\r\n  },\r\n  image: {\r\n    width: '100%',\r\n    height: '100%',\r\n    borderRadius: 10\r\n  }\r\n});\r\n","import { Input, Layout, Spinner, Text } from '@ui-kitten/components';\r\nimport { TouchableWithoutFeedback } from '@ui-kitten/components/devsupport';\r\nimport { useState } from 'react';\r\nimport {\r\n  Keyboard,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  TouchableOpacity\r\n} from 'react-native';\r\n\r\nimport { selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport WrapItems from '../../components/WrapItems';\r\nimport { useEditUserMutation, useGetUserInfoQuery } from '../api/usersApi';\r\n\r\nfunction EditProfileHeader({ navigation, saveChanges }) {\r\n  return (\r\n    <Layout\r\n      style={{\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        margin: 20,\r\n        marginTop: Platform.OS !== 'ios' ? 40 : 20\r\n      }}\r\n    >\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          navigation.goBack();\r\n        }}\r\n      >\r\n        <Text>Cancel</Text>\r\n      </TouchableOpacity>\r\n      <Text category=\"s1\">Edit Profile</Text>\r\n      <TouchableOpacity onPress={saveChanges}>\r\n        <Text>Save</Text>\r\n      </TouchableOpacity>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default function EditUser({ navigation }) {\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const { data: userData } = useGetUserInfoQuery(userKey, {\r\n    skip: !userKey\r\n  });\r\n\r\n  const inputs = [\r\n    {\r\n      placeholder: '*******',\r\n      label: 'password',\r\n      name: 'password'\r\n    },\r\n    {\r\n      placeholder: userData.realFirstName,\r\n      label: 'First Name',\r\n      name: 'realFirstName'\r\n    },\r\n    {\r\n      placeholder: userData.realLastName,\r\n      label: 'Last Name',\r\n      name: 'realLastName'\r\n    },\r\n    {\r\n      placeholder: userData.profileDescription,\r\n      label: 'Profile Description',\r\n      name: 'profileDescription',\r\n      propOptions: { multiline: true, textStyle: { minHeight: 64 } }\r\n    },\r\n    {\r\n      placeholder: userData.linkedin,\r\n      label: 'LinkedIn',\r\n      name: 'linkedin'\r\n    },\r\n    {\r\n      placeholder: userData.major,\r\n      label: 'Major',\r\n      name: 'major'\r\n    }\r\n  ];\r\n\r\n  const [fields, setFields] = useState(\r\n    Object.fromEntries(inputs.map((input) => [input.name, '']))\r\n  );\r\n  const [editUser, { isLoading }] = useEditUserMutation();\r\n\r\n  const saveChanges = async () => {\r\n    const changedFields = Object.entries(fields).filter(\r\n      ([_, value]) => value !== ''\r\n    );\r\n\r\n    try {\r\n      if (changedFields.length > 0) {\r\n        await editUser({\r\n          userKey,\r\n          userName: userData.userName,\r\n          fields: Object.fromEntries(changedFields)\r\n        }).unwrap();\r\n      }\r\n\r\n      navigation.goBack();\r\n    } catch (err) {\r\n      console.warn('Error editing user', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout style={{ flex: 1 }}>\r\n      {isLoading ? (\r\n        <Layout\r\n          style={{\r\n            flex: 1,\r\n            backgroundColor: 'transparent',\r\n            position: 'absolute',\r\n            top: '30%',\r\n            right: '50%',\r\n            zIndex: 1\r\n          }}\r\n        >\r\n          <Spinner size=\"medium\" />\r\n        </Layout>\r\n      ) : null}\r\n\r\n      <EditProfileHeader navigation={navigation} saveChanges={saveChanges} />\r\n      <KeyboardAvoidingView\r\n        style={{ flex: 1 }}\r\n        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n      >\r\n        <TouchableWithoutFeedback\r\n          style={{ flex: 1 }}\r\n          onPress={Keyboard.dismiss}\r\n        >\r\n          <WrapItems\r\n            style={{ marginVertical: 20 }}\r\n            childStyle={{ marginHorizontal: 40, marginVertical: 10 }}\r\n          >\r\n            {inputs.map(({ placeholder, label, name, propOptions }) => (\r\n              <Input\r\n                key={name}\r\n                placeholder={placeholder}\r\n                label={label}\r\n                onChangeText={(text) => setFields({ ...fields, [name]: text })}\r\n                {...propOptions}\r\n              />\r\n            ))}\r\n          </WrapItems>\r\n        </TouchableWithoutFeedback>\r\n      </KeyboardAvoidingView>\r\n    </Layout>\r\n  );\r\n}\r\n","import { Button, Divider, Layout, Text, Toggle } from '@ui-kitten/components';\r\nimport Constants from 'expo-constants';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useColorScheme } from 'react-native';\r\n\r\nimport {\r\n  deviceDarkModeSet,\r\n  reset as resetAppData,\r\n  selectDarkMode,\r\n  selectIsGuest,\r\n  selectUserKey,\r\n  useDeviceColorSchemeSet\r\n} from '../../app/appDataSlice';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport ModalContainer from '../../components/ModalContainer';\r\nimport WrapItems from '../../components/WrapItems';\r\nimport { apiSlice } from '../api/apiSlice';\r\nimport {\r\n  useDeleteAccountMutation,\r\n  useEditUserMutation,\r\n  useGetUserInfoQuery\r\n} from '../api/usersApi';\r\nimport { reset as resetClassPages } from '../classPages/classPagesSlice';\r\nimport { reset as resetDiscover } from '../discover/discoverSlice';\r\nimport { base_URL } from '../../constants/admin';\r\nimport { UserData } from '../../app/types';\r\n\r\nexport default function SettingsPage({ navigation }) {\r\n  const [settingsDisabled, setSettingsDisabled] = useState(false);\r\n  const [editUser] = useEditUserMutation();\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const useDeviceColorScheme = useAppSelector(\r\n    (state) => state.appData.secure.useDeviceColorScheme\r\n  );\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const isGuest = useAppSelector(selectIsGuest);\r\n  const colorScheme = useColorScheme();\r\n  const { data: userData } = useGetUserInfoQuery(userKey, {\r\n    skip: !userKey\r\n  });\r\n  const dispatch = useAppDispatch();\r\n  const [showGuestModal, setShowGuestModal] = useState(false);\r\n  const [deleteAccount, { isLoading }] = useDeleteAccountMutation();\r\n\r\n  const currentVersion =\r\n    Constants?.manifest2?.extra?.expoClient?.version ??\r\n    Constants?.manifest?.version;\r\n\r\n  const logOut = () => {\r\n    dispatch(resetClassPages());\r\n    dispatch(resetDiscover());\r\n    dispatch(resetAppData());\r\n    dispatch(apiSlice.util.resetApiState());\r\n  };\r\n\r\n  const handleDeleteAccount = async () => {\r\n    try {\r\n      await deleteAccount({ userKey, userName: userData.userName }).unwrap();\r\n      logOut();\r\n    } catch (e) {\r\n      console.warn('Error deleting account: ', e);\r\n    }\r\n  };\r\n\r\n  const handleUseDeviceSettingToggled = (checked: boolean) => {\r\n    dispatch(useDeviceColorSchemeSet(checked));\r\n    if (checked) {\r\n      dispatch(deviceDarkModeSet(colorScheme === 'dark'));\r\n    }\r\n  };\r\n\r\n  const handleDarkModeToggled = (checked: boolean) => {\r\n    dispatch(useDeviceColorSchemeSet(false));\r\n    dispatch(deviceDarkModeSet(checked));\r\n  };\r\n\r\n  function handleSettingsChange(settingName, value) {\r\n    setSettingsDisabled(true);\r\n    const body = {\r\n      settings: {}\r\n    };\r\n    body.settings[settingName] = value;\r\n    editUser({\r\n      userKey,\r\n      userName: userData.userName,\r\n      fields: JSON.stringify(body)\r\n    })\r\n      .unwrap()\r\n      .then(() => setSettingsDisabled(false))\r\n      .catch((e) => {\r\n        setSettingsDisabled(false);\r\n        console.log(e.message);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Layout style={{ flex: 1 }}>\r\n      <Layout\r\n        style={{\r\n          flexDirection: 'row',\r\n          marginHorizontal: 20,\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          flex: 1\r\n        }}\r\n      >\r\n        <Layout>\r\n          <Text category=\"h2\">\r\n            {userData?.realFirstName} {userData?.realLastName}\r\n          </Text>\r\n          <Text category=\"h6\" status=\"success\">\r\n            @{userData?.userName}\r\n          </Text>\r\n        </Layout>\r\n        <Layout>\r\n          <Button\r\n            onPress={() => {\r\n              if (isGuest) {\r\n                setShowGuestModal(true);\r\n              } else {\r\n                navigation.navigate('EditUser');\r\n              }\r\n            }}\r\n          >\r\n            Edit\r\n          </Button>\r\n        </Layout>\r\n      </Layout>\r\n      {showGuestModal && (\r\n        <ModalContainer\r\n          title=\"Wait!\"\r\n          children={\r\n            <Text style={{ paddingHorizontal: 30 }}>\r\n              This feature is locked to our Guest Users. Please create a free\r\n              account with us to take advantage this feature.\r\n            </Text>\r\n          }\r\n          backDropVisible={showGuestModal}\r\n          setBackDropVisible={setShowGuestModal}\r\n        />\r\n      )}\r\n\r\n      <Divider />\r\n\r\n      <Layout\r\n        style={{\r\n          flex: 5,\r\n          justifyContent: 'space-between',\r\n          marginHorizontal: 20\r\n        }}\r\n      >\r\n        <Layout>\r\n          <Text category=\"h6\" style={{ textAlign: 'center', marginTop: 20 }}>\r\n            Dark Mode\r\n          </Text>\r\n          <Layout\r\n            style={{\r\n              marginTop: 20,\r\n              flexDirection: 'row',\r\n              justifyContent: 'space-between'\r\n            }}\r\n          >\r\n            <Text>Use Device Setting</Text>\r\n            <Toggle\r\n              onChange={(checked) => handleUseDeviceSettingToggled(checked)}\r\n              checked={useDeviceColorScheme}\r\n            />\r\n          </Layout>\r\n          <Layout\r\n            style={{\r\n              marginTop: 20,\r\n              flexDirection: 'row',\r\n              justifyContent: 'space-between',\r\n              opacity: useDeviceColorScheme ? 0.4 : 1\r\n            }}\r\n          >\r\n            <Text>Dark Mode</Text>\r\n            <Toggle\r\n              onChange={(checked) => handleDarkModeToggled(checked)}\r\n              checked={darkMode}\r\n            />\r\n          </Layout>\r\n\r\n          <Text category=\"h6\" style={{ textAlign: 'center', marginTop: 20 }}>\r\n            Push Notifications\r\n          </Text>\r\n          {userData.permissionLevel === 'admin' && (\r\n            <Layout\r\n              style={{\r\n                marginTop: 20,\r\n                flexDirection: 'row',\r\n                justifyContent: 'space-between'\r\n              }}\r\n            >\r\n              <Text>New Review Notification</Text>\r\n              <Toggle\r\n                disabled={settingsDisabled}\r\n                onChange={(checked) =>\r\n                  handleSettingsChange('newReview', checked)\r\n                }\r\n                checked={userData.settings['newReview']}\r\n              />\r\n            </Layout>\r\n          )}\r\n          <Layout\r\n            style={{\r\n              marginTop: 20,\r\n              flexDirection: 'row',\r\n              justifyContent: 'space-between'\r\n            }}\r\n          >\r\n            <Text>Alert Notifications</Text>\r\n            <Toggle\r\n              disabled={settingsDisabled}\r\n              onChange={(checked) =>\r\n                handleSettingsChange('alertNotifications', checked)\r\n              }\r\n              checked={userData.settings['alertNotifications']}\r\n            />\r\n          </Layout>\r\n\r\n          <Layout\r\n            style={{\r\n              marginTop: 20,\r\n              flexDirection: 'row',\r\n              justifyContent: 'space-between'\r\n            }}\r\n          >\r\n            <Text>Chat Notifications</Text>\r\n            <Toggle\r\n              disabled={settingsDisabled}\r\n              onChange={(checked) =>\r\n                handleSettingsChange('chatNotifications', checked)\r\n              }\r\n              checked={userData.settings['chatNotifications']}\r\n            />\r\n          </Layout>\r\n        </Layout>\r\n\r\n        <WrapItems\r\n          childStyle={{ marginVertical: 3 }}\r\n          style={{ alignItems: 'center', marginBottom: 10 }}\r\n        >\r\n          <Button onPress={logOut} status=\"warning\" appearance=\"outline\">\r\n            Log Out\r\n          </Button>\r\n          <Button\r\n            onPress={handleDeleteAccount}\r\n            status=\"danger\"\r\n            appearance=\"ghost\"\r\n          >\r\n            Delete Account\r\n          </Button>\r\n          <Text>{currentVersion ? `Version ${currentVersion}` : ''}</Text>\r\n        </WrapItems>\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n}\r\n","import { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { useTheme } from '@ui-kitten/components';\r\n\r\nimport { selectDarkMode } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport BackButton from '../../components/BackButton';\r\nimport EditUser from './EditUser';\r\nimport SettingsPage from './SettingsPage';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function Settings() {\r\n  const theme = useTheme();\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n\r\n  return (\r\n    <Stack.Navigator\r\n      screenOptions={{\r\n        headerStyle: {\r\n          backgroundColor: darkMode ? theme['color-basic-800'] : '#fff'\r\n        }\r\n      }}\r\n    >\r\n      <Stack.Screen\r\n        name=\"SettingsPage\"\r\n        component={SettingsPage}\r\n        options={({ navigation }) => ({\r\n          title: 'Settings',\r\n          headerLeft: (props) => (\r\n            <BackButton navigation={navigation} {...props} />\r\n          )\r\n        })}\r\n      />\r\n      <Stack.Group screenOptions={{ presentation: 'modal' }}>\r\n        <Stack.Screen\r\n          name=\"EditUser\"\r\n          component={EditUser}\r\n          options={{ headerShown: false }}\r\n        />\r\n      </Stack.Group>\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n","import { Feather, FontAwesome5 } from '@expo/vector-icons';\r\nimport { Button, useTheme } from '@ui-kitten/components';\r\nimport React from 'react';\r\nimport { ScrollView, View, Text } from 'react-native';\r\n\r\nexport default function Menu({ menuItems, setMenuItems }) {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <View style={{ marginVertical: 10 }}>\r\n      <ScrollView\r\n        showsHorizontalScrollIndicator={false}\r\n        horizontal\r\n        style={{ flexDirection: 'row' }}\r\n      >\r\n        {Object.entries(menuItems).map(([name, value]: any[], index) => {\r\n          if (!value.selected) {\r\n            return (\r\n              <Button\r\n                onPress={() => {\r\n                  setMenuItems({\r\n                    ...menuItems,\r\n                    [name]: { selected: !value.selected }\r\n                  });\r\n                }}\r\n                status={value.selected ? 'info' : 'primary'}\r\n                style={{\r\n                  height: 45,\r\n                  marginHorizontal: 10,\r\n                  borderRadius: 20,\r\n                  backgroundColor: `rgba(${theme['color-success-500']}, ${\r\n                    1 - 0.03 * index\r\n                  })`,\r\n                  borderColor: `rgba(${theme['color-success-500']}, ${\r\n                    1 - 0.03 * index\r\n                  })`\r\n                }}\r\n                key={index}\r\n              >\r\n                <View\r\n                  style={{ alignItems: 'center', justifyContent: 'center' }}\r\n                >\r\n                  <Text style={{ color: 'white' }}>\r\n                    {name}\r\n                    {value.selected && (\r\n                      <Text>\r\n                        {`    `}\r\n                        <Feather name=\"x\" size={15} />\r\n                      </Text>\r\n                    )}\r\n                  </Text>\r\n                </View>\r\n              </Button>\r\n            );\r\n          }\r\n        })}\r\n      </ScrollView>\r\n      <ScrollView\r\n        showsHorizontalScrollIndicator={false}\r\n        horizontal\r\n        style={{ flexDirection: 'row', marginTop: 3, marginLeft: 8 }}\r\n      >\r\n        {Object.entries(menuItems).map(([name, value]: any[], index) => {\r\n          if (value.selected) {\r\n            return (\r\n              <Button\r\n                accessoryRight={\r\n                  <FontAwesome5 name=\"times\" size={14} color=\"white\" />\r\n                }\r\n                onPress={() => {\r\n                  setMenuItems({\r\n                    ...menuItems,\r\n                    [name]: { selected: !value.selected }\r\n                  });\r\n                }}\r\n                style={{\r\n                  height: 45,\r\n                  marginHorizontal: 2,\r\n                  borderRadius: 20,\r\n                  backgroundColor: theme['color-success-500'],\r\n                  borderColor: theme['color-success-500']\r\n                }}\r\n                key={index}\r\n              >\r\n                <View\r\n                  style={{ alignItems: 'center', justifyContent: 'center' }}\r\n                >\r\n                  <Text style={{ color: 'white' }}>{name}</Text>\r\n                </View>\r\n              </Button>\r\n            );\r\n          }\r\n        })}\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n}\r\n","import { apiSlice } from './apiSlice';\r\n\r\nexport const sponsorsApiSlice = apiSlice.injectEndpoints({\r\n  overrideExisting: true,\r\n  endpoints: (builder) => ({\r\n    refreshSponsors: builder.query({\r\n      query: (userKey) => ({\r\n        url: '/sponsors',\r\n        headers: {\r\n          userKey\r\n        }\r\n      }),\r\n      transformResponse: (sponsors: any[]) => {\r\n        sponsors = sponsors.sort((a, b) => {\r\n          const textA = a.sponsorName.toUpperCase();\r\n          const textB = b.sponsorName.toUpperCase();\r\n          return textA < textB ? 1 : textA > textB ? -1 : 0;\r\n        });\r\n\r\n        return [\r\n          sponsors.find((sponsor) => sponsor.sponsorName === 'Big Mo\\'s'),\r\n          ...sponsors.filter((sponsor) => sponsor.sponsorName !== 'Big Mo\\'s')\r\n        ];\r\n      }\r\n    }),\r\n    postSponsorVisit: builder.mutation({\r\n      query: ({ userKey, sponsorId }) => ({\r\n        url: '/analytics/sponsor/ping',\r\n        method: 'POST',\r\n        headers: {\r\n          userKey\r\n        },\r\n        body: {\r\n          sponsorId\r\n        },\r\n        responseHandler: (response) => response.text()\r\n      })\r\n    })\r\n  })\r\n});\r\n\r\nexport const { useLazyRefreshSponsorsQuery, usePostSponsorVisitMutation } = sponsorsApiSlice;\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport { Layout, useTheme } from '@ui-kitten/components';\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\nimport React, { useEffect, useState } from 'react';\r\nimport {\r\n  Dimensions,\r\n  Image,\r\n  Linking,\r\n  ScrollView,\r\n  StyleSheet,\r\n  Text,\r\n  TouchableOpacity,\r\n  View\r\n} from 'react-native';\r\n\r\nimport { selectDarkMode, selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport Menu from '../../components/Menu';\r\nimport {\r\n  useLazyRefreshSponsorsQuery,\r\n  usePostSponsorVisitMutation\r\n} from '../api/sponsorsApi';\r\n\r\nconst windowWidth = Dimensions.get('window').width;\r\n\r\nexport function SponsorPage({\r\n  route: {\r\n    params: { data }\r\n  }\r\n}) {\r\n  const isDarkMode = useAppSelector(selectDarkMode);\r\n  const sponsorPageStyles = StyleSheet.create({\r\n    container: {\r\n      flex: 1\r\n    },\r\n    header: {\r\n      marginTop: 20,\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      width: '100%'\r\n    },\r\n    address: {\r\n      color: isDarkMode ? 'white' : 'black',\r\n      alignItems: 'center',\r\n      margin: 10,\r\n      borderColor: 'black',\r\n      borderWidth: 1,\r\n      padding: 10\r\n    },\r\n    video: {\r\n      marginTop: 20,\r\n      display: 'flex',\r\n      justifyContent: 'flex-start'\r\n    },\r\n    title: {\r\n      color: isDarkMode ? 'white' : 'black',\r\n      fontSize: 26,\r\n      marginLeft: 10\r\n    },\r\n    subtitle: {\r\n      color: isDarkMode ? 'white' : 'black',\r\n      fontSize: 14,\r\n      justifyContent: 'center'\r\n    },\r\n    logo: {\r\n      width: '100%',\r\n      height: 100\r\n    },\r\n    description: {\r\n      borderWidth: 1,\r\n      margin: 10,\r\n      borderColor: '#F1E4B5',\r\n      borderRadius: 5,\r\n      width: '95%',\r\n      padding: 10\r\n      // backgroundColor: '#F9F9F9',\r\n    },\r\n    couponContainer: {\r\n      width: '100%',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      marginTop: 20,\r\n      marginBottom: 20\r\n    },\r\n    coupon: {\r\n      width: 400,\r\n      height: 267\r\n    },\r\n    imageGallery: {\r\n      justifyContent: 'center',\r\n      flexDirection: 'row',\r\n      flexWrap: 'wrap',\r\n      margin: 10,\r\n      marginBottom: 0\r\n    },\r\n    imageStyle: {\r\n      width: 150,\r\n      height: 150,\r\n      paddingTop: 100,\r\n      margin: 5\r\n    },\r\n    headerText: {\r\n      color: isDarkMode ? 'white' : 'black',\r\n      fontSize: 20,\r\n      fontWeight: 'bold'\r\n    }\r\n  });\r\n  const [imageIndex, setImageIndex] = useState(0);\r\n  const [visible, setIsVisible] = useState(false);\r\n  const [canOpenLink, setCanOpenLink] = useState(false);\r\n\r\n  const [postSponsorVisitQuery] = usePostSponsorVisitMutation();\r\n\r\n  const userKey = useAppSelector(selectUserKey);\r\n\r\n  const videoLinkArray = data.videoLink && data.videoLink.split('/');\r\n  const videoLink = data.videoLink && videoLinkArray[videoLinkArray.length - 1];\r\n\r\n  function getSubtitle() {\r\n    if (data.phoneNumber && data.email) {\r\n      return `${data.phoneNumber} \\u2022 ${data.email}`;\r\n    }\r\n    if (data.phoneNumber) {\r\n      return data.phoneNumber;\r\n    }\r\n    if (data.email) {\r\n      return data.email;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  const postSponsorVisit = async () => {\r\n    try {\r\n      await postSponsorVisitQuery({ userKey, sponsorId: data._id }).unwrap();\r\n    } catch (e) {\r\n      console.warn('Error posting sponsor visit: ', e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const funct = async () => {\r\n      setCanOpenLink(await Linking.canOpenURL(data.website));\r\n      postSponsorVisit();\r\n    };\r\n    funct();\r\n  }, []);\r\n\r\n  function renderWebsiteLink() {\r\n    if (canOpenLink) {\r\n      return (\r\n        <View>\r\n          <TouchableOpacity\r\n            onPress={() => {\r\n              Linking.openURL(data.website);\r\n            }}\r\n            style={{\r\n              display: 'flex',\r\n              flexDirection: 'row',\r\n              alignItems: 'center'\r\n            }}\r\n          >\r\n            <Text\r\n              style={{\r\n                fontSize: 15,\r\n                color: isDarkMode ? '#6b7ee5' : '#4b5dc7',\r\n                paddingRight: 5\r\n              }}\r\n            >\r\n              Check Out Our Website!\r\n            </Text>\r\n            <FontAwesome5 name=\"link\" size={15} color=\"#4b5dc7\" />\r\n          </TouchableOpacity>\r\n        </View>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Layout style={{ flex: 1 }}>\r\n      <ScrollView>\r\n        <Layout style={sponsorPageStyles.container}>\r\n          <View style={sponsorPageStyles.header}>\r\n            <Image\r\n              resizeMode=\"contain\"\r\n              style={sponsorPageStyles.logo}\r\n              source={{ uri: data.logo }}\r\n            />\r\n          </View>\r\n          <View\r\n            style={{ width: '100%', display: 'flex', alignItems: 'center' }}\r\n          >\r\n            <Text style={sponsorPageStyles.title}>{data.sponsorName}</Text>\r\n            <Text style={sponsorPageStyles.subtitle}>{getSubtitle()}</Text>\r\n          </View>\r\n\r\n          {data.location && (\r\n            <View style={sponsorPageStyles.address}>\r\n              <Text\r\n                style={{ fontSize: 18, color: isDarkMode ? 'white' : 'black' }}\r\n              >\r\n                {data.location}\r\n              </Text>\r\n            </View>\r\n          )}\r\n\r\n          <View\r\n            style={{ width: '100%', display: 'flex', alignItems: 'center' }}\r\n          >\r\n            {renderWebsiteLink()}\r\n          </View>\r\n\r\n          <Layout style={sponsorPageStyles.description}>\r\n            <Text\r\n              style={{ fontSize: 17, color: isDarkMode ? 'white' : 'black' }}\r\n            >\r\n              {data.description}\r\n            </Text>\r\n          </Layout>\r\n          <View\r\n            style={{\r\n              width: '100%',\r\n              alignSelf: 'flex-start',\r\n              marginLeft: 20,\r\n              borderBottomColor: '#F1E4B5',\r\n              borderBottomWidth: 2,\r\n              paddingBottom: 5\r\n            }}\r\n          >\r\n            <Text style={sponsorPageStyles.headerText}>Image Gallery</Text>\r\n          </View>\r\n\r\n          <View style={sponsorPageStyles.imageGallery}>\r\n            {data.images.map((img, index) => {\r\n              return (\r\n                <TouchableOpacity\r\n                  onPress={() => {\r\n                    setImageIndex(index);\r\n                    setIsVisible(true);\r\n                  }}\r\n                >\r\n                  <Image\r\n                    style={sponsorPageStyles.imageStyle}\r\n                    source={{ uri: img }}\r\n                  />\r\n                </TouchableOpacity>\r\n              );\r\n            })}\r\n          </View>\r\n\r\n          {data.coupons[0] && (\r\n            <Layout style={sponsorPageStyles.couponContainer}>\r\n              <Image\r\n                resizeMode=\"contain\"\r\n                source={require('../../../assets/sponsorPage/coupon.png')}\r\n                style={sponsorPageStyles.coupon}\r\n              />\r\n              <Text\r\n                style={{\r\n                  position: 'absolute',\r\n                  fontSize: 30,\r\n                  textAlign: 'center',\r\n                  justifyContent: 'center',\r\n                  width: '75%',\r\n                  paddingBottom: 20,\r\n                  paddingRight: 7\r\n                }}\r\n              >\r\n                {data.coupons[0].couponDescription}\r\n              </Text>\r\n              <Text\r\n                style={{ fontSize: 15, color: isDarkMode ? 'white' : 'black' }}\r\n              >\r\n                Show this coupon at the store to redeem.\r\n              </Text>\r\n            </Layout>\r\n          )}\r\n\r\n          <View\r\n            style={{\r\n              width: '100%',\r\n              alignSelf: 'flex-start',\r\n              marginLeft: 20,\r\n              borderBottomColor: '#F1E4B5',\r\n              borderBottomWidth: 2,\r\n              paddingBottom: 5\r\n            }}\r\n          >\r\n            <Text style={sponsorPageStyles.headerText}>Hours</Text>\r\n          </View>\r\n          <View\r\n            style={{\r\n              justifyContent: 'center',\r\n              alignSelf: 'center',\r\n              marginLeft: 25,\r\n              marginBottom: 50\r\n            }}\r\n          >\r\n            {data.hours.map((day, i) => {\r\n              return (\r\n                <Layout\r\n                  key={i}\r\n                  style={{\r\n                    justifyContent: 'space-between',\r\n                    flexDirection: 'row',\r\n                    width: '100%'\r\n                  }}\r\n                >\r\n                  <Text\r\n                    style={{\r\n                      marginTop: 10,\r\n                      color: isDarkMode ? 'white' : 'black'\r\n                    }}\r\n                  >\r\n                    {day.dayOfTheWeek}:\r\n                  </Text>\r\n                  <Text\r\n                    style={{\r\n                      alignSelf: 'flex-end',\r\n                      paddingRight: 30,\r\n                      marginTop: 10,\r\n                      color: isDarkMode ? 'white' : 'black'\r\n                    }}\r\n                  >\r\n                    {buildTimeString(day)}\r\n                  </Text>\r\n                </Layout>\r\n              );\r\n            })}\r\n          </View>\r\n        </Layout>\r\n      </ScrollView>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nfunction buildTimeString(time) {\r\n  if (!time.openTime || time.openTime === '' || time.openTime === null) {\r\n    return 'closed';\r\n  }\r\n  return `${convertTo12HourTime(time.openTime)} - ${convertTo12HourTime(\r\n    time.closeTime\r\n  )}`;\r\n}\r\n\r\nfunction convertTo12HourTime(time) {\r\n  if (time.length !== 5) {\r\n    time = `0${time}`;\r\n  }\r\n  let hours = time.slice(0, 2);\r\n  const minutes = time.slice(3, 5);\r\n  let ampm = Number.parseInt(hours) > 12 ? 'pm' : 'am';\r\n  hours %= 12;\r\n  if (hours === 0) {\r\n    hours = 12;\r\n    ampm = 'pm';\r\n  }\r\n  return `${hours}:${minutes}${ampm}`;\r\n}\r\n\r\nexport function SponsorsList({ navigation }) {\r\n  const theme = useTheme();\r\n  const isDarkMode = useAppSelector(selectDarkMode);\r\n  const [sponsorFilters, setSponsorFilters] = useState({});\r\n  const [gotSponsors, setGotSponsors] = useState(false);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const [refreshSponsorsQuery, { data: sponsors }] =\r\n    useLazyRefreshSponsorsQuery();\r\n\r\n  if (!gotSponsors) {\r\n    setGotSponsors(true);\r\n    refreshSponsors();\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (sponsors?.length > 0) {\r\n      getFilters();\r\n    }\r\n  }, [sponsors]);\r\n\r\n  async function refreshSponsors() {\r\n    try {\r\n      await refreshSponsorsQuery(userKey).unwrap();\r\n    } catch (e) {\r\n      console.warn('Error refreshing sponsors: ', e);\r\n    }\r\n  }\r\n\r\n  function getFilters() {\r\n    let tabNames = [];\r\n    const final = [];\r\n    for (const sponsor of sponsors) {\r\n      if (sponsor.tags !== undefined) {\r\n        for (const name of sponsor.tags) {\r\n          if (!tabNames.includes(name)) {\r\n            tabNames.push(name);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    tabNames = tabNames.sort();\r\n\r\n    // Puts 'Other' at the end\r\n    const temp = tabNames.includes('Other')\r\n      ? tabNames.findIndex((item) => item === 'Other')\r\n      : -1;\r\n    if (temp !== -1) {\r\n      tabNames.splice(temp, 1);\r\n    }\r\n    tabNames.push('Other');\r\n\r\n    const tempFilters = {};\r\n    for (const name of tabNames) {\r\n      tempFilters[name] = {\r\n        selected: false\r\n      };\r\n    }\r\n    setSponsorFilters(tempFilters);\r\n  }\r\n\r\n  function renderSponsorsBasedOnFilters() {\r\n    let shouldLimitPrint = false;\r\n    for (const filterName in sponsorFilters) {\r\n      if (sponsorFilters[filterName].selected) {\r\n        shouldLimitPrint = true;\r\n        break;\r\n      }\r\n    }\r\n    if (!shouldLimitPrint) {\r\n      return getTheSponsors(sponsors || [], navigation);\r\n    }\r\n    const sponsorsToSend = [];\r\n    for (const filterName in sponsorFilters) {\r\n      if (sponsorFilters[filterName].selected) {\r\n        for (const sponsor of sponsors) {\r\n          if (sponsor.tags.includes(filterName)) {\r\n            sponsorsToSend.push(sponsor);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return getTheSponsors(sponsorsToSend || [], navigation);\r\n  }\r\n\r\n  return (\r\n    <LinearGradient\r\n      colors={\r\n        isDarkMode\r\n          ? [theme['color-basic-1100'], theme['color-basic-1100']]\r\n          : [theme['color-primary-500'], theme['color-success-500']]\r\n      }\r\n      style={{\r\n        width: '100%',\r\n        margin: 0,\r\n        alignItems: 'center',\r\n        flex: 1\r\n      }}\r\n      start={{ x: 0, y: 0 }}\r\n      end={{ x: 1, y: 0.4 }}\r\n    >\r\n      <Layout style={{ flex: 1 }}>\r\n        <Menu\r\n          setMenuItems={setSponsorFilters}\r\n          menuItems={Object.keys(sponsorFilters).length > 0}\r\n        />\r\n        <ScrollView\r\n          showsVerticalScrollIndicator={false}\r\n          contentContainerStyle={{ alignItems: 'center' }}\r\n        >\r\n          {sponsors?.length === 0 ? (\r\n            <Text>Nothing to see here</Text>\r\n          ) : (\r\n            renderSponsorsBasedOnFilters()\r\n          )}\r\n        </ScrollView>\r\n      </Layout>\r\n    </LinearGradient>\r\n  );\r\n}\r\n\r\nfunction getTheSponsors(sponsors, navigation) {\r\n  const isDarkMode = useAppSelector(selectDarkMode);\r\n  const listingStyles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: '#fff',\r\n      alignItems: 'center'\r\n    },\r\n    cardContainer: {\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n      width: '100%',\r\n      maxWidth: windowWidth / 2,\r\n      height: 130,\r\n      backgroundColor: isDarkMode ? '#464646' : '#fff',\r\n      borderRadius: 10,\r\n      borderWidth: 1,\r\n      borderColor: isDarkMode ? '#818181' : '#ddd',\r\n      borderBottomWidth: isDarkMode ? 1 : 0,\r\n      shadowColor: '#000',\r\n      shadowOffset: { width: 0, height: 2 },\r\n      shadowOpacity: 0.2,\r\n      shadowRadius: 2,\r\n      elevation: 1,\r\n      marginLeft: 5,\r\n      marginRight: 5,\r\n      marginTop: 10\r\n    },\r\n    text: {\r\n      flex: 1,\r\n      color: isDarkMode ? 'white' : 'black',\r\n      fontSize: 20,\r\n      textAlign: 'center',\r\n      marginTop: 5,\r\n      marginBottom: 5\r\n    },\r\n    image: {\r\n      width: 120,\r\n      height: 120,\r\n      marginLeft: 10,\r\n      borderRadius: 10\r\n    }\r\n  });\r\n  if (sponsors.length === 0) {\r\n    return;\r\n  }\r\n  const final = [];\r\n  const starredFinal = [];\r\n  for (const sponsor of sponsors) {\r\n    if (sponsor.coupons && sponsor.coupons.length > 0) {\r\n      starredFinal.push(\r\n        <TouchableOpacity\r\n          onPress={() => {\r\n            navigation.navigate('SponsorPage', { data: sponsor });\r\n          }}\r\n          style={listingStyles.cardContainer}\r\n          key={sponsor._id}\r\n        >\r\n          {sponsor.coupons?.length ? (\r\n            <FontAwesome5\r\n              name=\"star\"\r\n              color=\"gold\"\r\n              style={{\r\n                alignSelf: 'flex-start',\r\n                top: 5,\r\n                left: 5\r\n              }}\r\n            />\r\n          ) : null}\r\n\r\n          <View style={{ flex: 1 }}>\r\n            <Image\r\n              resizeMode=\"contain\"\r\n              style={listingStyles.image}\r\n              source={{ uri: sponsor.logo }}\r\n            />\r\n          </View>\r\n\r\n          <Text style={listingStyles.text}>{sponsor.sponsorName}</Text>\r\n        </TouchableOpacity>\r\n      );\r\n    } else {\r\n      final.push(\r\n        <TouchableOpacity\r\n          onPress={() => {\r\n            navigation.navigate('SponsorPage', { data: sponsor });\r\n          }}\r\n          style={listingStyles.cardContainer}\r\n          key={sponsor._id}\r\n        >\r\n          {sponsor.coupons?.length ? (\r\n            <FontAwesome5\r\n              name=\"star\"\r\n              color=\"gold\"\r\n              style={{\r\n                position: 'absolute',\r\n                alignSelf: 'flex-start',\r\n                top: 5,\r\n                left: 5\r\n              }}\r\n            />\r\n          ) : null}\r\n\r\n          <View style={{ flex: 1 }}>\r\n            <Image\r\n              resizeMode=\"contain\"\r\n              style={listingStyles.image}\r\n              source={{ uri: sponsor.logo }}\r\n            />\r\n          </View>\r\n\r\n          <Text style={listingStyles.text}>{sponsor.sponsorName}</Text>\r\n        </TouchableOpacity>\r\n      );\r\n    }\r\n  }\r\n  for (const object of final) {\r\n    starredFinal.push(object);\r\n  }\r\n  return starredFinal;\r\n}\r\n","export const departments = [\r\n  'AFRI',\r\n  'AMST',\r\n  'ANTH',\r\n  'ARBC',\r\n  'ARBT',\r\n  'ARCN',\r\n  'ARHI',\r\n  'ART',\r\n  'ASAM',\r\n  'ASIA',\r\n  'ASTR',\r\n  'BIOL',\r\n  'CASA',\r\n  'CGH',\r\n  'CGS',\r\n  'CHEM',\r\n  'CHIN',\r\n  'CHLT',\r\n  'CHNT',\r\n  'CHST',\r\n  'CLAS',\r\n  'CLES',\r\n  'COGS',\r\n  'CORE',\r\n  'CREA',\r\n  'CSCI',\r\n  'CSMT',\r\n  'DANC',\r\n  'DS',\r\n  'EA',\r\n  'ECON',\r\n  'EDUC',\r\n  'ENGL',\r\n  'ENGR',\r\n  'ENTR',\r\n  'EURO',\r\n  'FGSS',\r\n  'FHS',\r\n  'FREN',\r\n  'FS',\r\n  'FWS',\r\n  'GEOG',\r\n  'GEOL',\r\n  'GERM',\r\n  'GLAS',\r\n  'GOVT',\r\n  'GREK',\r\n  'GRMT',\r\n  'GWS',\r\n  'HIST',\r\n  'HMSC',\r\n  'HSA',\r\n  'HUM',\r\n  'ID',\r\n  'IR',\r\n  'ITAL',\r\n  'JAPN',\r\n  'JPNT',\r\n  'KORE',\r\n  'KRNT',\r\n  'LAMS',\r\n  'LAS',\r\n  'LAST',\r\n  'LATN',\r\n  'LEAD',\r\n  'LGCS',\r\n  'LGST',\r\n  'LIT',\r\n  'MATH',\r\n  'MCBI',\r\n  'MCSI',\r\n  'MES',\r\n  'MLLC',\r\n  'MOBI',\r\n  'MS',\r\n  'MSL',\r\n  'MUS',\r\n  'NEUR',\r\n  'ORST',\r\n  'PE',\r\n  'PHIL',\r\n  'PHYS',\r\n  'POLI',\r\n  'PONT',\r\n  'PORT',\r\n  'POST',\r\n  'PPA',\r\n  'PPE',\r\n  'PSYC',\r\n  'RLIT',\r\n  'RLST',\r\n  'RUSS',\r\n  'RUST',\r\n  'SCI',\r\n  'SOC',\r\n  'SPAN',\r\n  'SPCH',\r\n  'STS',\r\n  'TEST',\r\n  'THEA',\r\n  'THES',\r\n  'WRIT'\r\n];\r\n","import {\r\n  Autocomplete,\r\n  AutocompleteItem,\r\n  Button,\r\n  Card,\r\n  Input,\r\n  Layout,\r\n  Text\r\n} from '@ui-kitten/components';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport { Keyboard, TouchableWithoutFeedback } from 'react-native';\r\n\r\nimport synonyms from './synonyms.json';\r\nimport { useAppDispatch, useAppSelector } from '../../../app/hooks';\r\nimport WrapItems from '../../../components/WrapItems';\r\nimport { departments } from '../../../constants/electiveGenerator';\r\nimport { showToast } from '../../../functions';\r\nimport {\r\n  electiveGeneratorSelected,\r\n  selectClassesList,\r\n  suggestedClassesUpdated\r\n} from '../classPagesSlice';\r\n\r\nexport default function ElectiveGenerator({ navigation }: any) {\r\n  const dispatch = useAppDispatch();\r\n  const [departmentQuery, setDepartmentQuery] = useState('');\r\n  const [departmentOptions, setDepartmentOptions] = useState(departments);\r\n  const [description, setDescription] = useState('');\r\n\r\n  const classes = useAppSelector(selectClassesList);\r\n\r\n  const getClassesByDepartment = useCallback((department: string) => {\r\n    if (department === 'All Departments') return Object.entries(classes);\r\n    return Object.entries(classes).filter(([key, _]) => {\r\n      const classDepartment = key.split(' ')[0];\r\n      return classDepartment === department;\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    dispatch(electiveGeneratorSelected());\r\n  }, []);\r\n\r\n  const onChangeDepartmentText = useCallback((query: string): void => {\r\n    setDepartmentQuery(query);\r\n    setDepartmentOptions(\r\n      departments.filter((department) =>\r\n        department.includes(query.toUpperCase())\r\n      )\r\n    );\r\n  }, []);\r\n\r\n  const onSubmit = () => {\r\n    Keyboard.dismiss();\r\n    if (!departmentQuery || !description) {\r\n      showToast('Please fill out all fields', 'red');\r\n      return;\r\n    }\r\n    const cleanedDescription = description\r\n      .toLowerCase()\r\n      .replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, '')\r\n      .replace(/\\s{2,}/g, ' ');\r\n    const classesByDepartment = getClassesByDepartment(departmentQuery);\r\n    // Compare text in user input to class descriptions and return top 5 matches\r\n    classesByDepartment.sort((a, b) => {\r\n      const aWords = getWords(`${a[1].summary} ${a[1].courseName}`);\r\n      const bWords = getWords(`${b[1].summary} ${b[1].courseName}`);\r\n\r\n      const aMatches = aWords.filter((word) =>\r\n        cleanedDescription.includes(word)\r\n      );\r\n      const bMatches = bWords.filter((word) =>\r\n        cleanedDescription.includes(word)\r\n      );\r\n      return bMatches.length - aMatches.length;\r\n    });\r\n\r\n    const matches = Object.fromEntries(classesByDepartment.slice(0, 5));\r\n    dispatch(suggestedClassesUpdated(matches));\r\n    navigation.goBack();\r\n    showToast('Suggested classes updated!', 'green');\r\n  };\r\n\r\n  // Helper functions\r\n  const getWords = (text: string) => {\r\n    const wordList = text\r\n      .toLowerCase()\r\n      .replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, '')\r\n      .replace(/\\s{2,}/g, ' ')\r\n      .split(' ');\r\n\r\n    let wordListWithSynonyms = [];\r\n\r\n    for (const word of wordList) {\r\n      if (synonyms[word]) {\r\n        wordListWithSynonyms.push(word);\r\n        wordListWithSynonyms = wordListWithSynonyms.concat(synonyms[word]);\r\n      }\r\n    }\r\n\r\n    return wordListWithSynonyms;\r\n  };\r\n\r\n  return (\r\n    <TouchableWithoutFeedback onPress={Keyboard.dismiss} style={{ flex: 1 }}>\r\n      <Layout style={{ flex: 1 }}>\r\n        <WrapItems childStyle={{ margin: 20 }}>\r\n          <Card activeOpacity={1} disabled>\r\n            <Text category=\"s1\" style={{ textAlign: 'center' }}>\r\n              Choose a department and write a description about what inspires\r\n              you.\r\n              {`\\n\\n`}\r\n              Then let our powerful AI choose the best electives for you!\r\n            </Text>\r\n          </Card>\r\n          <Autocomplete\r\n            label=\"Department\"\r\n            onSelect={(index) => setDepartmentQuery(departmentOptions[index])}\r\n            onChangeText={onChangeDepartmentText}\r\n            value={departmentQuery}\r\n          >\r\n            {departmentOptions.map((option) => (\r\n              <AutocompleteItem title={option} key={option} />\r\n            ))}\r\n          </Autocomplete>\r\n          <Input\r\n            label=\"Description\"\r\n            multiline\r\n            textStyle={{ minHeight: 100 }}\r\n            value={description}\r\n            onChangeText={(text) => setDescription(text)}\r\n          />\r\n          <Button onPress={onSubmit}>Submit</Button>\r\n        </WrapItems>\r\n      </Layout>\r\n    </TouchableWithoutFeedback>\r\n  );\r\n}\r\n","import { FontAwesome5, Foundation, Ionicons } from '@expo/vector-icons';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { Layout, Text, useTheme } from '@ui-kitten/components';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Image, Platform, TouchableOpacity } from 'react-native';\r\n\r\nimport { selectDarkMode, selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport Header from '../../components/Header';\r\nimport NotificationsNavigation from '../notifications/Notifications';\r\nimport { base_URL } from '../notifications/constants';\r\nimport Settings from '../settings/index';\r\nimport { SponsorPage, SponsorsList } from '../sponsors/SponsorsList';\r\nimport ClassesList from './ClassesList';\r\nimport ElectiveGenerator from './ElectiveGenerator';\r\nimport SelectTerm from './SelectTerm';\r\nimport SingleClassPage from './SingleClassPage/index';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function SearchClasses({ navigation }) {\r\n  const theme = useTheme();\r\n  const hasSelectedElectiveGenerator = useAppSelector(\r\n    (state) => state.appData.classPages.hasSelectedElectiveGen\r\n  );\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const [numberOfNotifications, setNumberOfNotifications] = useState(0);\r\n\r\n  function refreshNotifications() {\r\n    fetch(`${base_URL}/users/getNotifications`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then((res) => {\r\n      res.text().then((notifications) => {\r\n        notifications = JSON.parse(notifications);\r\n        setNumberOfNotifications(notifications.length);\r\n      });\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    refreshNotifications();\r\n    setInterval(() => {\r\n      refreshNotifications();\r\n    }, 60000); // refresh every minute\r\n  }, []);\r\n\r\n  const accessoryLeft = (\r\n    <Image\r\n      style={{\r\n        height: 28,\r\n        width: 28\r\n      }}\r\n      source={require('../../../assets/logos/app-logo-transparent.png')}\r\n    />\r\n  );\r\n\r\n  const accessoryRight = (\r\n    <Layout\r\n      style={{\r\n        flexDirection: 'row',\r\n        width: 120,\r\n        justifyContent: 'space-between'\r\n      }}\r\n    >\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          navigation.navigate('ElectiveGenerator');\r\n        }}\r\n        style={{ flexDirection: 'row', alignItems: 'center' }}\r\n      >\r\n        {hasSelectedElectiveGenerator ? (\r\n          <FontAwesome5\r\n            name=\"brain\"\r\n            size={23}\r\n            color={\r\n              darkMode ? theme['color-basic-200'] : theme['color-basic-800']\r\n            }\r\n          />\r\n        ) : (\r\n          <Foundation\r\n            name=\"burst-new\"\r\n            size={30}\r\n            color={theme['color-warning-500']}\r\n          />\r\n        )}\r\n      </TouchableOpacity>\r\n\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          navigation.navigate('SponsorsList');\r\n        }}\r\n        style={{ flexDirection: 'row', alignItems: 'center' }}\r\n      >\r\n        <FontAwesome5\r\n          name=\"shopping-bag\"\r\n          size={23}\r\n          color={darkMode ? theme['color-basic-200'] : theme['color-basic-800']}\r\n        />\r\n      </TouchableOpacity>\r\n\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          navigation.navigate('Settings');\r\n        }}\r\n        style={{ flexDirection: 'row', alignItems: 'center' }}\r\n      >\r\n        <Ionicons\r\n          name=\"settings\"\r\n          size={23}\r\n          color={darkMode ? theme['color-basic-200'] : theme['color-basic-800']}\r\n        />\r\n      </TouchableOpacity>\r\n\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          navigation.navigate('NotificationsPage');\r\n        }}\r\n        style={{ flexDirection: 'row', alignItems: 'center' }}\r\n      >\r\n        <FontAwesome5\r\n          name=\"bell\"\r\n          size={23}\r\n          color={darkMode ? theme['color-basic-200'] : theme['color-basic-800']}\r\n        />\r\n        {numberOfNotifications > 0 ? (\r\n          <Layout\r\n            style={{\r\n              position: 'absolute',\r\n              backgroundColor: darkMode ? 'red' : '#fff',\r\n              borderRadius: 10,\r\n              paddingHorizontal: 3,\r\n              right: -7,\r\n              top: -3\r\n            }}\r\n          >\r\n            <Text>{numberOfNotifications}</Text>\r\n          </Layout>\r\n        ) : null}\r\n      </TouchableOpacity>\r\n    </Layout>\r\n  );\r\n\r\n  return (\r\n    <Stack.Navigator>\r\n      <Stack.Screen\r\n        name=\"ClassesList\"\r\n        component={ClassesList}\r\n        options={{\r\n          header: () => (\r\n            <Layout style={{ paddingBottom: 10 }}>\r\n              <Header\r\n                accessoryLeft={accessoryLeft}\r\n                accessoryRight={accessoryRight}\r\n                title=\"Athena\"\r\n              />\r\n            </Layout>\r\n          ),\r\n          title: 'Class Pages'\r\n        }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"Settings\"\r\n        component={Settings}\r\n        options={{\r\n          headerShown: false\r\n        }}\r\n      />\r\n      <Stack.Group screenOptions={{ headerTitle: 'Sponsors' }}>\r\n        <Stack.Screen\r\n          name=\"SponsorsList\"\r\n          component={SponsorsList}\r\n          options={{ title: 'Sponsors' }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"SponsorPage\"\r\n          component={SponsorPage}\r\n          options={{ title: 'Sponsors' }}\r\n        />\r\n      </Stack.Group>\r\n      <Stack.Screen\r\n        name=\"NotificationsPage\"\r\n        component={NotificationsNavigation}\r\n        options={{ headerShown: false, title: 'Notifications' }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"SelectTerm\"\r\n        component={SelectTerm}\r\n        options={{\r\n          title: 'Select Term',\r\n          headerShown: false,\r\n          animation: 'slide_from_bottom',\r\n          gestureDirection: 'vertical'\r\n        }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"ElectiveGenerator\"\r\n        component={ElectiveGenerator}\r\n        options={{\r\n          title: 'Elective Generator',\r\n          animation: 'slide_from_bottom',\r\n          gestureDirection: 'vertical'\r\n        }}\r\n      />\r\n      {Platform.OS === 'web' && (\r\n        <Stack.Screen\r\n          name=\"SingleClassPage\"\r\n          component={SingleClassPage}\r\n          options={{\r\n            headerShown: false,\r\n            title: 'ClassPages'\r\n          }}\r\n        />\r\n      )}\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n","import {\r\n  Feather,\r\n  FontAwesome5,\r\n  Foundation,\r\n  Ionicons\r\n} from '@expo/vector-icons';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { Layout, Text, useTheme } from '@ui-kitten/components';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Image, Platform, TouchableOpacity } from 'react-native';\r\n\r\nimport {\r\n  selectDarkMode,\r\n  selectIsGuest,\r\n  selectUserKey\r\n} from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport Header from '../../components/Header';\r\nimport ModalContainer from '../../components/ModalContainer';\r\nimport WrapItems from '../../components/WrapItems';\r\nimport { exportToICal } from '../../functions';\r\nimport { useGetUserInfoQuery } from '../api/usersApi';\r\nimport CalendarPage from '../calendar/CalendarPage';\r\nimport CreateCustomEvent from '../calendar/CreateCustomEvent';\r\nimport renderModal from '../calendar/exportModal';\r\nimport ElectiveGenerator from '../classPages/ElectiveGenerator';\r\nimport SelectTerm from '../classPages/SelectTerm';\r\nimport NotificationsNavigation from '../notifications/Notifications';\r\nimport { base_URL } from '../notifications/constants';\r\nimport Settings from '../settings/index';\r\nimport { SponsorPage, SponsorsList } from '../sponsors/SponsorsList';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function CombinedClassPages({ navigation }) {\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const [numberOfNotifications, setNumberOfNotifications] = useState(0);\r\n  const theme = useTheme();\r\n  const hasSelectedElectiveGenerator = useAppSelector(\r\n    (state) => state.appData.classPages.hasSelectedElectiveGen\r\n  );\r\n  const isMobile = useAppSelector((state) => state.appData.secure.isMobile);\r\n  const currentSection = useAppSelector(\r\n    (state) => state.appData.classPages.currentSection\r\n  );\r\n  const classes = useAppSelector((state) => state.appData.classPages.classes);\r\n  const isGuest = useAppSelector(selectIsGuest);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const { data: userData } = useGetUserInfoQuery(userKey);\r\n  const [showGuestModal, setShowGuestModal] = useState(false);\r\n  const [showWebModal, setShowWebModal] = useState(false);\r\n  async function sendNotification(bodyTosend) {\r\n    await fetch(`${base_URL}/users/sendNotification`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      },\r\n      body: JSON.stringify(bodyTosend)\r\n    });\r\n  }\r\n\r\n  const accessoryRight = (\r\n    <WrapItems\r\n      childStyle={\r\n        !isMobile && {\r\n          paddingHorizontal: 5\r\n        }\r\n      }\r\n      style={{\r\n        paddingHorizontal: 0,\r\n        alignItems: 'center',\r\n        flexDirection: 'row'\r\n      }}\r\n    >\r\n      {showGuestModal && (\r\n        <ModalContainer\r\n          title=\"Wait!\"\r\n          children={\r\n            <Text style={{ paddingHorizontal: 30 }}>\r\n              This feature is locked to our Guest Users. Please create a free\r\n              account with us to take advantage this feature.\r\n            </Text>\r\n          }\r\n          backDropVisible={showGuestModal}\r\n          setBackDropVisible={setShowGuestModal}\r\n        />\r\n      )}\r\n      {Platform.OS === 'web' && showWebModal && (\r\n        <ModalContainer\r\n          title=\"Wait!\"\r\n          children={\r\n            <Text style={{ paddingHorizontal: 30 }}>\r\n              Sharing schedules is not supported on the web. Download the app on\r\n              the App Store or Play Store to share schedules.\r\n            </Text>\r\n          }\r\n          backDropVisible={showWebModal}\r\n          setBackDropVisible={setShowWebModal}\r\n        />\r\n      )}\r\n      {Platform.OS !== 'web' && renderModal(setShowModal, showModal)}\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          if (Platform.OS === 'web') {\r\n            const times = Object.entries(\r\n              userData.addedClasses.classes[currentSection]\r\n            ).flatMap(([masterCourseCode, courseCodes]) => {\r\n              return courseCodes.flatMap((courseCode) => {\r\n                return classes[masterCourseCode].times.filter(\r\n                  (time) => time.courseCode === courseCode\r\n                );\r\n              });\r\n            });\r\n            const calendar = exportToICal(times);\r\n            console.log(calendar);\r\n          } else if (isGuest) {\r\n            setShowGuestModal(true);\r\n          } else {\r\n            setShowModal(true);\r\n            setShowWebModal(true);\r\n          }\r\n        }}\r\n        style={{\r\n          alignItems: 'center'\r\n        }}\r\n      >\r\n        <Feather name=\"share\" size={24} color={darkMode ? 'white' : 'black'} />\r\n      </TouchableOpacity>\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          navigation.navigate('ElectiveGenerator');\r\n        }}\r\n        style={{ flexDirection: 'row', alignItems: 'center' }}\r\n      >\r\n        {hasSelectedElectiveGenerator ? (\r\n          <FontAwesome5\r\n            name=\"brain\"\r\n            size={23}\r\n            color={\r\n              darkMode ? theme['color-basic-200'] : theme['color-basic-800']\r\n            }\r\n          />\r\n        ) : (\r\n          <Foundation\r\n            name=\"burst-new\"\r\n            size={30}\r\n            color={theme['color-warning-500']}\r\n          />\r\n        )}\r\n      </TouchableOpacity>\r\n\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          navigation.navigate('SponsorsList');\r\n        }}\r\n        style={{ flexDirection: 'row', alignItems: 'center' }}\r\n      >\r\n        <FontAwesome5\r\n          name=\"shopping-bag\"\r\n          size={23}\r\n          color={darkMode ? theme['color-basic-200'] : theme['color-basic-800']}\r\n        />\r\n      </TouchableOpacity>\r\n\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          navigation.navigate('Settings');\r\n        }}\r\n        style={{ flexDirection: 'row', alignItems: 'center' }}\r\n      >\r\n        <Ionicons\r\n          name=\"settings\"\r\n          size={23}\r\n          color={darkMode ? theme['color-basic-200'] : theme['color-basic-800']}\r\n        />\r\n      </TouchableOpacity>\r\n\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          navigation.navigate('NotificationsPage');\r\n        }}\r\n        style={{ flexDirection: 'row', alignItems: 'center' }}\r\n      >\r\n        <FontAwesome5\r\n          name=\"bell\"\r\n          size={23}\r\n          color={darkMode ? theme['color-basic-200'] : theme['color-basic-800']}\r\n        />\r\n        {numberOfNotifications > 0 ? (\r\n          <Layout\r\n            style={{\r\n              position: 'absolute',\r\n              backgroundColor: darkMode ? 'red' : '#fff',\r\n              borderRadius: 10,\r\n              paddingHorizontal: 3,\r\n              right: -7,\r\n              top: -3\r\n            }}\r\n          >\r\n            <Text>{numberOfNotifications}</Text>\r\n          </Layout>\r\n        ) : null}\r\n      </TouchableOpacity>\r\n    </WrapItems>\r\n  );\r\n\r\n  function refreshNotifications() {\r\n    fetch(`${base_URL}/users/getNotifications`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        userKey\r\n      }\r\n    }).then((res) => {\r\n      res.text().then((notifications) => {\r\n        notifications = JSON.parse(notifications);\r\n        setNumberOfNotifications(notifications.length);\r\n      });\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    refreshNotifications();\r\n    setInterval(() => {\r\n      refreshNotifications();\r\n    }, 60000); // refresh every minute\r\n  }, []);\r\n\r\n  const accessoryLeft = (\r\n    <Image\r\n      style={{\r\n        height: 28,\r\n        width: 28\r\n      }}\r\n      source={require('../../../assets/logos/app-logo-transparent.png')}\r\n    />\r\n  );\r\n  return (\r\n    <Stack.Navigator>\r\n      <Stack.Screen\r\n        name=\"Calendar\"\r\n        component={CalendarPage}\r\n        options={{\r\n          header: () => (\r\n            <Layout style={{ paddingBottom: 10 }}>\r\n              <Header\r\n                accessoryLeft={accessoryLeft}\r\n                accessoryRight={accessoryRight}\r\n                title=\"Athena\"\r\n              />\r\n            </Layout>\r\n          )\r\n        }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"Settings\"\r\n        component={Settings}\r\n        options={{\r\n          headerShown: false\r\n        }}\r\n      />\r\n      <Stack.Group screenOptions={{ headerTitle: 'Sponsors' }}>\r\n        <Stack.Screen\r\n          name=\"SponsorsList\"\r\n          component={SponsorsList}\r\n          options={{ title: 'Sponsors' }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"SponsorPage\"\r\n          component={SponsorPage}\r\n          options={{ title: 'Sponsors' }}\r\n        />\r\n      </Stack.Group>\r\n      <Stack.Screen\r\n        name=\"NotificationsPage\"\r\n        component={NotificationsNavigation}\r\n        options={{ headerShown: false, title: 'Notifications' }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"SelectTerm\"\r\n        component={SelectTerm}\r\n        options={{\r\n          title: 'Select Term',\r\n          headerShown: false,\r\n          animation: 'slide_from_bottom',\r\n          gestureDirection: 'vertical'\r\n        }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"ElectiveGenerator\"\r\n        component={ElectiveGenerator}\r\n        options={{\r\n          title: 'Elective Generator',\r\n          animation: 'slide_from_bottom',\r\n          gestureDirection: 'vertical'\r\n        }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"CreateCustomEvent\"\r\n        component={CreateCustomEvent}\r\n        options={{ headerTitle: 'Add Event' }}\r\n      />\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n","import { Feather, FontAwesome } from '@expo/vector-icons';\r\nimport { Input, Layout, Text } from '@ui-kitten/components';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport React from 'react';\r\nimport {\r\n  Alert,\r\n  Dimensions,\r\n  Image,\r\n  Platform,\r\n  TouchableOpacity\r\n} from 'react-native';\r\nimport Toast from 'react-native-root-toast';\r\n\r\nconst windowWidth = Dimensions.get('window').width;\r\n\r\nexport default function CreateImage({\r\n  discoverPostInputs,\r\n  setDiscoverPostInputs,\r\n  TagInput,\r\n  showTitle = true\r\n}) {\r\n  const [imagePickerStatus, requestImagePickerPermission] =\r\n    ImagePicker.useMediaLibraryPermissions();\r\n  const [cameraStatus, requestCameraPermission] =\r\n    ImagePicker.useCameraPermissions();\r\n\r\n  const onPressCamera = async () => {\r\n    const response = await requestCameraPermission();\r\n    if (response.granted || cameraStatus.granted) {\r\n      const result = await ImagePicker.launchCameraAsync({\r\n        mediaTypes: ImagePicker.MediaTypeOptions.Images\r\n      });\r\n      if (!result.canceled) {\r\n        setDiscoverPostInputs({\r\n          ...discoverPostInputs,\r\n          contentImage: result.assets[0]\r\n        });\r\n      }\r\n    } else {\r\n      Alert.alert(\r\n        \"Permission to access camera is required. Please enable it in your phone's settings.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const pickImage = async () => {\r\n    const response = await requestImagePickerPermission();\r\n    if (response.granted || imagePickerStatus.granted) {\r\n      const result = await ImagePicker.launchImageLibraryAsync({\r\n        allowsEditing: false\r\n      });\r\n      if (!result.canceled) {\r\n        setDiscoverPostInputs({\r\n          ...discoverPostInputs,\r\n          contentImage: result.assets[0]\r\n        });\r\n\r\n        if (Platform.OS === 'android') {\r\n          Toast.show(\"Don't worry if the image seems blurry on the sides.\", {\r\n            duration: Toast.durations.LONG,\r\n            opacity: 1,\r\n            position: -100,\r\n            backgroundColor: 'grey',\r\n            shadow: false\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      Alert.alert(\r\n        \"Permission to access camera roll is required. Please enable it in your phone's settings.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const Title = (\r\n    <Layout\r\n      style={{\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-evenly',\r\n        alignItems: 'center',\r\n        marginTop: 15\r\n      }}\r\n    >\r\n      <Input\r\n        label=\"Title\"\r\n        placeholder=\"Post Title\"\r\n        value={discoverPostInputs?.title ? discoverPostInputs.title : ''}\r\n        style={{ flex: 5 }}\r\n        onChangeText={(newText) => {\r\n          setDiscoverPostInputs({\r\n            ...discoverPostInputs,\r\n            title: newText\r\n          });\r\n        }}\r\n      />\r\n    </Layout>\r\n  );\r\n\r\n  let imagePicker = <></>;\r\n\r\n  if (discoverPostInputs?.contentImage) {\r\n    // Image Preview\r\n    imagePicker = (\r\n      <Layout\r\n        level=\"2\"\r\n        style={{\r\n          height: 300,\r\n          marginVertical: 10,\r\n          borderRadius: 10,\r\n          shadowColor: '#000',\r\n          shadowOffset: {\r\n            width: 0,\r\n            height: 5\r\n          },\r\n          shadowOpacity: 0.34,\r\n          shadowRadius: 6.27,\r\n\r\n          elevation: 10\r\n        }}\r\n      >\r\n        <TouchableOpacity\r\n          onPress={() => {\r\n            setDiscoverPostInputs(null);\r\n          }}\r\n          style={{\r\n            position: 'absolute',\r\n            right: 10,\r\n            top: 5,\r\n            zIndex: 1\r\n          }}\r\n        >\r\n          <Feather name=\"x-circle\" size={30} color=\"grey\" />\r\n        </TouchableOpacity>\r\n\r\n        <Image\r\n          source={{\r\n            uri: discoverPostInputs.contentImage.uri\r\n          }}\r\n          style={{\r\n            borderRadius: 5,\r\n            width: '100%',\r\n            height: '100%',\r\n            resizeMode: 'contain'\r\n          }}\r\n        />\r\n      </Layout>\r\n    );\r\n  } else {\r\n    // Image Picker\r\n    imagePicker = (\r\n      <Layout style={{ flexDirection: 'row' }}>\r\n        <TouchableOpacity\r\n          onPress={() => {\r\n            pickImage();\r\n          }}\r\n          style={{\r\n            height: 80,\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            flex: 1,\r\n            paddingVertical: 8,\r\n            flexDirection: 'row'\r\n          }}\r\n        >\r\n          <Layout\r\n            level=\"2\"\r\n            style={{\r\n              flex: 1,\r\n              flexDirection: 'row',\r\n              height: '100%',\r\n              marginHorizontal: 10,\r\n              paddingVertical: 15,\r\n              paddingHorizontal: 5,\r\n              borderRadius: 8,\r\n              alignItems: 'center',\r\n              justifyContent: 'space-around'\r\n            }}\r\n          >\r\n            <FontAwesome name=\"image\" size={25} color=\"grey\" />\r\n            <Text>Select Image</Text>\r\n          </Layout>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity\r\n          onPress={onPressCamera}\r\n          style={{\r\n            height: 80,\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            flex: 1,\r\n            paddingVertical: 8,\r\n            flexDirection: 'row'\r\n          }}\r\n        >\r\n          <Layout\r\n            level=\"2\"\r\n            style={{\r\n              flex: 1,\r\n              flexDirection: 'row',\r\n              height: '100%',\r\n              marginHorizontal: 10,\r\n              paddingVertical: 15,\r\n              paddingHorizontal: 5,\r\n              borderRadius: 8,\r\n              alignItems: 'center',\r\n              justifyContent: 'space-around'\r\n            }}\r\n          >\r\n            <FontAwesome name=\"camera\" size={25} color=\"grey\" />\r\n            <Text>Use Camera</Text>\r\n          </Layout>\r\n        </TouchableOpacity>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {showTitle && Title}\r\n      {TagInput()}\r\n      {imagePicker}\r\n    </>\r\n  );\r\n}\r\n","import { AntDesign } from '@expo/vector-icons';\r\nimport DateTimePicker from '@react-native-community/datetimepicker';\r\nimport {\r\n  Button,\r\n  Datepicker,\r\n  Divider,\r\n  Input,\r\n  Layout,\r\n  NativeDateService,\r\n  Text\r\n} from '@ui-kitten/components';\r\nimport { useMemo, useState } from 'react';\r\nimport { Platform } from 'react-native';\r\n\r\nimport WrapItems from '../../../components/WrapItems';\r\nimport CreateImage from './CreateImagePost';\r\n\r\nexport default function CreateEvent({\r\n  discoverPostInputs,\r\n  setDiscoverPostInputs,\r\n  TagInput,\r\n  startTime,\r\n  setStartTime,\r\n  endTime,\r\n  setEndTime,\r\n  date,\r\n  setDate\r\n}) {\r\n  // Needed because Android date picker uses a modal\r\n  const [showTimePickerAndroid, setShowTimePickerAndroid] = useState(false);\r\n\r\n  const formatDateService = new NativeDateService('en', {\r\n    format: 'MM/DD/YYYY'\r\n  });\r\n  const timePickerOptions = useMemo(\r\n    () => ({\r\n      'Start Time': { time: startTime, setTime: setStartTime },\r\n      'End Time': { time: endTime, setTime: setEndTime }\r\n    }),\r\n    [startTime, setStartTime, endTime, setEndTime]\r\n  );\r\n\r\n  const formatAMPM = (date: Date) => {\r\n    let hours = date.getHours();\r\n    let minutes = date.getMinutes() as any;\r\n    const ampm = hours >= 12 ? 'pm' : 'am';\r\n    hours %= 12;\r\n    hours = hours || 12; // the hour '0' should be '12'\r\n    minutes = minutes < 10 ? `0${minutes}` : minutes;\r\n    const strTime = `${hours}:${minutes} ${ampm}`;\r\n    return strTime;\r\n  };\r\n\r\n  const Title = (\r\n    <Layout\r\n      style={{\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-evenly',\r\n        alignItems: 'center',\r\n        marginTop: 15\r\n      }}\r\n    >\r\n      <Input\r\n        label=\"Title\"\r\n        placeholder=\"Post Title\"\r\n        value={discoverPostInputs?.title ? discoverPostInputs.title : ''}\r\n        style={{ flex: 5 }}\r\n        onChangeText={(newText) => {\r\n          setDiscoverPostInputs({\r\n            ...discoverPostInputs,\r\n            title: newText\r\n          });\r\n        }}\r\n      />\r\n    </Layout>\r\n  );\r\n\r\n  function TimePicker() {\r\n    if (Platform.OS === 'android') {\r\n      return (\r\n        <Layout\r\n          style={{\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-around'\r\n          }}\r\n        >\r\n          {Object.entries(timePickerOptions).map(\r\n            ([label, { time, setTime }], i) => (\r\n              <Layout key={i} style={{ alignItems: 'center' }}>\r\n                <Text category=\"label\" style={{ marginBottom: 5 }}>\r\n                  {label}\r\n                </Text>\r\n                <Button\r\n                  onPress={() => {\r\n                    setShowTimePickerAndroid(true);\r\n                  }}\r\n                >\r\n                  {formatAMPM(time)}\r\n                </Button>\r\n                {showTimePickerAndroid && (\r\n                  <DateTimePicker\r\n                    mode=\"time\"\r\n                    onChange={(change, date) => {\r\n                      setTime(date);\r\n                      setShowTimePickerAndroid(false);\r\n                    }}\r\n                    value={time}\r\n                  />\r\n                )}\r\n              </Layout>\r\n            )\r\n          )}\r\n        </Layout>\r\n      );\r\n    }\r\n    if (Platform.OS === 'ios') {\r\n      return (\r\n        <Layout\r\n          style={{\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-around'\r\n          }}\r\n        >\r\n          {Object.entries(timePickerOptions).map(\r\n            ([label, { time, setTime }], i) => (\r\n              <Layout key={i} style={{ alignItems: 'center' }}>\r\n                <Text category=\"label\" style={{ marginBottom: 5 }}>\r\n                  {label}\r\n                </Text>\r\n\r\n                <DateTimePicker\r\n                  mode=\"time\"\r\n                  onChange={(change, date) => {\r\n                    setTime(date);\r\n                  }}\r\n                  value={time}\r\n                />\r\n              </Layout>\r\n            )\r\n          )}\r\n        </Layout>\r\n      );\r\n    }\r\n  }\r\n\r\n  if (Platform.OS === 'web') {\r\n    return (\r\n      <Text>\r\n        Creating Event Posts is not supported on the web. Download the app on\r\n        the App Store or Play Store to make an Event Post.\r\n      </Text>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      <WrapItems childStyle={{ marginVertical: 10 }}>\r\n        {Title}\r\n        <Input\r\n          label=\"Location\"\r\n          placeholder=\"Ex: North Dorm, HMC\"\r\n          value={discoverPostInputs?.location}\r\n          onChangeText={(newText) => {\r\n            setDiscoverPostInputs({\r\n              ...discoverPostInputs,\r\n              location: newText\r\n            });\r\n          }}\r\n        />\r\n        <Datepicker\r\n          label=\"Date\"\r\n          dateService={formatDateService}\r\n          onSelect={(nextDate) => setDate(nextDate)}\r\n          date={date}\r\n          placement=\"top\"\r\n        />\r\n        <TimePicker />\r\n        <Layout style={{ padding: 6 }}>\r\n          <Divider />\r\n          <AntDesign name=\"caretdown\" style={{ position: 'absolute' }} />\r\n          <AntDesign\r\n            name=\"caretdown\"\r\n            style={{ position: 'absolute', right: 0 }}\r\n          />\r\n          <Layout\r\n            style={{ position: 'absolute', right: '44%', marginBottom: 6 }}\r\n          >\r\n            <Text appearance=\"hint\">Optional</Text>\r\n          </Layout>\r\n        </Layout>\r\n\r\n        <Layout>\r\n          <Input\r\n            label=\"Link\"\r\n            placeholder=\"www.example.com\"\r\n            style={{ marginBottom: 10 }}\r\n            value={\r\n              discoverPostInputs?.contentUrl\r\n                ? discoverPostInputs.contentUrl\r\n                : ''\r\n            }\r\n            onChangeText={(newText) => {\r\n              setDiscoverPostInputs({\r\n                ...discoverPostInputs,\r\n                contentUrl: newText\r\n              });\r\n            }}\r\n          />\r\n          <Input\r\n            label=\"Host\"\r\n            placeholder=\"Ex: John Doe\"\r\n            style={{ marginBottom: 5 }}\r\n            value={discoverPostInputs?.host}\r\n            onChangeText={(newText) => {\r\n              setDiscoverPostInputs({\r\n                ...discoverPostInputs,\r\n                host: newText\r\n              });\r\n            }}\r\n          />\r\n\r\n          <Input\r\n            label=\"Description\"\r\n            multiline\r\n            placeholder=\"Describe the event...\"\r\n            style={{ marginVertical: 10 }}\r\n            value={discoverPostInputs?.description}\r\n            onChangeText={(newText) => {\r\n              setDiscoverPostInputs({\r\n                ...discoverPostInputs,\r\n                description: newText\r\n              });\r\n            }}\r\n          />\r\n\r\n          <CreateImage\r\n            showTitle={false}\r\n            {...{ discoverPostInputs, setDiscoverPostInputs, TagInput }}\r\n          />\r\n        </Layout>\r\n      </WrapItems>\r\n    </Layout>\r\n  );\r\n}\r\n","import { createEntityAdapter } from '@reduxjs/toolkit';\r\n\r\nimport { apiSlice } from './apiSlice';\r\nimport { DiscoverPost } from '../../app/types';\r\nimport { DISCOVER_LIST_PAGE_SIZE } from '../../constants/discover';\r\n\r\ntype getPostsArgs = {\r\n  userKey: string;\r\n  userName: string;\r\n  pageNumber?: number;\r\n  tag?: string;\r\n  searchTerm?: string;\r\n  sponsor?: boolean;\r\n};\r\n\r\nconst postsAdapter = createEntityAdapter<DiscoverPost>({\r\n  selectId: (post: DiscoverPost) => post._id\r\n});\r\n\r\n// Helper Functions\r\n\r\nconst tranformComments = (comments, userName) => comments.map((comment) => ({\r\n  ...comment,\r\n  numLikes: comment.likes.length,\r\n  hasLiked: comment.likes.includes(userName)\r\n}));\r\n\r\nexport const discoverApiSlice = apiSlice.injectEndpoints({\r\n  overrideExisting: true,\r\n  endpoints: (builder) => ({\r\n    getDiscoverPosts: builder.query<any, getPostsArgs>({\r\n      keepUnusedDataFor: 6000,\r\n      query: ({\r\n        userKey, pageNumber, tag, searchTerm, sponsor = true\r\n      }) => ({\r\n        url: `/discover/getPosts`,\r\n        headers: {\r\n          userKey\r\n        },\r\n        params: {\r\n          tag,\r\n          searchTerm,\r\n          pageNumber,\r\n          sponsor,\r\n          pageLength: DISCOVER_LIST_PAGE_SIZE\r\n        }\r\n      }),\r\n      transformResponse: (response: DiscoverPost[], _, { userName }) => {\r\n        // Return Post To State Using Adapters\r\n        return postsAdapter.addMany(\r\n          postsAdapter.getInitialState({\r\n            hasMorePages: response.length > 0\r\n          }),\r\n          // TODO: Refactoring likes and comments. Should maybe be done in backend\r\n          response.map((post) => ({\r\n            ...post,\r\n            numLikes: post.likes.length,\r\n            hasLiked: post.likes.includes(userName),\r\n            comments: tranformComments(post.comments, userName)\r\n          }))\r\n        );\r\n      },\r\n      async onQueryStarted(\r\n        {\r\n          userKey, pageNumber, userName, searchTerm, tag, sponsor\r\n        },\r\n        { queryFulfilled, dispatch }\r\n      ) {\r\n        if (!pageNumber) {\r\n          return;\r\n        }\r\n        const { data } = await queryFulfilled;\r\n\r\n        if (data?.ids?.length > 0) {\r\n          // Add Posts On Current Request To Page 1\r\n          dispatch(\r\n            discoverApiSlice.util.updateQueryData(\r\n              'getDiscoverPosts',\r\n              {\r\n                userKey,\r\n                pageNumber: 1,\r\n                userName,\r\n                searchTerm,\r\n                tag,\r\n                sponsor\r\n              },\r\n              (draft) => {\r\n                postsAdapter.addMany(draft, postsSelectors.selectAll(data));\r\n              }\r\n            )\r\n          );\r\n\r\n          if (pageNumber > 1) {\r\n            // Remove Cached Data From State Since We Already Added It To Page 1\r\n            dispatch(\r\n              discoverApiSlice.util.updateQueryData(\r\n                'getDiscoverPosts',\r\n                {\r\n                  userKey,\r\n                  pageNumber,\r\n                  userName,\r\n                  searchTerm,\r\n                  tag,\r\n                  sponsor\r\n                },\r\n                (draft) => {\r\n                  draft = postsAdapter.getInitialState();\r\n                }\r\n              )\r\n            );\r\n          }\r\n        } else {\r\n          // No More Pages To Load\r\n          dispatch(\r\n            discoverApiSlice.util.updateQueryData(\r\n              'getDiscoverPosts',\r\n              {\r\n                userKey,\r\n                pageNumber: 1,\r\n                userName,\r\n                searchTerm,\r\n                tag,\r\n                sponsor\r\n              },\r\n              (draft) => {\r\n                draft.hasMorePages = false;\r\n              }\r\n            )\r\n          );\r\n        }\r\n      }\r\n    }),\r\n\r\n    createDiscoverPost: builder.mutation({\r\n      query: ({\r\n        userKey,\r\n        title,\r\n        type,\r\n        content,\r\n        tags,\r\n        status,\r\n        emoji,\r\n        postBody,\r\n        pinned\r\n      }) => {\r\n        if (type === 'contentImage' || type === 'contentEvent') {\r\n          return {\r\n            url: '/discover/addPost',\r\n            method: 'POST',\r\n            headers: { userKey },\r\n            body: postBody\r\n          };\r\n        }\r\n        return {\r\n          url: '/discover/addPost',\r\n          method: 'POST',\r\n          headers: { userKey },\r\n          body: {\r\n            title,\r\n            type,\r\n            [type]: content,\r\n            tags,\r\n            status,\r\n            emoji,\r\n            pinned\r\n          }\r\n        };\r\n      },\r\n      async onQueryStarted(\r\n        { userKey, userName },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        try {\r\n          const { data: newPost } = await queryFulfilled;\r\n\r\n          // Add New Post To State\r\n          dispatch(\r\n            discoverApiSlice.util.updateQueryData(\r\n              'getDiscoverPosts',\r\n              { userKey, userName, pageNumber: 1 },\r\n              (draft) => {\r\n                postsAdapter.addOne(draft, {\r\n                  ...newPost,\r\n                  numLikes: 0,\r\n                  hasLiked: false\r\n                });\r\n              }\r\n            )\r\n          );\r\n        } catch (e) {\r\n          console.warn('Error Adding Post To State', e);\r\n        }\r\n      }\r\n    }),\r\n    deleteDiscoverPost: builder.mutation({\r\n      query: ({\r\n        userKey, _id, userName, title\r\n      }) => ({\r\n        url: '/discover/deletePost',\r\n        method: 'DELETE',\r\n        headers: { userKey },\r\n        body: {\r\n          _id,\r\n          userName,\r\n          title\r\n        },\r\n        responseHandler: (response) => response.text()\r\n      }),\r\n      async onQueryStarted(\r\n        {\r\n          userKey, _id, userName, searchTerm, tag\r\n        },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        if (searchTerm || tag) {\r\n          var searchPatchResult = dispatch(\r\n            discoverApiSlice.util.updateQueryData(\r\n              'getDiscoverPosts',\r\n              {\r\n                userKey,\r\n                userName,\r\n                pageNumber: 1,\r\n                searchTerm,\r\n                tag\r\n              },\r\n              (draft) => {\r\n                postsAdapter.removeOne(draft, _id);\r\n              }\r\n            )\r\n          );\r\n        }\r\n\r\n        const patchResult = dispatch(\r\n          discoverApiSlice.util.updateQueryData(\r\n            'getDiscoverPosts',\r\n            { userKey, userName, pageNumber: 1 },\r\n            (draft) => {\r\n              postsAdapter.removeOne(draft, _id);\r\n            }\r\n          )\r\n        );\r\n\r\n        try {\r\n          await queryFulfilled;\r\n        } catch {\r\n          patchResult.undo();\r\n          if (searchPatchResult) {\r\n            searchPatchResult.undo();\r\n          }\r\n        }\r\n      }\r\n    }),\r\n\r\n    getPostById: builder.query({\r\n      query: ({ userKey, postId }) => ({\r\n        url: `/discover/getPostById`,\r\n        headers: {\r\n          userKey\r\n        },\r\n        params: {\r\n          id: postId\r\n        }\r\n      }),\r\n      async onQueryStarted(\r\n        {\r\n          userKey, postId, userName, searchTerm, tag\r\n        },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        // Replace Post In State With Updated Post\r\n\r\n        try {\r\n          const { data: updatedPost } = await queryFulfilled;\r\n          const updateFunction = (draft) => {\r\n            postsAdapter.updateOne(draft, {\r\n              id: postId,\r\n              changes: {\r\n                ...updatedPost,\r\n                numLikes: updatedPost.likes.length,\r\n                hasLiked: updatedPost.likes.includes(userName),\r\n                comments: tranformComments(updatedPost.comments, userName)\r\n              }\r\n            });\r\n          };\r\n          dispatch(\r\n            discoverApiSlice.util.updateQueryData(\r\n              'getDiscoverPosts',\r\n              {\r\n                userKey,\r\n                userName,\r\n                pageNumber: 1\r\n              },\r\n              updateFunction\r\n            )\r\n          );\r\n          if (searchTerm || tag) {\r\n            dispatch(\r\n              discoverApiSlice.util.updateQueryData(\r\n                'getDiscoverPosts',\r\n                {\r\n                  userKey,\r\n                  userName,\r\n                  pageNumber: 1,\r\n                  searchTerm,\r\n                  tag\r\n                },\r\n                updateFunction\r\n              )\r\n            );\r\n          }\r\n        } catch (e) {\r\n          console.warn('Error Updating Post In State', e);\r\n        }\r\n      }\r\n    }),\r\n\r\n    likePost: builder.mutation({\r\n      query: ({\r\n        userKey, _id, title, postAuthor\r\n      }) => ({\r\n        url: '/discover/like',\r\n        method: 'PATCH',\r\n        headers: { userKey },\r\n        body: {\r\n          _id,\r\n          title,\r\n          userName: postAuthor\r\n        },\r\n        responseHandler: (response) => response.text()\r\n      }),\r\n      async onQueryStarted(\r\n        {\r\n          userKey, _id, userName, searchTerm, tag\r\n        },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        const updateFunction = (draft) => {\r\n          const post = postsSelectors.selectById(draft, _id);\r\n          // Use updateOne to update the post with the given ID\r\n          postsAdapter.updateOne(draft, {\r\n            id: _id,\r\n            changes: {\r\n              numLikes: post.hasLiked ? post.numLikes - 1 : post.numLikes + 1,\r\n              hasLiked: !post.hasLiked\r\n            }\r\n          });\r\n        };\r\n\r\n        if (searchTerm || tag) {\r\n          var searchPatchResult = dispatch(\r\n            discoverApiSlice.util.updateQueryData(\r\n              'getDiscoverPosts',\r\n              {\r\n                userKey,\r\n                pageNumber: 1,\r\n                userName,\r\n                searchTerm,\r\n                tag\r\n              },\r\n              updateFunction\r\n            )\r\n          );\r\n        }\r\n        const patchResult = dispatch(\r\n          discoverApiSlice.util.updateQueryData(\r\n            'getDiscoverPosts',\r\n            { userKey, pageNumber: 1, userName },\r\n            updateFunction\r\n          )\r\n        );\r\n\r\n        try {\r\n          await queryFulfilled;\r\n        } catch {\r\n          if (searchPatchResult) {\r\n            searchPatchResult.undo();\r\n          }\r\n          patchResult.undo();\r\n        }\r\n      }\r\n    }),\r\n\r\n    addComment: builder.mutation({\r\n      query: ({ userKey, _id, text }) => ({\r\n        url: '/discover/addComment',\r\n        method: 'POST',\r\n        headers: { userKey },\r\n        body: {\r\n          _id,\r\n          text\r\n        },\r\n        responseHandler: (response) => response.text()\r\n      }),\r\n\r\n      async onQueryStarted(\r\n        {\r\n          userKey, _id, userName, searchTerm, tag\r\n        },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        try {\r\n          await queryFulfilled;\r\n\r\n          // Call getPostById to update the post in state\r\n          dispatch(\r\n            discoverApiSlice.endpoints.getPostById.initiate({\r\n              userKey,\r\n              postId: _id,\r\n              userName,\r\n              searchTerm,\r\n              tag\r\n            })\r\n          );\r\n        } catch (e) {\r\n          console.warn('Error Adding Comment To State', e);\r\n        }\r\n      }\r\n    }),\r\n\r\n    likeComment: builder.mutation({\r\n      query: ({ userKey, postId, commentId }) => ({\r\n        url: '/discover/likeComment',\r\n        method: 'PATCH',\r\n        headers: { userKey },\r\n        body: {\r\n          postId,\r\n          commentId\r\n        },\r\n        responseHandler: (response) => response.text()\r\n      }),\r\n      async onQueryStarted(\r\n        {\r\n          userKey, postId, commentId, userName, searchTerm, tag\r\n        },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        const updateFunction = (draft) => {\r\n          const post = postsSelectors.selectById(draft, postId);\r\n          // Use updateOne to update the post with the given ID\r\n          postsAdapter.updateOne(draft, {\r\n            id: postId,\r\n            changes: {\r\n              comments: post.comments.map((comment) => {\r\n                if (comment._id === commentId) {\r\n                  return {\r\n                    ...comment,\r\n                    numLikes: comment.hasLiked\r\n                      ? comment.numLikes - 1\r\n                      : comment.numLikes + 1,\r\n                    hasLiked: !comment.hasLiked\r\n                  };\r\n                }\r\n                return comment;\r\n              })\r\n            }\r\n          });\r\n        };\r\n        if (searchTerm || tag) {\r\n          var searchPatchResult = dispatch(\r\n            discoverApiSlice.util.updateQueryData(\r\n              'getDiscoverPosts',\r\n              {\r\n                userKey,\r\n                pageNumber: 1,\r\n                userName,\r\n                searchTerm,\r\n                tag\r\n              },\r\n              updateFunction\r\n            )\r\n          );\r\n        }\r\n\r\n        const patchResult = dispatch(\r\n          discoverApiSlice.util.updateQueryData(\r\n            'getDiscoverPosts',\r\n            { userKey, userName, pageNumber: 1 },\r\n            updateFunction\r\n          )\r\n        );\r\n\r\n        try {\r\n          await queryFulfilled;\r\n        } catch {\r\n          patchResult.undo();\r\n          if (searchPatchResult) {\r\n            searchPatchResult.undo();\r\n          }\r\n        }\r\n      }\r\n    }),\r\n\r\n    deleteComment: builder.mutation({\r\n      query: ({ userKey, postId, commentId }) => ({\r\n        url: '/discover/deleteComment',\r\n        method: 'DELETE',\r\n        headers: { userKey },\r\n        body: {\r\n          postId,\r\n          commentId\r\n        },\r\n        responseHandler: (response) => response.text()\r\n      }),\r\n      async onQueryStarted(\r\n        {\r\n          userKey, postId, commentId, userName, searchTerm, tag\r\n        },\r\n        { dispatch, queryFulfilled }\r\n      ) {\r\n        const updateFunction = (draft) => {\r\n          const post = postsSelectors.selectById(draft, postId);\r\n          // Use updateOne to update the post with the given ID\r\n          postsAdapter.updateOne(draft, {\r\n            id: postId,\r\n            changes: {\r\n              comments: post.comments.filter(\r\n                (comment) => comment._id !== commentId\r\n              )\r\n            }\r\n          });\r\n        };\r\n        const patchResult = dispatch(\r\n          discoverApiSlice.util.updateQueryData(\r\n            'getDiscoverPosts',\r\n            {\r\n              userKey,\r\n              userName,\r\n              pageNumber: 1\r\n            },\r\n            updateFunction\r\n          )\r\n        );\r\n\r\n        if (searchTerm || tag) {\r\n          var searchPatchResult = dispatch(\r\n            discoverApiSlice.util.updateQueryData(\r\n              'getDiscoverPosts',\r\n              {\r\n                userKey,\r\n                userName,\r\n                pageNumber: 1\r\n              },\r\n              updateFunction\r\n            )\r\n          );\r\n        }\r\n\r\n        try {\r\n          await queryFulfilled;\r\n        } catch {\r\n          patchResult.undo();\r\n          if (searchPatchResult) {\r\n            searchPatchResult.undo();\r\n          }\r\n        }\r\n      }\r\n    })\r\n  })\r\n});\r\n\r\nconst postsSelectors = postsAdapter.getSelectors();\r\n\r\nexport { postsAdapter, postsSelectors };\r\n\r\nexport const {\r\n  useLazyGetDiscoverPostsQuery,\r\n  useCreateDiscoverPostMutation,\r\n  useDeleteDiscoverPostMutation,\r\n  useLikePostMutation,\r\n  useAddCommentMutation,\r\n  useLazyGetPostByIdQuery,\r\n  useLikeCommentMutation,\r\n  useDeleteCommentMutation\r\n} = discoverApiSlice;\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport {\r\n  Text,\r\n  Input,\r\n  Select,\r\n  SelectItem,\r\n  IndexPath,\r\n  Layout,\r\n  Button,\r\n  Spinner,\r\n  useTheme,\r\n  CheckBox,\r\n  Divider\r\n} from '@ui-kitten/components';\r\nimport React, { useState } from 'react';\r\nimport {\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  TouchableWithoutFeedback,\r\n  Keyboard,\r\n  ScrollView,\r\n  KeyboardAvoidingView,\r\n  Platform\r\n} from 'react-native';\r\nimport Toast from 'react-native-root-toast';\r\n\r\nimport CreateEventPost from './CreateEventPost';\r\nimport CreateImage from './CreateImagePost';\r\nimport { selectDarkMode } from '../../../app/appDataSlice';\r\nimport { useAppSelector } from '../../../app/hooks';\r\nimport {\r\n  tagIndices,\r\n  adminTagIndices,\r\n  postOptions\r\n} from '../../../constants/discover';\r\nimport { showToast } from '../../../functions';\r\nimport { useCreateDiscoverPostMutation } from '../../api/discoverApi';\r\nimport { usersApiSlice } from '../../api/usersApi';\r\n\r\nexport function OptionalText() {\r\n  return (\r\n    <Text\r\n      style={{\r\n        alignSelf: 'flex-end',\r\n        marginRight: 5,\r\n        color: 'grey',\r\n        fontSize: 11\r\n      }}\r\n    >\r\n      Optional\r\n    </Text>\r\n  );\r\n}\r\n\r\nexport default function CreatePost() {\r\n  const theme = useTheme();\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const userKey = useAppSelector((state) => state.appData.secure.userKey);\r\n  const {\r\n    data: { userName, permissionLevel }\r\n  } = usersApiSlice.endpoints.getUserInfo.useQueryState(userKey);\r\n  const [discoverPostInputs, setDiscoverPostInputs] = useState(null);\r\n  const [startTime, setStartTime] = useState(new Date());\r\n  const [endTime, setEndTime] = useState(new Date());\r\n  const [date, setDate] = useState(new Date());\r\n  const [selectedTagIndex, setSelectedTagIndex] = useState<IndexPath[]>([]);\r\n  const [selectedPostTypeIndex, setSelectedPostTypeIndex] = useState(\r\n    new IndexPath(0)\r\n  );\r\n  const [error, setError] = useState(null);\r\n  const [isEmojiShown, setIsEmojiShown] = useState(false);\r\n\r\n  const [createDiscoverPost, { isLoading }] = useCreateDiscoverPostMutation();\r\n\r\n  const tagArray = permissionLevel === 'admin' ? adminTagIndices : tagIndices;\r\n\r\n  const submitEvent = async (tags: string[]) => {\r\n    // Validate date and time\r\n    if (date < new Date()) {\r\n      setError('Date must be in the future');\r\n      return;\r\n    }\r\n\r\n    if (startTime > endTime) {\r\n      setError('Start time must be before end time');\r\n      return;\r\n    }\r\n\r\n    const formdata = new FormData();\r\n    formdata.append('type', 'contentEvent');\r\n    formdata.append('title', discoverPostInputs.title);\r\n    formdata.append('location', discoverPostInputs.location);\r\n    formdata.append('date', date.toISOString());\r\n    formdata.append('startTime', startTime.toISOString());\r\n    formdata.append('endTime', endTime.toISOString());\r\n\r\n    // Optional fields\r\n    if (discoverPostInputs.contentUrl)\r\n      formdata.append('contentUrl', discoverPostInputs.contentUrl);\r\n    if (discoverPostInputs.host)\r\n      formdata.append('host', discoverPostInputs.host);\r\n    if (discoverPostInputs.description)\r\n      formdata.append('contentText', discoverPostInputs.description);\r\n    if (discoverPostInputs.contentImage) {\r\n      formdata.append('picture', {\r\n        uri: discoverPostInputs.contentImage.uri,\r\n        name: 'discoverImage',\r\n        type: 'image/jpg'\r\n      } as any);\r\n    }\r\n\r\n    tags.forEach((tag) => {\r\n      formdata.append('tags', tag);\r\n    });\r\n\r\n    try {\r\n      await createDiscoverPost({\r\n        type: 'contentEvent',\r\n        userKey,\r\n        userName,\r\n        postBody: formdata\r\n      }).unwrap();\r\n\r\n      showToast('Posted Successfully!', theme['color-success-500']);\r\n\r\n      setDiscoverPostInputs(null);\r\n      setSelectedTagIndex([]);\r\n      setError(null);\r\n    } catch (e) {\r\n      console.warn(\"Couldn't post image\", e);\r\n      showToast('Post failed to send.', theme['color-warning-500']);\r\n    }\r\n  };\r\n\r\n  const submitImage = async (tags: string[]) => {\r\n    const formdata = new FormData();\r\n    formdata.append('title', discoverPostInputs.title);\r\n    formdata.append('type', 'contentImage');\r\n    formdata.append('picture', {\r\n      uri: discoverPostInputs.contentImage.uri,\r\n      name: 'discoverImage',\r\n      type: 'image/jpg'\r\n    } as any);\r\n    tags.forEach((tag) => {\r\n      formdata.append('tags', tag);\r\n    });\r\n\r\n    try {\r\n      await createDiscoverPost({\r\n        type: 'contentImage',\r\n        userKey,\r\n        userName,\r\n        postBody: formdata\r\n      }).unwrap();\r\n\r\n      showToast('Posted Successfully!', theme['color-success-500']);\r\n\r\n      setDiscoverPostInputs(null);\r\n      setSelectedTagIndex([]);\r\n      setError(null);\r\n    } catch (e) {\r\n      console.warn(\"Couldn't post image\", e);\r\n      showToast('Post failed to send.', theme['color-warning-500']);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async () => {\r\n    //\r\n    // Validate Input\r\n    //\r\n    if (\r\n      (selectedPostTypeIndex.row === 1 &&\r\n        (!discoverPostInputs ||\r\n          !discoverPostInputs.title ||\r\n          !discoverPostInputs.contentText)) ||\r\n      (selectedPostTypeIndex.row === 2 &&\r\n        (!discoverPostInputs ||\r\n          !discoverPostInputs.title ||\r\n          !discoverPostInputs.contentUrl)) ||\r\n      (selectedPostTypeIndex.row === 0 &&\r\n        (!discoverPostInputs ||\r\n          !discoverPostInputs.title ||\r\n          !discoverPostInputs.contentImage)) ||\r\n      (selectedPostTypeIndex.row === 3 &&\r\n        (!discoverPostInputs ||\r\n          !discoverPostInputs.title ||\r\n          !discoverPostInputs.location ||\r\n          !date ||\r\n          !startTime ||\r\n          !endTime))\r\n    ) {\r\n      console.warn('onsubmit error', discoverPostInputs);\r\n      setError('Please Fill in All Fields');\r\n      return;\r\n    }\r\n\r\n    //\r\n    // Submit Post\r\n    //\r\n\r\n    const tags = selectedTagIndex.map((index) => tagArray[index.row]);\r\n\r\n    // Special Case for Image Post\r\n    if (selectedPostTypeIndex.row === 0) {\r\n      submitImage(tags);\r\n      return;\r\n    }\r\n\r\n    // Special Case for Event Post\r\n    if (selectedPostTypeIndex.row === 3) {\r\n      submitEvent(tags);\r\n      return;\r\n    }\r\n\r\n    let type = '';\r\n    if (selectedPostTypeIndex.row === 1) {\r\n      type = 'contentText';\r\n    } else if (selectedPostTypeIndex.row === 2) {\r\n      type = 'contentUrl';\r\n    }\r\n    try {\r\n      await createDiscoverPost({\r\n        type,\r\n        userKey,\r\n        userName,\r\n        tags,\r\n        content: discoverPostInputs[type],\r\n        title: discoverPostInputs.title,\r\n        emoji: discoverPostInputs.emoji\r\n      }).unwrap();\r\n\r\n      const toast = Toast.show('Posted Successfully!', {\r\n        duration: Toast.durations.LONG,\r\n        opacity: 1,\r\n        position: -100,\r\n        backgroundColor: theme['color-success-500'],\r\n        shadow: false\r\n      });\r\n\r\n      setTimeout(() => {\r\n        Toast.hide(toast);\r\n      }, 7000);\r\n\r\n      setDiscoverPostInputs(null);\r\n      setSelectedTagIndex([]);\r\n      setError(null);\r\n    } catch (e) {\r\n      const toast = Toast.show('Post failed to send.', {\r\n        duration: Toast.durations.LONG,\r\n        opacity: 1,\r\n        position: -100,\r\n        backgroundColor: theme['color-warning-500'],\r\n        shadow: false\r\n      });\r\n\r\n      setTimeout(() => {\r\n        Toast.hide(toast);\r\n      }, 4000);\r\n    }\r\n  };\r\n\r\n  function TagInput() {\r\n    const groupedData = selectedTagIndex.map((index) => {\r\n      return tagArray[index.row];\r\n    });\r\n    return (\r\n      <Layout>\r\n        <Select\r\n          label=\"Tags\"\r\n          multiSelect\r\n          value={groupedData.join(', ')}\r\n          placeholder=\"Select Tags\"\r\n          selectedIndex={selectedTagIndex}\r\n          onSelect={(index: IndexPath[]) => {\r\n            setSelectedTagIndex(index);\r\n          }}\r\n          style={styles.input}\r\n        >\r\n          {tagArray.map((title, i) => (\r\n            <SelectItem title={title} key={i} />\r\n          ))}\r\n        </Select>\r\n        <OptionalText />\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  const renderPostOptions = () => {\r\n    // Text\r\n    if (selectedPostTypeIndex.row === 1) {\r\n      return (\r\n        <>\r\n          <Layout\r\n            style={{\r\n              flexDirection: 'row',\r\n              justifyContent: 'space-evenly',\r\n              alignItems: 'center',\r\n              marginTop: 15\r\n            }}\r\n          >\r\n            {/* <EmojiToggle /> */}\r\n\r\n            <Input\r\n              placeholder=\"Post Title\"\r\n              onFocus={() => {\r\n                setIsEmojiShown(false);\r\n              }}\r\n              value={discoverPostInputs?.title ? discoverPostInputs.title : ''}\r\n              style={{ ...styles.input, flex: 5 }}\r\n              onChangeText={(newText) => {\r\n                setDiscoverPostInputs({\r\n                  ...discoverPostInputs,\r\n                  title: newText\r\n                });\r\n              }}\r\n            />\r\n          </Layout>\r\n          {TagInput()}\r\n          <Input\r\n            multiline\r\n            placeholder=\"Post Body\"\r\n            onFocus={() => {\r\n              setIsEmojiShown(false);\r\n            }}\r\n            textStyle={{ minHeight: 100 }}\r\n            style={{ ...styles.input, alignSelf: 'center', width: '100%' }}\r\n            value={\r\n              discoverPostInputs?.contentText\r\n                ? discoverPostInputs.contentText\r\n                : ''\r\n            }\r\n            onChangeText={(newText) => {\r\n              setDiscoverPostInputs({\r\n                ...discoverPostInputs,\r\n                contentText: newText\r\n              });\r\n            }}\r\n          />\r\n        </>\r\n      );\r\n    }\r\n    if (selectedPostTypeIndex.row === 2) {\r\n      // LINK\r\n      return (\r\n        <>\r\n          <Layout\r\n            style={{\r\n              flexDirection: 'row',\r\n              justifyContent: 'space-evenly',\r\n              alignItems: 'center',\r\n              marginTop: 15\r\n            }}\r\n          >\r\n            {/* <EmojiToggle /> */}\r\n            <Input\r\n              placeholder=\"Post Title\"\r\n              onFocus={() => {\r\n                setIsEmojiShown(false);\r\n              }}\r\n              value={discoverPostInputs?.title ? discoverPostInputs.title : ''}\r\n              style={{ ...styles.input, flex: 5 }}\r\n              onChangeText={(newText) => {\r\n                setDiscoverPostInputs({\r\n                  ...discoverPostInputs,\r\n                  title: newText\r\n                });\r\n              }}\r\n            />\r\n          </Layout>\r\n\r\n          <Input\r\n            placeholder=\"Post Link\"\r\n            style={styles.input}\r\n            onFocus={() => {\r\n              setIsEmojiShown(false);\r\n            }}\r\n            value={\r\n              discoverPostInputs?.contentUrl\r\n                ? discoverPostInputs.contentUrl\r\n                : ''\r\n            }\r\n            onChangeText={(newText) => {\r\n              setDiscoverPostInputs({\r\n                ...discoverPostInputs,\r\n                contentUrl: newText\r\n              });\r\n            }}\r\n          />\r\n          {/* {PostTypeInput} */}\r\n          {TagInput()}\r\n        </>\r\n      );\r\n    }\r\n    if (selectedPostTypeIndex.row === 0) {\r\n      // IMAGE\r\n      return (\r\n        <CreateImage\r\n          discoverPostInputs={discoverPostInputs}\r\n          setDiscoverPostInputs={setDiscoverPostInputs}\r\n          TagInput={TagInput}\r\n        />\r\n      );\r\n    }\r\n    if (selectedPostTypeIndex.row === 3) {\r\n      // EVENT\r\n      return (\r\n        <CreateEventPost\r\n          discoverPostInputs={discoverPostInputs}\r\n          setDiscoverPostInputs={setDiscoverPostInputs}\r\n          TagInput={TagInput}\r\n          startTime={startTime}\r\n          setStartTime={setStartTime}\r\n          endTime={endTime}\r\n          setEndTime={setEndTime}\r\n          date={date}\r\n          setDate={setDate}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout style={{ flex: 1 }}>\r\n      <KeyboardAvoidingView\r\n        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n        style={{ flex: 1 }}\r\n      >\r\n        <ScrollView style={{ flex: 1 }}>\r\n          <TouchableWithoutFeedback\r\n            style={{ flex: 1 }}\r\n            onPress={() => {\r\n              Keyboard.dismiss();\r\n            }}\r\n          >\r\n            <Layout\r\n              style={{ flex: 1, marginBottom: 100, marginHorizontal: 16 }}\r\n            >\r\n              <Select\r\n                status=\"success\"\r\n                label=\"Select Post Type\"\r\n                value={postOptions[selectedPostTypeIndex.row]}\r\n                selectedIndex={selectedPostTypeIndex}\r\n                onSelect={(index: IndexPath) => {\r\n                  setSelectedPostTypeIndex(index);\r\n                  setSelectedTagIndex([]);\r\n                  setDiscoverPostInputs(null);\r\n                  setError(null);\r\n                  setIsEmojiShown(false);\r\n                }}\r\n                style={styles.input}\r\n              >\r\n                <SelectItem\r\n                  title=\"Image Post\"\r\n                  accessoryLeft={\r\n                    <FontAwesome5\r\n                      name=\"image\"\r\n                      size={17}\r\n                      color={darkMode ? '#fff' : '#000'}\r\n                    />\r\n                  }\r\n                />\r\n                <SelectItem\r\n                  title=\"Text Post\"\r\n                  accessoryLeft={\r\n                    <FontAwesome5\r\n                      name=\"file-alt\"\r\n                      size={17}\r\n                      color={darkMode ? '#fff' : '#000'}\r\n                    />\r\n                  }\r\n                />\r\n                <SelectItem\r\n                  title=\"Link\"\r\n                  accessoryLeft={\r\n                    <FontAwesome5\r\n                      name=\"link\"\r\n                      size={17}\r\n                      color={darkMode ? '#fff' : '#000'}\r\n                    />\r\n                  }\r\n                />\r\n                <SelectItem\r\n                  title=\"Event\"\r\n                  accessoryLeft={\r\n                    <FontAwesome5\r\n                      name=\"calendar-alt\"\r\n                      size={17}\r\n                      color={darkMode ? '#fff' : '#000'}\r\n                    />\r\n                  }\r\n                />\r\n              </Select>\r\n\r\n              <Divider />\r\n              {renderPostOptions()}\r\n              {error && (\r\n                <Layout>\r\n                  <Text\r\n                    style={{\r\n                      textAlign: 'center',\r\n                      color: 'red',\r\n                      fontStyle: 'italic'\r\n                    }}\r\n                  >\r\n                    {error}\r\n                  </Text>\r\n                </Layout>\r\n              )}\r\n              {!isEmojiShown && (\r\n                <Button\r\n                  style={styles.input}\r\n                  onPress={onSubmit}\r\n                  disabled={isLoading}\r\n                >\r\n                  Submit\r\n                </Button>\r\n              )}\r\n            </Layout>\r\n          </TouchableWithoutFeedback>\r\n        </ScrollView>\r\n      </KeyboardAvoidingView>\r\n      {isLoading && (\r\n        <Layout\r\n          style={{\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            width: '100%',\r\n            height: '100%',\r\n            position: 'absolute',\r\n            backgroundColor: 'black',\r\n            flex: 1,\r\n            opacity: 0.3\r\n          }}\r\n        >\r\n          <Spinner size=\"medium\" />\r\n        </Layout>\r\n      )}\r\n    </Layout>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  input: {\r\n    marginVertical: 5\r\n  }\r\n});\r\n","import { FontAwesome } from '@expo/vector-icons';\r\nimport { Layout, Text, useTheme } from '@ui-kitten/components';\r\nimport React from 'react';\r\nimport { TouchableOpacity, Platform, UIManager } from 'react-native';\r\n\r\nimport { selectDarkMode, selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport withPreventDoubleClick from '../../components/withPreventDoubleClick';\r\nimport {\r\n  discoverApiSlice,\r\n  postsAdapter,\r\n  postsSelectors,\r\n  useLikePostMutation\r\n} from '../api/discoverApi';\r\nimport { usersApiSlice } from '../api/usersApi';\r\n\r\nconst DebounceTouchable = withPreventDoubleClick(TouchableOpacity, 600);\r\n\r\nexport default function BottomBar({\r\n  tags,\r\n  _id,\r\n  commentIconShown = true,\r\n  searchTerm = undefined,\r\n  searchedTag = undefined\r\n}) {\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const theme = useTheme();\r\n\r\n  const { data: userData } =\r\n    usersApiSlice.endpoints.getUserInfo.useQueryState(userKey);\r\n  const [likePost] = useLikePostMutation();\r\n\r\n  const post = discoverApiSlice.endpoints.getDiscoverPosts.useQueryState(\r\n    {\r\n      pageNumber: 1,\r\n      userKey,\r\n      userName: userData.userName,\r\n      searchTerm,\r\n      tag: searchedTag\r\n    },\r\n    {\r\n      selectFromResult: (result) =>\r\n        postsSelectors.selectById(\r\n          result.data ?? postsAdapter.getInitialState(),\r\n          _id\r\n        )\r\n    }\r\n  );\r\n\r\n  const onPressLike = async () => {\r\n    if (!post) return;\r\n    try {\r\n      await likePost({\r\n        userKey,\r\n        _id,\r\n        title: post.title,\r\n        postAuthor: post.userName,\r\n        userName: userData.userName,\r\n        searchTerm,\r\n        tag: searchedTag\r\n      }).unwrap();\r\n    } catch (error) {\r\n      console.warn('Error liking post:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      style={{\r\n        width: '100%',\r\n        flexDirection: 'row',\r\n        paddingVertical: 5,\r\n        paddingHorizontal: 15\r\n      }}\r\n    >\r\n      <Layout\r\n        style={{\r\n          flexDirection: 'row',\r\n          flexWrap: 'wrap',\r\n          flex: 6\r\n        }}\r\n      >\r\n        {/* tags */}\r\n        {tags.map((tag: string, index: number) => (\r\n          <Layout\r\n            key={index}\r\n            level=\"3\"\r\n            style={{\r\n              padding: 5,\r\n              borderRadius: 5,\r\n              marginRight: 5,\r\n              marginTop: 2\r\n            }}\r\n          >\r\n            <Text style={{ fontSize: 12 }}>{tag}</Text>\r\n          </Layout>\r\n        ))}\r\n      </Layout>\r\n\r\n      {/* Icons */}\r\n      <Layout\r\n        style={{\r\n          flexDirection: 'row',\r\n          flex: 2,\r\n          justifyContent: 'space-evenly',\r\n          alignItems: 'center'\r\n        }}\r\n      >\r\n        <FontAwesome\r\n          style={{ flex: 2, opacity: commentIconShown ? 1 : 0 }}\r\n          name=\"comments-o\"\r\n          size={20}\r\n          color={darkMode ? '#fff' : '#000'}\r\n        />\r\n        {/* Likes */}\r\n        {/* @ts-ignore */}\r\n        <DebounceTouchable\r\n          style={{\r\n            flexDirection: 'row',\r\n            flex: 3,\r\n            justifyContent: 'space-evenly',\r\n            alignItems: 'center'\r\n          }}\r\n          onPress={onPressLike}\r\n        >\r\n          <Text\r\n            style={{\r\n              fontSize: 15,\r\n              paddingTop: 1\r\n            }}\r\n          >\r\n            {post?.numLikes}\r\n          </Text>\r\n          <FontAwesome\r\n            style={{ alignSelf: 'center' }}\r\n            size={17}\r\n            color={\r\n              post?.hasLiked\r\n                ? theme['color-primary-500']\r\n                : darkMode\r\n                ? '#fff'\r\n                : '#000'\r\n            }\r\n            name={post?.hasLiked ? 'heart' : 'heart-o'}\r\n          />\r\n        </DebounceTouchable>\r\n      </Layout>\r\n      {/* @ts-ignore */}\r\n    </Layout>\r\n  );\r\n}\r\n","import { debounce } from 'lodash';\r\nimport React from 'react';\r\n\r\nexport default function withPreventDoubleClick(WrappedComponent, time = 300) {\r\n  class PreventDoubleClick extends React.PureComponent {\r\n    debouncedOnPress = () => {\r\n      this.props.onPress && this.props.onPress();\r\n    };\r\n\r\n    onPress = debounce(this.debouncedOnPress, time, {\r\n      leading: true,\r\n      trailing: false\r\n    });\r\n\r\n    render() {\r\n      return <WrappedComponent {...this.props} onPress={this.onPress} />;\r\n    }\r\n  }\r\n\r\n  PreventDoubleClick.displayName = `withPreventDoubleClick(${\r\n    WrappedComponent.displayName || WrappedComponent.name\r\n  })`;\r\n  return PreventDoubleClick;\r\n}\r\n","import React from 'react';\r\nimport { TouchableWithoutFeedback } from 'react-native';\r\n\r\nexport default class DoubleTap extends React.Component {\r\n  static defaultProps = {\r\n    delay: 300,\r\n    onDoubleTap: () => {},\r\n    children: null\r\n  };\r\n\r\n  lastTap = null;\r\n\r\n  // https://gist.github.com/brunotavares/3c9a373ba5cd1b4ff28b\r\n  handleDoubleTap = () => {\r\n    const now = Date.now();\r\n    if (this.lastTap && now - this.lastTap < this.props.delay) {\r\n      this.props.onDoubleTap();\r\n    } else {\r\n      this.lastTap = now;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <TouchableWithoutFeedback onPress={this.handleDoubleTap}>\r\n        {this.props.children}\r\n      </TouchableWithoutFeedback>\r\n    );\r\n  }\r\n}\r\n","import { FontAwesome } from '@expo/vector-icons';\r\nimport { useTheme } from '@ui-kitten/components';\r\nimport { forwardRef, useImperativeHandle, useRef, useState } from 'react';\r\nimport { Animated, Easing } from 'react-native';\r\n\r\nexport default forwardRef(\r\n  ({ style, iconStyle }: { style: object; iconStyle?: object }, ref) => {\r\n    useImperativeHandle(ref, () => ({\r\n      animate\r\n    }));\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const scaleAnim = useRef(new Animated.Value(1)).current;\r\n    const [heartRotation, setHeartRotation] = useState('0deg');\r\n\r\n    const pickRandomDegree = () => {\r\n      const options = ['0deg', '15deg', '-15deg'];\r\n      return options[Math.floor(Math.random() * options.length)];\r\n    };\r\n\r\n    const animate = () => {\r\n      // animation: shrink quickly with bounce, opacity 0 - 1. Stop for a moment. Increase in size. Opacity 1-0\r\n      setHeartRotation(pickRandomDegree());\r\n\r\n      scaleAnim.setValue(1);\r\n      opacityAnim.setValue(0);\r\n\r\n      Animated.parallel([\r\n        Animated.sequence([\r\n          Animated.timing(opacityAnim, {\r\n            toValue: 1,\r\n            duration: 200,\r\n            useNativeDriver: true\r\n          }),\r\n          Animated.timing(opacityAnim, {\r\n            toValue: 1,\r\n            duration: 300,\r\n            useNativeDriver: true\r\n          }),\r\n          Animated.timing(opacityAnim, {\r\n            toValue: 0,\r\n            duration: 100,\r\n            useNativeDriver: true\r\n          })\r\n        ]),\r\n        ,\r\n        Animated.sequence([\r\n          Animated.timing(scaleAnim, {\r\n            toValue: 0.8,\r\n            easing: Easing.bounce,\r\n            duration: 200,\r\n            useNativeDriver: true\r\n          }),\r\n          Animated.timing(scaleAnim, {\r\n            toValue: 0.8,\r\n            duration: 300,\r\n            useNativeDriver: true\r\n          }),\r\n          Animated.timing(scaleAnim, {\r\n            toValue: 1.2,\r\n            duration: 100,\r\n            useNativeDriver: true\r\n          })\r\n        ])\r\n      ]).start();\r\n    };\r\n\r\n    return (\r\n      <Animated.View\r\n        style={{\r\n          ...style,\r\n          opacity: opacityAnim,\r\n          transform: [{ scale: scaleAnim }]\r\n        }}\r\n      >\r\n        <FontAwesome\r\n          name=\"heart\"\r\n          size={110}\r\n          style={{ transform: [{ rotate: heartRotation }], ...iconStyle }}\r\n        />\r\n      </Animated.View>\r\n    );\r\n  }\r\n);\r\n","import { Layout, useTheme } from '@ui-kitten/components';\r\nimport { useRef } from 'react';\r\nimport { Image, useWindowDimensions } from 'react-native';\r\n\r\nimport { selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport DoubleTap from '../../components/DoubleTap';\r\nimport DoubleTapHeart from '../../components/DoubleTapHeart';\r\nimport { MAX_WIDTH_WEB } from '../../constants/discover';\r\nimport { getImageUrl } from '../../functions';\r\nimport { useLikePostMutation } from '../api/discoverApi';\r\n\r\nexport default function ImageComponent({ imageId, hasLiked, apiInfo }) {\r\n  const theme = useTheme();\r\n  const [likePost] = useLikePostMutation();\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const likeRef = useRef(null);\r\n  const windowWidth = useWindowDimensions().width;\r\n\r\n  const handlePressLike = async () => {\r\n    likeRef.current?.animate();\r\n\r\n    if (hasLiked) {\r\n      return;\r\n    }\r\n    try {\r\n      await likePost({\r\n        userKey,\r\n        tag: apiInfo.searchedTag,\r\n        ...apiInfo\r\n      }).unwrap();\r\n    } catch (error) {\r\n      console.warn('Error liking post:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DoubleTap delay={1200} onDoubleTap={handlePressLike}>\r\n      <Layout style={{ flex: 1, alignItems: 'center' }}>\r\n        <Image\r\n          source={{\r\n            uri: getImageUrl(imageId)\r\n          }}\r\n          style={{\r\n            borderRadius: 5,\r\n            width: windowWidth * 0.9,\r\n            height: windowWidth * 0.9,\r\n            maxHeight: MAX_WIDTH_WEB,\r\n            maxWidth: MAX_WIDTH_WEB,\r\n            marginBottom: 10,\r\n            resizeMode: 'contain'\r\n          }}\r\n        />\r\n        <DoubleTapHeart\r\n          style={{\r\n            position: 'absolute',\r\n            top: '35%',\r\n            right: '30%',\r\n            shadowColor: '#000',\r\n            shadowOffset: {\r\n              width: 0,\r\n              height: 3\r\n            },\r\n            shadowOpacity: 0.29,\r\n            shadowRadius: 4.65,\r\n\r\n            elevation: 7\r\n          }}\r\n          ref={likeRef}\r\n          iconStyle={{ color: theme['color-primary-500'] }}\r\n        />\r\n      </Layout>\r\n    </DoubleTap>\r\n  );\r\n}\r\n","import { A } from '@expo/html-elements';\r\nimport { Divider, Layout, Text } from '@ui-kitten/components';\r\nimport { useMemo } from 'react';\r\nimport { Dimensions } from 'react-native';\r\n\r\nimport { MAX_WIDTH_WEB } from '../../constants/discover';\r\nimport { FormatDate, FormatTimeRange } from '../../functions';\r\nimport ImageComponent from './ImageComponent';\r\n\r\nconst windowWidth = Dimensions.get('window').width;\r\n\r\ninterface EventCardProps {\r\n  title: string;\r\n  location: string;\r\n  date: string;\r\n  startTime: string;\r\n  endTime: string;\r\n  _id: string;\r\n  postAuthor: string;\r\n  userName: string;\r\n  hasLiked: boolean;\r\n  searchTerm?: string;\r\n  searchedTag?: string;\r\n  tags?: string[];\r\n  contentURL?: string;\r\n  contentText?: string;\r\n  contentImage?: string;\r\n  host?: string;\r\n  truncated?: boolean;\r\n}\r\n\r\nexport default function EventBody({\r\n  title,\r\n  location,\r\n  date,\r\n  startTime,\r\n  endTime,\r\n  contentURL,\r\n  contentText,\r\n  contentImage,\r\n  host,\r\n  hasLiked,\r\n  _id,\r\n  searchTerm,\r\n  searchedTag,\r\n  postAuthor,\r\n  userName,\r\n  truncated = true\r\n}: EventCardProps) {\r\n  const eventInfo = useMemo(\r\n    () => [\r\n      {\r\n        title: 'Location',\r\n        value: location\r\n      },\r\n      {\r\n        title: 'Date',\r\n        value: FormatDate(date)\r\n      },\r\n      {\r\n        title: 'Time',\r\n        value: FormatTimeRange(startTime, endTime)\r\n      },\r\n      {\r\n        title: 'Host',\r\n        value: host\r\n      },\r\n      {\r\n        title: 'Description',\r\n        value: contentText\r\n      }\r\n    ],\r\n    [location, date, startTime, endTime, host, contentURL, contentText]\r\n  );\r\n\r\n  const renderUrl = (link: string) => {\r\n    return (\r\n      <Layout\r\n        style={{\r\n          flexDirection: 'row',\r\n          width: windowWidth * 0.9,\r\n          maxWidth: MAX_WIDTH_WEB,\r\n          paddingVertical: 5\r\n        }}\r\n      >\r\n        <Text category=\"s1\">Link: </Text>\r\n        {truncated ? (\r\n          <Text category=\"p1\">\r\n            {link.length > 30 ? `${link.slice(0, 30)}...` : link}\r\n          </Text>\r\n        ) : (\r\n          <A>\r\n            <Text>{link}</Text>\r\n          </A>\r\n        )}\r\n      </Layout>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout style={{ flex: 1, alignItems: 'center' }}>\r\n      {contentImage ? (\r\n        <ImageComponent\r\n          apiInfo={{\r\n            _id,\r\n            title,\r\n            postAuthor,\r\n            userName,\r\n            searchTerm,\r\n            searchedTag\r\n          }}\r\n          imageId={contentImage}\r\n          hasLiked={hasLiked}\r\n        />\r\n      ) : (\r\n        <Divider />\r\n      )}\r\n\r\n      {/* Event Info  */}\r\n      {eventInfo.map((info, index) => {\r\n        if (info.value) {\r\n          return (\r\n            <Layout\r\n              key={index}\r\n              style={{\r\n                flexDirection: 'row',\r\n                width: windowWidth * 0.9,\r\n                maxWidth: MAX_WIDTH_WEB,\r\n                paddingVertical: 5\r\n              }}\r\n            >\r\n              <Text category=\"s1\">\r\n                {info.title}\r\n                {`: `}\r\n                <Text category=\"p1\">\r\n                  {truncated\r\n                    ? info.value.length > 30\r\n                      ? `${info.value.slice(0, 30)}...`\r\n                      : info.value\r\n                    : info.value}\r\n                </Text>\r\n              </Text>\r\n            </Layout>\r\n          );\r\n        }\r\n      })}\r\n\r\n      {contentURL ? renderUrl(contentURL) : null}\r\n    </Layout>\r\n  );\r\n}\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport { useIsFocused } from '@react-navigation/native';\r\nimport { Layout, Text } from '@ui-kitten/components';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Dimensions, TouchableOpacity } from 'react-native';\r\nimport Toast from 'react-native-root-toast';\r\n\r\nimport { selectDarkMode, selectUserKey } from '../../../app/appDataSlice';\r\nimport { useAppSelector } from '../../../app/hooks';\r\nimport { MAX_WIDTH_WEB } from '../../../constants/discover';\r\nimport { useEditUserMutation, useGetUserInfoQuery } from '../../api/usersApi';\r\nimport BottomBar from '../BottomBar';\r\nimport EventBody from '../EventBody';\r\n\r\nconst windowWidth = Dimensions.get('window').width;\r\n\r\ninterface EventCardProps {\r\n  title: string;\r\n  location: string;\r\n  date: string;\r\n  startTime: string;\r\n  endTime: string;\r\n  pinnedIcon: JSX.Element;\r\n  _id: string;\r\n  postAuthor: string;\r\n  userName: string;\r\n  hasLiked: boolean;\r\n  navigation: any;\r\n  searchTerm?: string;\r\n  searchedTag?: string;\r\n  tags?: string[];\r\n  contentURL?: string;\r\n  contentText?: string;\r\n  contentImage?: string;\r\n  host?: string;\r\n}\r\n\r\nexport default function EventCard({\r\n  title,\r\n  location,\r\n  date,\r\n  startTime,\r\n  endTime,\r\n  pinnedIcon,\r\n  tags,\r\n  contentURL,\r\n  contentText,\r\n  contentImage,\r\n  host,\r\n  hasLiked,\r\n  _id,\r\n  searchTerm,\r\n  searchedTag,\r\n  postAuthor,\r\n  userName,\r\n  navigation\r\n}: EventCardProps) {\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const { data: userData } = useGetUserInfoQuery(useAppSelector(selectUserKey));\r\n  const [eventPopUp, setEventPopUp] = useState(false);\r\n  const [isAdded, setIsAdded] = useState(false);\r\n  const [editUser] = useEditUserMutation();\r\n\r\n  useEffect(() => {\r\n    setIsAdded(\r\n      userData.customEvents.some((customEvent) => {\r\n        return (\r\n          customEvent.name === title &&\r\n          customEvent.startTime == startTime &&\r\n          customEvent.endTime == endTime &&\r\n          customEvent.date == date\r\n        );\r\n      })\r\n    );\r\n  }, [useIsFocused()]); // this forces just the button component to re-render when the focus changes\r\n\r\n  function handleEventSyncWithServer(isAdd: boolean) {\r\n    editUser({\r\n      userKey,\r\n      userName: userData.userName,\r\n      fields: JSON.stringify(\r\n        isAdd\r\n          ? {\r\n              addCustomEvent: {\r\n                name: title,\r\n                startTime: new Date(startTime).toTimeString().slice(0, 5),\r\n                endTime: new Date(endTime).toTimeString().slice(0, 5),\r\n                days: [],\r\n                date\r\n              }\r\n            }\r\n          : {\r\n              removeCustomEvent: {\r\n                name: title,\r\n                startTime: new Date(startTime).toTimeString().slice(0, 5),\r\n                endTime: new Date(endTime).toTimeString().slice(0, 5),\r\n                days: [],\r\n                date\r\n              }\r\n            }\r\n      )\r\n    })\r\n      .unwrap()\r\n      .then(async () => {\r\n        setIsAdded(isAdd);\r\n      })\r\n      .catch(() => {\r\n        Toast.show('Failed to add event.\\nPlease try again later', {\r\n          duration: Toast.durations.LONG,\r\n          opacity: 1,\r\n          position: -100,\r\n          backgroundColor: 'grey',\r\n          shadow: false\r\n        });\r\n      });\r\n  }\r\n\r\n  function toggleAdditionOfEvent() {\r\n    handleEventSyncWithServer(!isAdded);\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      {pinnedIcon}\r\n      <Layout style={{ flex: 1, alignItems: 'center' }}>\r\n        <TouchableOpacity\r\n          onPress={() => {\r\n            navigation.navigate('SinglePost', { _id, searchTerm, searchedTag });\r\n          }}\r\n          activeOpacity={0.9}\r\n          style={{\r\n            flex: 1,\r\n            alignItems: 'center',\r\n            paddingVertical: 10\r\n          }}\r\n        >\r\n          <Layout\r\n            style={{\r\n              width: windowWidth * 0.9,\r\n              maxWidth: MAX_WIDTH_WEB,\r\n              paddingVertical: 10,\r\n              flexDirection: 'row'\r\n            }}\r\n          >\r\n            <Text style={{ fontSize: 20 }}>{title}</Text>\r\n            <TouchableOpacity\r\n              style={{ alignSelf: 'flex-end', marginLeft: 'auto' }}\r\n              onPress={() => {\r\n                toggleAdditionOfEvent();\r\n              }}\r\n            >\r\n              <FontAwesome5\r\n                name={isAdded ? 'times' : 'plus'}\r\n                size={23}\r\n                color={darkMode ? 'white' : 'black'}\r\n              />\r\n            </TouchableOpacity>\r\n          </Layout>\r\n\r\n          <EventBody\r\n            contentURL={contentURL}\r\n            contentText={contentText}\r\n            contentImage={contentImage}\r\n            host={host}\r\n            title={title}\r\n            location={location}\r\n            date={date}\r\n            startTime={startTime}\r\n            endTime={endTime}\r\n            _id={_id}\r\n            postAuthor={postAuthor}\r\n            userName={userName}\r\n            hasLiked={hasLiked}\r\n          />\r\n\r\n          <BottomBar\r\n            tags={tags}\r\n            _id={_id}\r\n            searchTerm={searchTerm}\r\n            searchedTag={searchedTag}\r\n          />\r\n        </TouchableOpacity>\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n}\r\n","import { Layout, Text } from '@ui-kitten/components';\r\nimport { Dimensions, TouchableOpacity } from 'react-native';\r\n\r\nimport { MAX_WIDTH_WEB } from '../../../constants/discover';\r\nimport BottomBar from '../BottomBar';\r\nimport ImageComponent from '../ImageComponent';\r\n\r\nconst windowWidth = Dimensions.get('window').width;\r\n\r\nexport default function ImageCard({\r\n  title,\r\n  _id,\r\n  navigation,\r\n  imageId,\r\n  tags,\r\n  postAuthor,\r\n  userName,\r\n  searchTerm,\r\n  searchedTag,\r\n  pinnedIcon,\r\n  hasLiked\r\n}) {\r\n  return (\r\n    <Layout>\r\n      {pinnedIcon}\r\n      <Layout style={{ flex: 1, alignItems: 'center' }}>\r\n        <TouchableOpacity\r\n          onPress={() => {\r\n            navigation.navigate('SinglePost', { _id, searchTerm, searchedTag });\r\n          }}\r\n          activeOpacity={0.9}\r\n          style={{\r\n            flex: 1,\r\n            alignItems: 'center',\r\n            paddingVertical: 10\r\n          }}\r\n        >\r\n          <Layout\r\n            style={{\r\n              width: windowWidth * 0.9,\r\n              maxWidth: MAX_WIDTH_WEB,\r\n              paddingVertical: 10\r\n            }}\r\n          >\r\n            <Text style={{ fontSize: 20, marginLeft: 15 }}>{title}</Text>\r\n          </Layout>\r\n          <ImageComponent\r\n            apiInfo={{\r\n              _id,\r\n              title,\r\n              postAuthor,\r\n              userName,\r\n              searchTerm,\r\n              searchedTag\r\n            }}\r\n            imageId={imageId}\r\n            hasLiked={hasLiked}\r\n          />\r\n\r\n          <BottomBar\r\n            tags={tags}\r\n            _id={_id}\r\n            searchTerm={searchTerm}\r\n            searchedTag={searchedTag}\r\n          />\r\n        </TouchableOpacity>\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n}\r\n","import { Layout, Text } from '@ui-kitten/components';\r\nimport { useState } from 'react';\r\nimport {\r\n  Dimensions,\r\n  Image,\r\n  ImageBackground,\r\n  Platform,\r\n  TouchableHighlight\r\n} from 'react-native';\r\n\r\nimport becomeSponsor from '../../../../assets/sponsorPage/become-sponsor.png';\r\n\r\nconst windowWidth = Dimensions.get('window').width;\r\n\r\nexport default function SponsorCard({ data, navigation }) {\r\n  const [imageLink, setImageLink] = useState({ uri: data.logo });\r\n  const webWidth = Dimensions.get('window').width * 0.3;\r\n  const hasCoupon = !!data.coupons[0];\r\n\r\n  return (\r\n    <TouchableHighlight\r\n      style={{ flex: 1 }}\r\n      onPress={() => {\r\n        if (hasCoupon) {\r\n          navigation.navigate('SponsorPageDiscover', { data });\r\n        }\r\n      }}\r\n    >\r\n      <Layout style={{ flex: 1 }}>\r\n        <Text category=\"label\" style={{ marginLeft: 20 }}>\r\n          Ad\r\n        </Text>\r\n\r\n        <Layout\r\n          style={{\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-between'\r\n          }}\r\n        >\r\n          <Layout\r\n            style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}\r\n          >\r\n            <Image\r\n              source={imageLink}\r\n              onError={() => {\r\n                setImageLink(becomeSponsor);\r\n              }}\r\n              style={{\r\n                height: hasCoupon\r\n                  ? Platform.OS === 'web'\r\n                    ? 200\r\n                    : windowWidth / 2 - 20\r\n                  : Platform.OS === 'web'\r\n                  ? 200\r\n                  : windowWidth * 0.8,\r\n                width: hasCoupon\r\n                  ? Platform.OS === 'web'\r\n                    ? '20%'\r\n                    : windowWidth / 2 - 20\r\n                  : Platform.OS === 'web'\r\n                  ? '20%'\r\n                  : windowWidth * 0.8,\r\n                resizeMode: 'contain'\r\n              }}\r\n            />\r\n            {imageLink?.uri && <Text>{data.sponsorName}</Text>}\r\n          </Layout>\r\n\r\n          {data.coupons[0] && imageLink?.uri && (\r\n            <Layout style={{ flex: 1, alignItems: 'center' }}>\r\n              <ImageBackground\r\n                resizeMode=\"contain\"\r\n                source={require('../../../../assets/sponsorPage/coupon.png')}\r\n                style={{\r\n                  width: windowWidth / 2 - 20,\r\n                  height: 200,\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center'\r\n                }}\r\n              >\r\n                <Text\r\n                  style={{\r\n                    fontSize: 13,\r\n                    paddingBottom: 7,\r\n                    paddingRight: 7,\r\n                    marginHorizontal: 25\r\n                  }}\r\n                >\r\n                  {data.coupons[0].couponDescription}\r\n                </Text>\r\n              </ImageBackground>\r\n            </Layout>\r\n          )}\r\n        </Layout>\r\n      </Layout>\r\n    </TouchableHighlight>\r\n  );\r\n}\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport { Layout, ListItem, Text } from '@ui-kitten/components';\r\nimport { TouchableHighlight } from 'react-native';\r\n\r\nimport BottomBar from '../BottomBar';\r\n\r\nexport default function TextCard({\r\n  navigation,\r\n  tags,\r\n  title,\r\n  body,\r\n  emoji,\r\n  _id,\r\n  searchTerm,\r\n  searchedTag,\r\n  pinnedIcon,\r\n  isUrl = false\r\n}) {\r\n  const renderTextBody = () => {\r\n    const text = body;\r\n\r\n    if (text.indexOf('\\n') > 10 && text.indexOf('\\n') < 50) {\r\n      return `${text.split('\\n')[0]}...`;\r\n    }\r\n    if (text.length > 50) {\r\n      return `${text.substring(0, 50)}...`;\r\n    }\r\n    return text;\r\n  };\r\n\r\n  const renderUrl = () => {\r\n    return (\r\n      <Text style={{ color: 'grey' }}>\r\n        <FontAwesome5 name=\"link\" />\r\n        {` `}\r\n        {body.length > 30 ? `${body.slice(0, 30)}...` : body}\r\n      </Text>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <TouchableHighlight\r\n      onPress={() => {\r\n        navigation.navigate('SinglePost', { _id, searchTerm, searchedTag });\r\n      }}\r\n    >\r\n      <Layout>\r\n        {pinnedIcon}\r\n\r\n        <ListItem\r\n          disabled\r\n          accessoryLeft={() => (\r\n            <Text style={{ fontSize: 35, marginRight: 15 }}>{emoji}</Text>\r\n          )}\r\n          style={{\r\n            paddingLeft: 15,\r\n            paddingTop: 25,\r\n            paddingBottom: 0\r\n          }}\r\n          title={() => (\r\n            <Text style={{ fontSize: 20, paddingBottom: 5 }}>{title}</Text>\r\n          )}\r\n          description={() => (\r\n            <Text style={{ color: 'grey' }}>\r\n              {isUrl ? renderUrl() : renderTextBody()}\r\n            </Text>\r\n          )}\r\n        />\r\n\r\n        <BottomBar\r\n          tags={tags}\r\n          _id={_id}\r\n          searchTerm={searchTerm}\r\n          searchedTag={searchedTag}\r\n        />\r\n      </Layout>\r\n    </TouchableHighlight>\r\n  );\r\n}\r\n","import { FontAwesome5, MaterialIcons } from '@expo/vector-icons';\r\nimport {\r\n  Button,\r\n  Divider,\r\n  Icon,\r\n  Layout,\r\n  List,\r\n  ListItem,\r\n  Spinner,\r\n  Text,\r\n  useTheme\r\n} from '@ui-kitten/components';\r\nimport { useEffect, useRef } from 'react';\r\nimport { Keyboard, Platform } from 'react-native';\r\n\r\nimport { selectDarkMode, selectUserKey } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport { DiscoverPost } from '../../app/types';\r\nimport {\r\n  discoverApiSlice,\r\n  postsAdapter,\r\n  postsSelectors,\r\n  useLazyGetDiscoverPostsQuery\r\n} from '../api/discoverApi';\r\nimport { usersApiSlice } from '../api/usersApi';\r\nimport EventCard from './Cards/EventCard';\r\nimport ImageCard from './Cards/ImageCard';\r\nimport SponsorCard from './Cards/SponsorCard';\r\nimport TextCard from './Cards/TextCard';\r\n\r\nexport default function PostsList({\r\n  navigation,\r\n  tag,\r\n  searchTerm,\r\n  recentSearches,\r\n  handleRemoveRecentSearch,\r\n  handleClickRecentSearch\r\n}: {\r\n  navigation: any;\r\n  tag?: string;\r\n  searchTerm?: string;\r\n  recentSearches?: string[];\r\n  sponsor?: boolean;\r\n  handleRemoveRecentSearch?: (searchTerm: string) => void;\r\n  handleClickRecentSearch?: (searchTerm: string) => void;\r\n  route?: { params: { sponsor: boolean } };\r\n}) {\r\n  const theme = useTheme();\r\n  const userKey = useAppSelector(selectUserKey);\r\n\r\n  const {\r\n    data: { userName }\r\n  } = usersApiSlice.endpoints.getUserInfo.useQueryState(userKey);\r\n\r\n  const pageNumber = useRef(0);\r\n  const [fetchPosts, { isFetching, isLoading, isError }] =\r\n    useLazyGetDiscoverPostsQuery();\r\n\r\n  const { posts, hasMorePages } =\r\n    discoverApiSlice.endpoints.getDiscoverPosts.useQueryState(\r\n      {\r\n        pageNumber: 1,\r\n        userKey,\r\n        userName,\r\n        tag,\r\n        searchTerm\r\n      },\r\n      {\r\n        selectFromResult: (result) => {\r\n          return {\r\n            hasMorePages: result.data?.hasMorePages,\r\n            posts: postsSelectors.selectAll(\r\n              result.data ?? postsAdapter.getInitialState()\r\n            )\r\n          };\r\n        }\r\n      }\r\n    );\r\n\r\n  const fetchFirstPage = async () => {\r\n    pageNumber.current = 1;\r\n    await fetchPosts({\r\n      userKey,\r\n      pageNumber: pageNumber.current,\r\n      userName,\r\n      tag,\r\n      searchTerm\r\n      // sponsor,\r\n    });\r\n  };\r\n\r\n  const fetchMorePosts = async () => {\r\n    if (!hasMorePages || isFetching) return;\r\n    pageNumber.current++;\r\n    await fetchPosts({\r\n      userKey,\r\n      pageNumber: pageNumber.current,\r\n      userName,\r\n      tag,\r\n      searchTerm\r\n      // sponsor,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchFirstPage();\r\n  }, [searchTerm, tag]);\r\n\r\n  const PinIcon = (\r\n    <Layout\r\n      style={{\r\n        flexDirection: 'row',\r\n        marginBottom: 0,\r\n        marginTop: 10,\r\n        marginLeft: 10\r\n      }}\r\n    >\r\n      <MaterialIcons\r\n        name=\"push-pin\"\r\n        size={20}\r\n        color={theme['color-primary-500']}\r\n      />\r\n      <Text style={{ color: theme['color-primary-500'] }}>pinned</Text>\r\n    </Layout>\r\n  );\r\n\r\n  // Render Content\r\n\r\n  const renderItem = ({ item }: { item: DiscoverPost }) => {\r\n    const commonProps = {\r\n      title: item.title,\r\n      tags: item.tags,\r\n      _id: item._id,\r\n      postAuthor: item.userName,\r\n      navigation,\r\n      key: item._id,\r\n      searchTerm,\r\n      searchedTag: tag,\r\n      pinnedIcon: item.pinned ? PinIcon : null\r\n    };\r\n\r\n    if (item.isSponsor) {\r\n      const sponsorProps = JSON.parse(item.contentText);\r\n      return <SponsorCard data={sponsorProps} navigation={navigation} />;\r\n    }\r\n\r\n    switch (item.type) {\r\n      case 'contentText':\r\n        return (\r\n          <TextCard\r\n            {...commonProps}\r\n            body={item.contentText}\r\n            emoji={item.emoji}\r\n            isUrl={false}\r\n          />\r\n        );\r\n      case 'contentUrl':\r\n        return (\r\n          <TextCard\r\n            {...commonProps}\r\n            body={item.contentUrl}\r\n            emoji={item.emoji}\r\n            isUrl\r\n          />\r\n        );\r\n      case 'contentImage':\r\n        return (\r\n          <ImageCard\r\n            {...commonProps}\r\n            hasLiked={item.hasLiked}\r\n            imageId={item.contentImage}\r\n            postAuthor={item.userName}\r\n            userName={userName}\r\n          />\r\n        );\r\n      case 'contentEvent':\r\n        return (\r\n          <EventCard\r\n            location={item.location}\r\n            date={item.date}\r\n            startTime={item.startTime}\r\n            postAuthor={item.userName}\r\n            userName={userName}\r\n            contentURL={item.contentUrl}\r\n            contentText={item.contentText}\r\n            contentImage={item.contentImage}\r\n            endTime={item.endTime}\r\n            hasLiked={item.hasLiked}\r\n            host={item.host}\r\n            {...commonProps}\r\n          />\r\n        );\r\n\r\n      default:\r\n        console.warn('Tried to load an unknown post type:', item?.type);\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const renderRecentSearch = ({ item }: { item: string }) => {\r\n    return (\r\n      <ListItem\r\n        onPress={() => {\r\n          handleClickRecentSearch(item);\r\n          Keyboard.dismiss();\r\n        }}\r\n        style={{\r\n          paddingVertical: 10,\r\n          marginVertical: 0,\r\n          backgroundColor: 'transparent'\r\n        }}\r\n        title={item}\r\n        accessoryLeft={() => (\r\n          <Icon\r\n            name=\"clock\"\r\n            style={{\r\n              height: 20,\r\n              color: theme['color-basic-400'],\r\n              marginHorizontal: 10\r\n            }}\r\n          />\r\n        )}\r\n        accessoryRight={(props) => (\r\n          <Button\r\n            appearance=\"ghost\"\r\n            onPress={() => handleRemoveRecentSearch(item)}\r\n            accessoryLeft={<Icon {...props} name=\"x\" pack=\"feather\" />}\r\n          />\r\n        )}\r\n      />\r\n    );\r\n  };\r\n\r\n  function FooterSpinner() {\r\n    if (isFetching) {\r\n      return (\r\n        <Layout style={{ alignItems: 'center', paddingVertical: 10 }}>\r\n          <Spinner />\r\n        </Layout>\r\n      );\r\n    }\r\n  }\r\n\r\n  let content = <></>;\r\n  if (isLoading) {\r\n    content = (\r\n      <Layout style={{ marginTop: 20, alignItems: 'center' }}>\r\n        <Spinner />\r\n      </Layout>\r\n    );\r\n  } else if (isError) {\r\n    content = (\r\n      <Layout style={{ alignItems: 'center', marginTop: 20 }}>\r\n        <FontAwesome5\r\n          name=\"exclamation\"\r\n          size={50}\r\n          color={theme['color-danger-500']}\r\n        />\r\n        <Text style={{ textAlign: 'center', fontSize: 20 }}>\r\n          Error loading posts\r\n        </Text>\r\n      </Layout>\r\n    );\r\n  } else if (posts.length === 0) {\r\n    content = (\r\n      <Layout style={{ alignItems: 'center', marginTop: 20 }}>\r\n        <FontAwesome5\r\n          name=\"sad-tear\"\r\n          size={50}\r\n          color={theme['color-danger-500']}\r\n        />\r\n        <Text style={{ textAlign: 'center', fontSize: 20 }}>\r\n          No posts found\r\n        </Text>\r\n      </Layout>\r\n    );\r\n  } else if (searchTerm === '' && tag === '') {\r\n    if (recentSearches?.length > 0) {\r\n      content = (\r\n        <Layout style={{ flex: 1 }}>\r\n          <List\r\n            keyboardShouldPersistTaps=\"handled\"\r\n            ListHeaderComponent={() => (\r\n              <Text\r\n                status=\"success\"\r\n                style={{ fontStyle: 'italic', marginLeft: 20 }}\r\n              >\r\n                Recent Searches\r\n              </Text>\r\n            )}\r\n            data={Array.from(recentSearches)}\r\n            renderItem={renderRecentSearch}\r\n          />\r\n        </Layout>\r\n      );\r\n    } else {\r\n      content = (\r\n        <Layout style={{ flex: 1 }}>\r\n          <Layout style={{ marginTop: 30, justifyContent: 'center' }}>\r\n            <Text style={{ textAlign: 'center', fontSize: 20 }}>\r\n              Search for posts\r\n            </Text>\r\n            <Text\r\n              style={{\r\n                textAlign: 'center',\r\n                fontSize: 16,\r\n                color: theme['color-basic-500']\r\n              }}\r\n            >\r\n              Search by title, tag, or college\r\n            </Text>\r\n          </Layout>\r\n        </Layout>\r\n      );\r\n    }\r\n  } else {\r\n    content =\r\n      Platform.OS === 'web' ? (\r\n        <List\r\n          contentContainerStyle={{\r\n            width: '100%',\r\n            maxWidth: 720,\r\n            alignSelf: 'center',\r\n            paddingHorizontal: 10,\r\n            backgroundColor: 'transparent'\r\n          }}\r\n          onRefresh={fetchFirstPage}\r\n          refreshing={isLoading}\r\n          data={posts}\r\n          keyExtractor={(item) => item._id}\r\n          renderItem={renderItem}\r\n          onEndReachedThreshold={0.5}\r\n          onEndReached={fetchMorePosts}\r\n          ListFooterComponent={FooterSpinner}\r\n          ItemSeparatorComponent={null}\r\n        />\r\n      ) : (\r\n        <Layout style={{ flex: 1 }}>\r\n          <List\r\n            contentContainerStyle={{ width: '100%' }}\r\n            onRefresh={fetchFirstPage}\r\n            refreshing={isLoading}\r\n            data={posts}\r\n            keyExtractor={(item) => item._id}\r\n            renderItem={renderItem}\r\n            onEndReachedThreshold={0.5}\r\n            onEndReached={fetchMorePosts}\r\n            ListFooterComponent={FooterSpinner}\r\n            showsVerticalScrollIndicator={false}\r\n            ItemSeparatorComponent={Divider}\r\n          />\r\n        </Layout>\r\n      );\r\n  }\r\n\r\n  return <Layout style={{ flex: 1 }}>{content}</Layout>;\r\n}\r\n","import { Input, Layout, useTheme } from '@ui-kitten/components';\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nimport PostsList from './PostsList';\r\nimport {\r\n  selectSearchTerm,\r\n  selectSubmittedSearchTerm,\r\n  searchTermChanged,\r\n  searchTermSubmitted,\r\n  selectTag,\r\n  selectRecentSearches,\r\n  recentSearchTermRemoved,\r\n  recentSearchTermSelected\r\n} from './discoverSlice';\r\nimport { selectDarkMode } from '../../app/appDataSlice';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport Header from '../../components/Header';\r\nimport SearchBar from '../../components/SearchBar';\r\nimport { CurrentTermLabel } from '../classPages/ClassesList';\r\n\r\nexport default function SearchPage({ navigation }) {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const searchTerm = useAppSelector(selectSearchTerm);\r\n  const tag = useAppSelector(selectTag);\r\n  const submittedSearchTerm = useAppSelector(selectSubmittedSearchTerm);\r\n  const recentSearches = useAppSelector(selectRecentSearches);\r\n\r\n  const inputRef = useRef<Input>(null);\r\n\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const theme = useTheme();\r\n\r\n  useEffect(() => {\r\n    inputRef.current?.focus();\r\n  }, []);\r\n\r\n  const onSubmitEditing = async () => {\r\n    dispatch(searchTermSubmitted(searchTerm));\r\n  };\r\n\r\n  const onChangeText = (text: string) => {\r\n    dispatch(searchTermChanged(text));\r\n  };\r\n\r\n  const handleRemoveRecentSearch = (searchTerm: string) => {\r\n    dispatch(recentSearchTermRemoved(searchTerm));\r\n  };\r\n\r\n  const handleClickRecentSearch = (searchTerm: string) => {\r\n    dispatch(recentSearchTermSelected(searchTerm));\r\n  };\r\n\r\n  let searchBarBackgroundColor = '';\r\n  if (darkMode) {\r\n    searchBarBackgroundColor = theme['color-basic-800'];\r\n  } else {\r\n    searchBarBackgroundColor = theme['color-basic-100'];\r\n  }\r\n\r\n  return (\r\n    <Layout style={{ flex: 1 }}>\r\n      <Layout level=\"2\" style={{ paddingBottom: 15 }}>\r\n        <Header\r\n          level=\"2\"\r\n          center={\r\n            <Layout\r\n              level=\"2\"\r\n              style={{ flex: 1, backgroundColor: 'transparent' }}\r\n            >\r\n              <SearchBar\r\n                inputRef={inputRef}\r\n                inputStyle={{\r\n                  opacity: 1,\r\n                  backgroundColor: searchBarBackgroundColor\r\n                }}\r\n                searchTerm={searchTerm}\r\n                onChangeText={onChangeText}\r\n                onSubmitEditing={onSubmitEditing}\r\n                placeholder=\"Search Posts...\"\r\n                cancelButtonAction={() => navigation.goBack()}\r\n                cancelButtonStatus=\"basic\"\r\n                alwaysShowCancelButton\r\n              />\r\n            </Layout>\r\n          }\r\n          title=\"\"\r\n        />\r\n      </Layout>\r\n      <PostsList\r\n        navigation={navigation}\r\n        tag={tag}\r\n        searchTerm={submittedSearchTerm}\r\n        recentSearches={recentSearches}\r\n        handleRemoveRecentSearch={handleRemoveRecentSearch}\r\n        handleClickRecentSearch={handleClickRecentSearch}\r\n        sponsor\r\n      />\r\n    </Layout>\r\n  );\r\n}\r\n","import { Card, Modal, Text, Button } from '@ui-kitten/components';\r\nimport { StyleSheet } from 'react-native';\r\n\r\nexport default function DisabledFieldModal({ setShowModal }) {\r\n  return (\r\n    <Modal\r\n      visible\r\n      backdropStyle={myStyles.backdrop}\r\n      style={{ width: '75%' }}\r\n      onBackdropPress={() => setShowModal(false)}\r\n    >\r\n      <Card disabled>\r\n        <Text style={{ fontSize: 15, paddingTop: 5, paddingBottom: 10 }}>\r\n          Sorry, we are experiencing technical difficulties and this\r\n          functionality is currently undergoing maintenance. Please try again\r\n          later.\r\n        </Text>\r\n        <Button\r\n          onPress={() => {\r\n            setShowModal(false);\r\n          }}\r\n        >\r\n          Dismiss\r\n        </Button>\r\n      </Card>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nconst myStyles = StyleSheet.create({\r\n  backdrop: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0.65)'\r\n  }\r\n});\r\n","import { Layout, Spinner } from '@ui-kitten/components';\r\n\r\nexport default function FullPageSpinner({ opacity = 0.4 }) {\r\n  return (\r\n    <Layout\r\n      style={{\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        width: '100%',\r\n        height: '100%',\r\n        position: 'absolute',\r\n        backgroundColor: 'black',\r\n        flex: 1,\r\n        opacity,\r\n        zIndex: 100\r\n      }}\r\n    >\r\n      <Spinner size=\"large\" />\r\n    </Layout>\r\n  );\r\n}\r\n","import { FontAwesome } from '@expo/vector-icons';\r\nimport { Layout, Text, useTheme } from '@ui-kitten/components';\r\nimport { useState } from 'react';\r\nimport { TouchableOpacity, Alert } from 'react-native';\r\n\r\nimport { selectDarkMode, selectUserKey } from '../../../app/appDataSlice';\r\nimport { useAppSelector } from '../../../app/hooks';\r\nimport { stringToEmoji } from '../../../functions';\r\nimport {\r\n  useDeleteCommentMutation,\r\n  useLikeCommentMutation\r\n} from '../../api/discoverApi';\r\n\r\nexport default function Comment({\r\n  body,\r\n  postId,\r\n  commentId,\r\n  isOwnComment,\r\n  userName,\r\n  numLikes,\r\n  hasLiked,\r\n  searchTerm,\r\n  searchedTag\r\n}) {\r\n  const theme = useTheme();\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  const [likeComment] = useLikeCommentMutation();\r\n  const [deleteComment] = useDeleteCommentMutation();\r\n\r\n  const handleLikeComment = async () => {\r\n    try {\r\n      await likeComment({\r\n        commentId,\r\n        postId,\r\n        userKey,\r\n        userName,\r\n        searchTerm,\r\n        tag: searchedTag\r\n      }).unwrap();\r\n    } catch (error) {\r\n      console.warn(\"Couldn't like comment\", error);\r\n    }\r\n  };\r\n\r\n  const handleDeleteComment = () => {\r\n    try {\r\n      deleteComment({\r\n        commentId,\r\n        postId,\r\n        userKey,\r\n        userName,\r\n        searchTerm,\r\n        tag: searchedTag\r\n      }).unwrap();\r\n    } catch (error) {\r\n      console.warn(\"Couldn't delete comment\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TouchableOpacity\r\n      style={{ flexDirection: 'row', marginVertical: 10, marginHorizontal: 15 }}\r\n      onPress={() => setIsExpanded(!isExpanded)}\r\n      onLongPress={() => {\r\n        if (isOwnComment) {\r\n          Alert.alert('', body, [\r\n            {\r\n              text: 'Cancel',\r\n              style: 'cancel'\r\n            },\r\n            {\r\n              text: 'Delete',\r\n              onPress: handleDeleteComment\r\n            }\r\n          ]);\r\n        }\r\n      }}\r\n    >\r\n      <Layout\r\n        style={{\r\n          height: '100%',\r\n          flexDirection: 'row',\r\n          flex: 11\r\n        }}\r\n      >\r\n        <Layout\r\n          style={{\r\n            borderRadius: 100,\r\n            width: 35,\r\n            height: 35,\r\n            marginRight: 10,\r\n            backgroundColor: darkMode\r\n              ? theme['color-basic-600']\r\n              : theme['color-basic-300'],\r\n            justifyContent: 'center',\r\n            alignItems: 'center'\r\n          }}\r\n        >\r\n          <Text style={{ fontSize: 15 }}>{stringToEmoji(body)}</Text>\r\n        </Layout>\r\n\r\n        <Text style={{ fontWeight: 'normal', flex: 1, paddingTop: 7 }}>\r\n          {`  `}\r\n          {isExpanded || body.length <= 50 ? body : `${body.slice(0, 50)}...`}\r\n        </Text>\r\n      </Layout>\r\n\r\n      <TouchableOpacity\r\n        style={{\r\n          flexDirection: 'row',\r\n          alignSelf: 'center',\r\n          alignItems: 'center'\r\n        }}\r\n        onPress={handleLikeComment}\r\n      >\r\n        <Text style={{ padding: 5, fontSize: 15 }}>{numLikes}</Text>\r\n        <FontAwesome\r\n          size={15}\r\n          color={\r\n            hasLiked ? theme['color-primary-500'] : theme['color-basic-400']\r\n          }\r\n          name=\"heart\"\r\n        />\r\n      </TouchableOpacity>\r\n    </TouchableOpacity>\r\n  );\r\n}\r\n","import { A } from '@expo/html-elements';\r\nimport { Input, Text } from '@ui-kitten/components';\r\nimport { Dimensions } from 'react-native';\r\n\r\nimport { selectDarkMode } from '../../../app/appDataSlice';\r\nimport { useAppSelector } from '../../../app/hooks';\r\nimport { validURL } from '../../../functions';\r\n\r\nconst windowWidth = Dimensions.get('window').width;\r\n\r\nexport default function SinglePostBody({ type, body, handleLikePost }) {\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n\r\n  if (type === 'contentText') {\r\n    return (\r\n      <Input\r\n        scrollEnabled={false}\r\n        multiline\r\n        disabled\r\n        value={body}\r\n        style={{\r\n          backgroundColor: 'transparent',\r\n          borderWidth: 0\r\n        }}\r\n        textStyle={{ color: darkMode ? 'white' : 'black' }}\r\n      />\r\n    );\r\n  }\r\n  if (type === 'contentUrl') {\r\n    if (validURL(body)) {\r\n      return (\r\n        <A style={{ color: 'blue' }} href={body}>\r\n          {body}\r\n        </A>\r\n      );\r\n    }\r\n    return <Text>{body}</Text>;\r\n  }\r\n  return <></>;\r\n}\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport {\r\n  Button,\r\n  Card,\r\n  Divider,\r\n  Input,\r\n  Layout,\r\n  List,\r\n  Text,\r\n  useTheme\r\n} from '@ui-kitten/components';\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\nimport { useEffect, useState } from 'react';\r\nimport { Keyboard, TouchableOpacity } from 'react-native';\r\n\r\nimport { selectDarkMode, selectUserKey } from '../../../app/appDataSlice';\r\nimport { useAppSelector } from '../../../app/hooks';\r\nimport DisabledFieldModal from '../../../components/DisabledOptionModal';\r\nimport FullPageSpinner from '../../../components/FullPageSpinner';\r\nimport { MAX_WIDTH_WEB } from '../../../constants/discover';\r\nimport { stringToEmoji } from '../../../functions';\r\nimport {\r\n  discoverApiSlice,\r\n  postsAdapter,\r\n  postsSelectors,\r\n  useAddCommentMutation,\r\n  useDeleteDiscoverPostMutation,\r\n  useLazyGetPostByIdQuery,\r\n  useLikePostMutation\r\n} from '../../api/discoverApi';\r\nimport { usersApiSlice } from '../../api/usersApi';\r\nimport BottomBar from '../BottomBar';\r\nimport ImageComponent from '../ImageComponent';\r\nimport Comment from './Comment';\r\nimport SinglePostBody from './SinglePostBody';\r\n\r\nexport default function SinglePost({\r\n  route: {\r\n    params: { _id, searchTerm, searchedTag }\r\n  },\r\n  navigation\r\n}) {\r\n  const theme = useTheme();\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [comment, setComment] = useState('');\r\n  const [inputFocused, setInputFocused] = useState(false);\r\n\r\n  const [likePost] = useLikePostMutation();\r\n  const [refreshPost, { isLoading: refreshPostLoading }] =\r\n    useLazyGetPostByIdQuery();\r\n  const [addComment, { isLoading: addCommentLoading }] =\r\n    useAddCommentMutation();\r\n  const [deletePost, { isLoading: deletePostLoading }] =\r\n    useDeleteDiscoverPostMutation();\r\n  const { data: userData } =\r\n    usersApiSlice.endpoints.getUserInfo.useQueryState(userKey);\r\n  const post = discoverApiSlice.endpoints.getDiscoverPosts.useQueryState(\r\n    { pageNumber: 1, userKey, userName: userData.userName },\r\n    {\r\n      selectFromResult: (result) =>\r\n        postsSelectors.selectById(\r\n          result.data ?? postsAdapter.getInitialState(),\r\n          _id\r\n        )\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!post) navigation.goBack();\r\n  }, [post]);\r\n\r\n  const handleRefreshPost = async () => {\r\n    try {\r\n      await refreshPost({\r\n        postId: _id,\r\n        userKey,\r\n        userName: userData.userName,\r\n        searchTerm,\r\n        tag: searchedTag\r\n      }).unwrap();\r\n    } catch (error) {\r\n      console.warn(\"Couldn't refresh post\", error);\r\n    }\r\n  };\r\n\r\n  const handleDeletePost = async () => {\r\n    try {\r\n      await deletePost({\r\n        _id,\r\n        userKey,\r\n        userName: userData.userName,\r\n        title: post.title,\r\n        searchTerm,\r\n        tag: searchedTag\r\n      }).unwrap();\r\n    } catch (error) {\r\n      console.warn(\"Couldn't delete post\", error);\r\n    }\r\n  };\r\n\r\n  const handleSubmitComment = async () => {\r\n    try {\r\n      await addComment({\r\n        _id,\r\n        userKey,\r\n        userName: userData.userName,\r\n        text: comment,\r\n        searchTerm,\r\n        tag: searchedTag\r\n      }).unwrap();\r\n      setComment('');\r\n      setInputFocused(false);\r\n      Keyboard.dismiss();\r\n    } catch (e) {\r\n      console.warn('Error submitting comment', e);\r\n    }\r\n  };\r\n\r\n  const handlePressLike = async () => {\r\n    try {\r\n      await likePost({\r\n        userKey,\r\n        _id,\r\n        title: post.title,\r\n        postAuthor: post.userName,\r\n        userName: userData.userName,\r\n        searchTerm,\r\n        tag: searchedTag\r\n      }).unwrap();\r\n    } catch (error) {\r\n      console.warn('Error liking post:', error);\r\n    }\r\n  };\r\n\r\n  let body = <></>;\r\n  if (post?.type === 'contentImage') {\r\n    body = (\r\n      <ImageComponent\r\n        apiInfo={{\r\n          userKey,\r\n          _id,\r\n          title: post.title,\r\n          postAuthor: post.userName,\r\n          userName: userData.userName,\r\n          searchTerm,\r\n          searchedTag\r\n        }}\r\n        hasLiked={post.hasLiked}\r\n        imageId={post.contentImage}\r\n      />\r\n    );\r\n  } else if (post?.type === 'contentText' || post?.type === 'contentUrl') {\r\n    body = (\r\n      <SinglePostBody\r\n        handleLikePost={handlePressLike}\r\n        type={post.type}\r\n        body={post.contentText || post.contentUrl}\r\n      />\r\n    );\r\n  }\r\n\r\n  function TopContent() {\r\n    return (\r\n      <Layout style={{ maxWidth: MAX_WIDTH_WEB, alignSelf: 'center' }}>\r\n        <Card\r\n          disabled\r\n          style={{ margin: 8, borderWidth: 0 }}\r\n          header={\r\n            <Layout>\r\n              <Text style={{ fontWeight: 'bold', fontSize: 20 }}>\r\n                {post.title}\r\n              </Text>\r\n            </Layout>\r\n          }\r\n          footer={\r\n            <Layout style={{ margin: 0, padding: 0 }}>\r\n              <BottomBar\r\n                commentIconShown={false}\r\n                tags={post.tags}\r\n                _id={post._id}\r\n              />\r\n            </Layout>\r\n          }\r\n        >\r\n          {body}\r\n        </Card>\r\n        {post.userName === userData.userName ? (\r\n          <Layout style={{ flexDirection: 'row', width: '100%' }}>\r\n            <Button\r\n              status=\"danger\"\r\n              style={{ margin: 8, flex: 1 }}\r\n              onPress={handleDeletePost}\r\n            >\r\n              Delete Post\r\n            </Button>\r\n            {/* <Button style={{ margin: 8, flex: 1 }} disabled>\r\n              Edit Post\r\n            </Button> */}\r\n          </Layout>\r\n        ) : null}\r\n\r\n        <Card disabled style={{ borderWidth: 0 }}>\r\n          <Text\r\n            style={{\r\n              fontWeight: '600'\r\n            }}\r\n          >\r\n            {`Comments (${post.comments.length})`}\r\n          </Text>\r\n        </Card>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  if (!post) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <LinearGradient\r\n      colors={\r\n        darkMode\r\n          ? [theme['color-basic-1100'], theme['color-basic-1100']]\r\n          : [theme['color-primary-500'], theme['color-success-500']]\r\n      }\r\n      style={{\r\n        width: '100%',\r\n        margin: 0,\r\n        alignItems: 'center',\r\n        flex: 1\r\n      }}\r\n      start={{ x: 0, y: 0 }}\r\n      end={{ x: 1, y: 0.4 }}\r\n    >\r\n      <Layout style={{ flex: 1 }}>\r\n        {showModal && <DisabledFieldModal setShowModal={setShowModal} />}\r\n        {/* Render Comments */}\r\n        <List\r\n          onRefresh={handleRefreshPost}\r\n          showsVerticalScrollIndicator={false}\r\n          refreshing={refreshPostLoading}\r\n          ListHeaderComponent={TopContent}\r\n          contentContainerStyle={{\r\n            marginHorizontal: 10,\r\n            maxWidth: 700,\r\n            alignSelf: 'center'\r\n          }}\r\n          style={{ backgroundColor: 'transparent' }}\r\n          data={post.comments}\r\n          ItemSeparatorComponent={Divider}\r\n          renderItem={({ item }) => (\r\n            <Comment\r\n              body={item.text}\r\n              postId={post._id}\r\n              commentId={item._id}\r\n              numLikes={item.numLikes}\r\n              hasLiked={item.hasLiked}\r\n              userName={userData.userName}\r\n              isOwnComment={item.userName === userData.userName}\r\n              searchTerm={searchTerm}\r\n              searchedTag={searchedTag}\r\n            />\r\n          )}\r\n          keyExtractor={(comment) => {\r\n            return comment._id;\r\n          }}\r\n        />\r\n        <Layout\r\n          style={{\r\n            flexDirection: 'row',\r\n            alignItems: 'center',\r\n            height: 55,\r\n            bottom: 0,\r\n            width: '100%',\r\n            paddingVertical: 10,\r\n            paddingRight: 10,\r\n            borderColor: darkMode\r\n              ? theme['color-basic-500']\r\n              : theme['color-basic-300'],\r\n            borderTopWidth: 1\r\n          }}\r\n        >\r\n          <Layout\r\n            style={{\r\n              flex: 1,\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}\r\n          >\r\n            <Layout\r\n              style={{\r\n                borderRadius: 100,\r\n                width: 35,\r\n                height: 35,\r\n                backgroundColor: darkMode\r\n                  ? theme['color-basic-600']\r\n                  : theme['color-basic-300'],\r\n                justifyContent: 'center',\r\n                alignItems: 'center'\r\n              }}\r\n            >\r\n              <Text style={{ fontSize: 15 }}>\r\n                {stringToEmoji(userData.userName)}\r\n              </Text>\r\n            </Layout>\r\n          </Layout>\r\n\r\n          <Input\r\n            accessoryRight={\r\n              inputFocused ? (\r\n                <TouchableOpacity onPress={handleSubmitComment}>\r\n                  <FontAwesome5\r\n                    name=\"arrow-alt-circle-right\"\r\n                    size={22}\r\n                    color={theme['color-primary-500']}\r\n                  />\r\n                </TouchableOpacity>\r\n              ) : null\r\n            }\r\n            style={{ flex: 7 }}\r\n            placeholder=\"Add a comment...\"\r\n            onFocus={() => setInputFocused(true)}\r\n            onBlur={() => setInputFocused(false)}\r\n            value={comment}\r\n            onChangeText={(text) => setComment(text)}\r\n            onSubmitEditing={handleSubmitComment}\r\n          />\r\n        </Layout>\r\n        {(deletePostLoading || addCommentLoading) && <FullPageSpinner />}\r\n      </Layout>\r\n    </LinearGradient>\r\n  );\r\n}\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { Layout, Text, useTheme } from '@ui-kitten/components';\r\nimport React, { useState } from 'react';\r\nimport {\r\n  Image,\r\n  Platform,\r\n  TouchableOpacity,\r\n  TouchableWithoutFeedback\r\n} from 'react-native';\r\n\r\nimport { selectDarkMode } from '../../app/appDataSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport Header from '../../components/Header';\r\nimport SearchBar from '../../components/SearchBar';\r\nimport { SponsorPage } from '../sponsors/SponsorsList';\r\nimport CreatePost from './CreatePost/CreatePost';\r\nimport PostsList from './PostsList';\r\nimport SearchPage from './SearchPage';\r\nimport SinglePost from './SinglePost/SinglePostPage';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function Discover({ navigation }) {\r\n  const theme = useTheme();\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  const accessoryRight = (\r\n    <TouchableOpacity onPress={() => navigation.navigate('CreatePost')}>\r\n      <FontAwesome5 name=\"plus\" size={23} color={theme['color-primary-500']} />\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  const accessoryLeft = (\r\n    <Image\r\n      style={{\r\n        height: 28,\r\n        width: 28\r\n      }}\r\n      source={require('../../../assets/logos/app-logo-transparent.png')}\r\n    />\r\n  );\r\n\r\n  let searchBarBackgroundColor = '';\r\n  if (darkMode) {\r\n    searchBarBackgroundColor = theme['color-basic-800'];\r\n  } else {\r\n    searchBarBackgroundColor = theme['color-basic-100'];\r\n  }\r\n\r\n  return (\r\n    <Stack.Navigator>\r\n      <Stack.Screen\r\n        name=\"PostsList\"\r\n        initialParams={{ sponsor: true }}\r\n        component={PostsList}\r\n        options={{\r\n          title: 'Discover',\r\n          header: () => (\r\n            <Layout level=\"2\" style={{ paddingBottom: 15 }}>\r\n              <Header\r\n                level=\"2\"\r\n                title=\"Discover\"\r\n                accessoryLeft={accessoryLeft}\r\n                accessoryRight={accessoryRight}\r\n                center={\r\n                  <Layout level=\"2\" style={{ flex: 1, marginHorizontal: 10 }}>\r\n                    {Platform.OS === 'ios' ? (\r\n                      <SearchBar\r\n                        inputStyle={{\r\n                          opacity: 0.8,\r\n                          backgroundColor: searchBarBackgroundColor\r\n                        }}\r\n                        searchTerm={searchTerm}\r\n                        onChangeText={setSearchTerm}\r\n                        placeholder=\"Search Posts...\"\r\n                        inputProps={{\r\n                          disabled: true,\r\n                          onPressIn: () => {\r\n                            navigation.navigate('SearchPage');\r\n                          },\r\n\r\n                          onBlur: () => {\r\n                            navigation.goBack();\r\n                          }\r\n                        }}\r\n                      />\r\n                    ) : (\r\n                      <Layout\r\n                        style={{\r\n                          minHeight: 35,\r\n                          paddingLeft: 15,\r\n                          borderRadius: 20,\r\n                          flex: 1,\r\n                          borderWidth: 1,\r\n                          borderColor: darkMode\r\n                            ? theme['color-basic-500']\r\n                            : theme['color-basic-100'],\r\n                          justifyContent: 'center'\r\n                        }}\r\n                      >\r\n                        <TouchableWithoutFeedback\r\n                          onPress={() => {\r\n                            navigation.navigate('SearchPage');\r\n                          }}\r\n                        >\r\n                          <Text\r\n                            style={{\r\n                              color: theme['color-basic-400'],\r\n                              fontSize: 14\r\n                            }}\r\n                          >\r\n                            Search Posts...\r\n                          </Text>\r\n                        </TouchableWithoutFeedback>\r\n                      </Layout>\r\n                    )}\r\n                  </Layout>\r\n                }\r\n              />\r\n            </Layout>\r\n          )\r\n        }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"CreatePost\"\r\n        component={CreatePost}\r\n        options={{ headerTitle: 'Create a Post' }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"SinglePost\"\r\n        component={SinglePost}\r\n        options={{\r\n          headerTitle: '',\r\n          title: 'Discover'\r\n        }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"SearchPage\"\r\n        component={SearchPage}\r\n        options={{ headerShown: false, animation: 'fade', title: 'Discover' }}\r\n      />\r\n      <Stack.Screen\r\n        name=\"SponsorPageDiscover\"\r\n        component={SponsorPage}\r\n        options={{ headerTitle: '', title: 'Discover' }}\r\n      />\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n","export default {\r\n  'color-basic-100': '#FFFFFF',\r\n  'color-basic-200': '#F5F5F5',\r\n  'color-basic-300': '#D4D4D4',\r\n  'color-basic-400': '#B3B3B3',\r\n  'color-basic-500': '#808080',\r\n  'color-basic-600': '#4A4A4A',\r\n  'color-basic-700': '#383838',\r\n  'color-basic-800': '#292929',\r\n  'color-basic-900': '#1F1F1F',\r\n  'color-basic-1000': '#141414',\r\n  'color-basic-1100': '#000000',\r\n  'color-primary-100': '#FFE0D8',\r\n  'color-primary-200': '#FFBBB2',\r\n  'color-primary-300': '#FF8E8B',\r\n  'color-primary-400': '#FF6F78',\r\n  'color-primary-500': '#FF3F5E',\r\n  'color-primary-600': '#DB2E5A',\r\n  'color-primary-700': '#B71F54',\r\n  'color-primary-800': '#93144C',\r\n  'color-primary-900': '#7A0C47',\r\n  'color-success-100': '#FBD4F0',\r\n  'color-success-200': '#F8ABE8',\r\n  'color-success-300': '#EA7EDC',\r\n  'color-success-400': '#D55AD0',\r\n  'color-success-500': '#b42bba',\r\n  'color-success-600': '#8F1F9F',\r\n  'color-success-700': '#6E1585',\r\n  'color-success-800': '#500D6B',\r\n  'color-success-900': '#3A0859',\r\n  'color-info-100': '#CDFDFE',\r\n  'color-info-200': '#9CF4FE',\r\n  'color-info-300': '#6AE4FC',\r\n  'color-info-400': '#45D0FA',\r\n  'color-info-500': '#09B0F7',\r\n  'color-info-600': '#0689D4',\r\n  'color-info-700': '#0466B1',\r\n  'color-info-800': '#02498F',\r\n  'color-info-900': '#013476',\r\n  'color-warning-100': '#FFF6CC',\r\n  'color-warning-200': '#FFEA99',\r\n  'color-warning-300': '#FFDC66',\r\n  'color-warning-400': '#FFCD3F',\r\n  'color-warning-500': '#FFB600',\r\n  'color-warning-600': '#DB9600',\r\n  'color-warning-700': '#B77800',\r\n  'color-warning-800': '#935C00',\r\n  'color-warning-900': '#7A4800',\r\n  'color-danger-100': '#FEE5DE',\r\n  'color-danger-200': '#FEC6BE',\r\n  'color-danger-300': '#FEA09D',\r\n  'color-danger-400': '#FD858D',\r\n  'color-danger-500': '#FC5D77',\r\n  'color-danger-600': '#D8436A',\r\n  'color-danger-700': '#B52E5E',\r\n  'color-danger-800': '#921D51',\r\n  'color-danger-900': '#781149',\r\n  'color-grey-800': '#1F1F1F',\r\n  'color-grey-700': '#2F2F2F',\r\n  'color-grey-600': '#3F3F3F',\r\n  'color-grey-500': '#4F4F4F',\r\n  'color-grey-400': '#5F5F5F',\r\n  'color-grey-300': '#6F6F6F',\r\n  'color-grey-200': '#7F7F7F',\r\n  'color-grey-100': '#8F8F8F',\r\n  'color-grey-50': '#9F9F9F'\r\n};\r\n","import { Feather } from '@expo/vector-icons';\r\nimport React from 'react';\r\nimport { StyleSheet } from 'react-native';\r\n\r\nexport default {\r\n  name: 'feather',\r\n  icons: createIconsMap()\r\n};\r\n\r\nfunction createIconsMap() {\r\n  return new Proxy(\r\n    {},\r\n    {\r\n      get(target, name) {\r\n        return IconProvider(name);\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\nconst IconProvider = (name) => ({\r\n  toReactElement: (props) => FeatherIcon({ name, ...props })\r\n});\r\n\r\nfunction FeatherIcon({ name, style }) {\r\n  const { height, tintColor, ...iconStyle } = StyleSheet.flatten(style);\r\n  return (\r\n    <Feather name={name} size={height} color={tintColor} style={iconStyle} />\r\n  );\r\n}\r\n","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport React from 'react';\r\nimport { StyleSheet } from 'react-native';\r\n\r\nexport default {\r\n  name: 'fontAwesome',\r\n  icons: createIconsMap()\r\n};\r\n\r\nfunction createIconsMap() {\r\n  return new Proxy(\r\n    {},\r\n    {\r\n      get(target, name) {\r\n        return IconProvider(name);\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\nconst IconProvider = (name) => ({\r\n  toReactElement: (props) => FontAwesomeIcon({ name, ...props })\r\n});\r\n\r\nfunction FontAwesomeIcon({ name, style }) {\r\n  const { height, tintColor, ...iconStyle } = StyleSheet.flatten(style);\r\n  return (\r\n    <FontAwesome5\r\n      name={name}\r\n      size={height}\r\n      color={tintColor}\r\n      style={iconStyle}\r\n    />\r\n  );\r\n}\r\n","import * as eva from '@eva-design/eva';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { BottomSheetModalProvider } from '@gorhom/bottom-sheet';\r\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\r\n\r\nimport {\r\n  DarkTheme,\r\n  DefaultTheme,\r\n  NavigationContainer\r\n} from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport {\r\n  ApplicationProvider,\r\n  IconRegistry,\r\n  Layout,\r\n  Text,\r\n  useTheme\r\n} from '@ui-kitten/components';\r\nimport Constants from 'expo-constants';\r\nimport { isDevice } from 'expo-device';\r\nimport * as Linking from 'expo-linking';\r\nimport { Subscription } from 'expo-modules-core';\r\nimport * as Notifications from 'expo-notifications';\r\nimport * as ExpoSplashScreen from 'expo-splash-screen';\r\nimport { StatusBar } from 'expo-status-bar';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  Alert,\r\n  Platform,\r\n  useColorScheme,\r\n  useWindowDimensions\r\n} from 'react-native';\r\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\r\nimport { RootSiblingParent } from 'react-native-root-siblings';\r\nimport { Provider } from 'react-redux';\r\nimport { persistStore } from 'redux-persist';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport {\r\n  cacheReset,\r\n  deviceDarkModeSet,\r\n  mobileSiteSet,\r\n  reset as resetAppData,\r\n  selectDarkMode,\r\n  selectUserKey,\r\n  userKeyUpdated\r\n} from './src/app/appDataSlice';\r\nimport { store } from './src/app/store';\r\nimport {\r\n  apiSlice,\r\n  useLazyGetCurrentVersionQuery\r\n} from './src/features/api/apiSlice';\r\nimport {\r\n  availableSectionsListUpdated,\r\n  currentSectionUpdated,\r\n  reset as resetClassPages\r\n} from './src/features/classPages/classPagesSlice';\r\nimport { reset as resetDiscover } from './src/features/discover/discoverSlice';\r\n\r\nimport { useAppDispatch, useAppSelector } from './src/app/hooks';\r\nimport WebSplashScreen from './src/components/WebSplashScreen';\r\nimport AdminPanel from './src/features/adminPanel';\r\nimport {\r\n  useLazyGetAllClassesQuery,\r\n  useLazyGetAllSectionsQuery\r\n} from './src/features/api/classPagesApi';\r\nimport {\r\n  useAddExpoPushTokenMutation,\r\n  useGetUserInfoQuery,\r\n  useLazyGetUserInfoQuery,\r\n  useTrackLoginMutation\r\n} from './src/features/api/usersApi';\r\nimport Auth from './src/features/authentication';\r\nimport Calendar from './src/features/calendar';\r\nimport ChatsRoomNavigation from './src/features/chats/ChatRooms';\r\nimport ClassPages from './src/features/classPages';\r\nimport CombinedClassPages from './src/features/combinedCalender';\r\nimport Discover from './src/features/discover';\r\nimport { versionCompare } from './src/functions';\r\nimport Theme from './src/theme/custom-theme';\r\nimport FeatherIconsPack from './src/theme/feather-icons';\r\nimport FontAwesomeIconsPack from './src/theme/font-awesome-icons';\r\n\r\nconst persistor = persistStore(store);\r\nconst Stack = createNativeStackNavigator();\r\nconst Tab = createBottomTabNavigator();\r\nExpoSplashScreen.preventAutoHideAsync();\r\n\r\nNotifications.setNotificationHandler({\r\n  handleNotification: async () => ({\r\n    shouldShowAlert: false,\r\n    shouldPlaySound: false,\r\n    shouldSetBadge: false\r\n  })\r\n});\r\n\r\nconst registerForPushNotificationsAsync = async () => {\r\n  let token: string;\r\n  if (isDevice && Platform.OS !== 'web') {\r\n    const { status: existingStatus } =\r\n      await Notifications.getPermissionsAsync();\r\n    let finalStatus = existingStatus;\r\n    if (existingStatus !== 'granted') {\r\n      const { status } = await Notifications.requestPermissionsAsync();\r\n      finalStatus = status;\r\n    }\r\n    if (finalStatus !== 'granted') {\r\n      alert('Failed to get push token for push notification!');\r\n      return;\r\n    }\r\n    token = (await Notifications.getExpoPushTokenAsync()).data;\r\n  }\r\n\r\n  if (Platform.OS === 'android') {\r\n    Notifications.setNotificationChannelAsync('default', {\r\n      name: 'default',\r\n      importance: Notifications.AndroidImportance.MAX,\r\n      vibrationPattern: [0, 250, 250, 250],\r\n      lightColor: '#FF231F7C'\r\n    });\r\n  }\r\n\r\n  return token;\r\n};\r\n\r\nexport default function Entry() {\r\n  return (\r\n    <Provider store={store}>\r\n      <PersistGate persistor={persistor}>\r\n        <RootSiblingParent>\r\n          <GestureHandlerRootView style={{ flex: 1 }}>\r\n            <BottomSheetModalProvider>\r\n              <App />\r\n            </BottomSheetModalProvider>\r\n          </GestureHandlerRootView>\r\n        </RootSiblingParent>\r\n      </PersistGate>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  const colorScheme = useColorScheme();\r\n  const dispatch = useAppDispatch();\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const darkMode = useAppSelector(selectDarkMode);\r\n  const useDeviceColorScheme = useAppSelector(\r\n    (state) => state.appData.secure.useDeviceColorScheme\r\n  );\r\n  const localCurrentSection = useAppSelector(\r\n    (state) => state.appData.classPages.currentSection\r\n  );\r\n  const isCacheReset = useAppSelector(\r\n    (state) => state.appData.secure.isCacheReset\r\n  );\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [trackLogin] = useTrackLoginMutation();\r\n  const [getAllSections] = useLazyGetAllSectionsQuery();\r\n  const [getAllClasses] = useLazyGetAllClassesQuery();\r\n  const [getCurrentVersion] = useLazyGetCurrentVersionQuery();\r\n  const [getUserInfo, { data: userData, isError }] = useLazyGetUserInfoQuery();\r\n  const [addExpoPushToken] = useAddExpoPushTokenMutation();\r\n  const windowWidth = useWindowDimensions().width;\r\n\r\n  const [notification, setNotification] =\r\n    useState<Notifications.Notification>(null);\r\n  const notificationListener = useRef<Subscription>();\r\n  const responseListener = useRef();\r\n\r\n  const linking = {\r\n    prefixes: [Linking.createURL('/'), 'https://www.joinathena.net']\r\n  };\r\n\r\n  useEffect(() => {\r\n    const prepare = async () => {\r\n      try {\r\n        const fetchedCurrentSection = await getAllSections().unwrap();\r\n\r\n        if (!isCacheReset) {\r\n          dispatch(resetClassPages());\r\n          dispatch(resetDiscover());\r\n          dispatch(resetAppData());\r\n          dispatch(apiSlice.util.resetApiState());\r\n          dispatch(cacheReset());\r\n        }\r\n\r\n        // Check for user key\r\n        if (userKey) {\r\n          const fetchedUserData = await getUserInfo(userKey).unwrap();\r\n          await trackLogin(userKey);\r\n\r\n          // Notfication token setup\r\n          try {\r\n            const expoPushToken = await registerForPushNotificationsAsync();\r\n            if (expoPushToken) {\r\n              await addExpoPushToken({\r\n                userKey,\r\n                expoPushToken,\r\n                userName: fetchedUserData.userName\r\n              }).unwrap();\r\n            }\r\n          } catch (e) {\r\n            console.warn('Failed to set up expo push token', e);\r\n          }\r\n\r\n          dispatch(\r\n            availableSectionsListUpdated(fetchedCurrentSection.availableTerms)\r\n          );\r\n\r\n          // Check for current section and update class list if outdated\r\n          if (\r\n            Platform.OS === 'web' ||\r\n            fetchedCurrentSection.currentTerm !== localCurrentSection\r\n          ) {\r\n            dispatch(currentSectionUpdated(fetchedCurrentSection.currentTerm));\r\n            try {\r\n              getAllClasses({\r\n                userKey,\r\n                collegeName: fetchedUserData.collegeName,\r\n                courseTerm: fetchedCurrentSection.currentTerm\r\n              }).unwrap();\r\n            } catch (e) {\r\n              console.warn('Section is outdated: could not fetch classes', e);\r\n            }\r\n          }\r\n        }\r\n\r\n        notificationListener.current =\r\n          Notifications.addNotificationReceivedListener((notification) => {\r\n            setNotification(notification);\r\n          });\r\n\r\n        checkForUpdates();\r\n      } catch (e) {\r\n        dispatch(userKeyUpdated('')); // Clear userKey if login fails\r\n        console.warn('Login Fail', e);\r\n      } finally {\r\n        setIsReady(true);\r\n        await ExpoSplashScreen.hideAsync();\r\n      }\r\n    };\r\n    prepare();\r\n\r\n    return () => {\r\n      if (notificationListener.current) {\r\n        Notifications.removeNotificationSubscription(\r\n          notificationListener.current\r\n        );\r\n      }\r\n\r\n      if (responseListener.current) {\r\n        Notifications.removeNotificationSubscription(responseListener.current);\r\n      }\r\n    };\r\n  }, [userKey]);\r\n\r\n  useEffect(() => {\r\n    if (useDeviceColorScheme) {\r\n      dispatch(deviceDarkModeSet(colorScheme === 'dark'));\r\n    }\r\n  }, [colorScheme]);\r\n\r\n  useEffect(() => {\r\n    dispatch(mobileSiteSet(windowWidth < 768));\r\n  }, [windowWidth]);\r\n\r\n  const checkForUpdates = async () => {\r\n    try {\r\n      // Check for current version\r\n      const currentVersion =\r\n        Constants?.manifest2?.extra?.expoClient?.version ??\r\n        Constants?.manifest?.version;\r\n\r\n      const res = await getCurrentVersion().unwrap();\r\n      const currentFrontEndVersion =\r\n        res?.currentFrontEndVersion.currentFrontEndVersion;\r\n\r\n      if (\r\n        Platform.OS !== 'web' &&\r\n        currentVersion &&\r\n        versionCompare(currentFrontEndVersion, currentVersion) > 0\r\n      ) {\r\n        Alert.alert('There is a new version available!', '', [\r\n          {\r\n            text:\r\n              Platform.OS === 'android'\r\n                ? 'Update on the Play Store'\r\n                : 'Update on the App Store',\r\n            onPress: () =>\r\n              Linking.openURL(\r\n                Platform.OS === 'android'\r\n                  ? 'market://details?id=com.theathenanetwork.app'\r\n                  : 'https://apps.apple.com/us/app/athena-network/id1628317342'\r\n              )\r\n          },\r\n          {\r\n            text: 'Cancel',\r\n            style: 'cancel'\r\n          }\r\n        ]);\r\n      }\r\n    } catch (e) {\r\n      console.warn('Update check failed', e);\r\n    }\r\n  };\r\n\r\n  if (!isReady) {\r\n    if (Platform.OS === 'web') {\r\n      return <WebSplashScreen />;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <NavigationContainer\r\n      documentTitle={{\r\n        formatter: (options, route) =>\r\n          `${options?.title ? options?.title + ' -' : ''} Athena Network`\r\n      }}\r\n      theme={darkMode ? DarkTheme : DefaultTheme}\r\n      // linking={linking}\r\n      // fallback={<WebSplashScreen />}\r\n    >\r\n      <ApplicationProvider\r\n        {...eva}\r\n        theme={{ ...(darkMode ? eva.dark : eva.light), ...Theme }}\r\n      >\r\n        <StatusBar style={darkMode ? 'light' : 'dark'} />\r\n        <IconRegistry icons={[FontAwesomeIconsPack, FeatherIconsPack]} />\r\n\r\n        <Layout style={{ flex: 1, overflow: 'hidden' }}>\r\n          <Stack.Navigator screenOptions={{ headerShown: false }}>\r\n            {userData && !isError ? (\r\n              <Stack.Screen name=\"Tabs\" component={TabsPage} />\r\n            ) : (\r\n              <Stack.Screen name=\"Auth\" component={Auth} />\r\n            )}\r\n          </Stack.Navigator>\r\n        </Layout>\r\n      </ApplicationProvider>\r\n    </NavigationContainer>\r\n  );\r\n}\r\n\r\nfunction TabsPage() {\r\n  const theme = useTheme();\r\n  const isMobile = useAppSelector((state) => state.appData.secure.isMobile);\r\n  const userKey = useAppSelector(selectUserKey);\r\n  const { data: userData } = useGetUserInfoQuery(userKey, {\r\n    skip: !userKey\r\n  });\r\n  const [isDev] = useState(!!__DEV__);\r\n\r\n  return (\r\n    <Tab.Navigator\r\n      initialRouteName={'ClassPages'}\r\n      screenOptions={({ route }) => ({\r\n        tabBarHideOnKeyboard: Platform.OS === 'android',\r\n        tabBarIcon: ({ focused }) => {\r\n          // Create type for icon name\r\n          type IoniconsIconName = React.ComponentProps<typeof Ionicons>['name'];\r\n          let iconName: IoniconsIconName = 'ios-home';\r\n\r\n          if (route.name === 'ClassPages') {\r\n            iconName = focused ? 'book' : 'book-outline';\r\n          } else if (route.name === 'Discover') {\r\n            iconName = focused ? 'compass' : 'compass-outline';\r\n          } else if (route.name === 'Calendar') {\r\n            iconName = focused ? 'calendar' : 'calendar-outline';\r\n          } else if (route.name === 'ChatsRoomNavigation') {\r\n            iconName = focused ? 'chatbubbles' : 'chatbubbles-outline';\r\n          }\r\n\r\n          return (\r\n            <Ionicons\r\n              name={iconName}\r\n              size={25}\r\n              color={\r\n                focused ? theme['color-primary-500'] : theme['color-basic-500']\r\n              }\r\n            />\r\n          );\r\n        },\r\n        tabBarStyle: { paddingTop: 5 },\r\n        headerShown: false,\r\n        lazy: true\r\n      })}\r\n    >\r\n      {isMobile ? (\r\n        <>\r\n          <Tab.Screen\r\n            name=\"ClassPages\"\r\n            component={ClassPages}\r\n            options={{\r\n              tabBarLabel: () => (\r\n                <Text\r\n                  style={{\r\n                    margin: isMobile ? 0 : 15,\r\n                    fontSize: 12\r\n                  }}\r\n                >\r\n                  Class Pages\r\n                </Text>\r\n              )\r\n            }}\r\n          />\r\n          <Tab.Screen\r\n            name=\"Calendar\"\r\n            component={Calendar}\r\n            options={{\r\n              tabBarLabel: () => (\r\n                <Text\r\n                  style={{\r\n                    margin: isMobile ? undefined : 15,\r\n                    fontSize: 12\r\n                  }}\r\n                >\r\n                  Calendar\r\n                </Text>\r\n              )\r\n            }}\r\n          />\r\n        </>\r\n      ) : (\r\n        <Tab.Screen\r\n          name=\"ClassPages2\"\r\n          component={CombinedClassPages}\r\n          options={{\r\n            tabBarLabel: () => (\r\n              <Text\r\n                style={{\r\n                  margin: isMobile ? undefined : 15,\r\n                  fontSize: 12\r\n                }}\r\n              >\r\n                Class Pages\r\n              </Text>\r\n            ),\r\n            title: 'Class Pages'\r\n          }}\r\n        />\r\n      )}\r\n      <Tab.Screen\r\n        name=\"ChatsRoomNavigation\"\r\n        component={ChatsRoomNavigation}\r\n        options={{\r\n          tabBarLabel: () => (\r\n            <Text\r\n              style={{\r\n                margin: isMobile ? undefined : 15,\r\n                fontSize: 12\r\n              }}\r\n            >\r\n              Chats\r\n            </Text>\r\n          )\r\n        }}\r\n      />\r\n      <Tab.Screen\r\n        name=\"Discover\"\r\n        component={Discover}\r\n        options={{\r\n          tabBarLabel: () => (\r\n            <Text\r\n              style={{\r\n                margin: isMobile ? undefined : 15,\r\n                fontSize: 12\r\n              }}\r\n            >\r\n              Discover\r\n            </Text>\r\n          )\r\n        }}\r\n      />\r\n      {userData?.permissionLevel === 'admin' && (\r\n        <Tab.Screen\r\n          name=\"Admin\"\r\n          component={AdminPanel}\r\n          options={{\r\n            unmountOnBlur: false,\r\n            tabBarLabel: () => (\r\n              <Text\r\n                style={{\r\n                  margin: isMobile ? undefined : 15,\r\n                  fontSize: 12\r\n                }}\r\n              >\r\n                Admin\r\n              </Text>\r\n            )\r\n          }}\r\n        />\r\n      )}\r\n    </Tab.Navigator>\r\n  );\r\n}\r\n","import { registerRootComponent } from 'expo';\r\n\r\nimport App from './App';\r\n\r\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\r\n// It also ensures that whether you load the app in Expo Go or in a native build,\r\n// the environment is set up appropriately\r\nregisterRootComponent(App);\r\n"],"sourceRoot":""}